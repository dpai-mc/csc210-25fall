<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSC210 Week 2: Boolean Logic and Digital Gates</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #ffffff;
            font-size: 16px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-bottom: 2rem;
            border-radius: 8px;
        }

        .week-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .info-card {
            background: rgba(255,255,255,0.1);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .info-card h3 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        .section {
            background-color: #ffffff;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .section h2 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.8rem;
            border-bottom: 3px solid #3498db;
            padding-bottom: 0.5rem;
        }

        .objectives-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .objective {
            background: #f8f9fa;
            padding: 1rem;
            border-left: 4px solid #28a745;
            border-radius: 4px;
        }

        .interactive-panel {
            background: #f0f8ff;
            border: 2px solid #3498db;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .gate-simulator {
            display: grid;
            grid-template-columns: 1fr 200px 1fr;
            gap: 2rem;
            align-items: center;
            margin: 1rem 0;
        }

        .inputs-section, .outputs-section {
            text-align: center;
        }

        .gate-display {
            text-align: center;
            padding: 1rem;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
        }

        .gate-svg {
            max-width: 250px;
            height: auto;
            margin: 1rem 0;
        }

        .gate-svg .wire { 
            stroke-width: 4; 
            transition: stroke 0.3s; 
        }

        .gate-svg .gate-body { 
            fill: #f0f0f0; 
            stroke: #333; 
            stroke-width: 2; 
        }

        .gate-svg text { 
            font-family: monospace; 
            font-size: 20px; 
            font-weight: bold; 
            fill: #333;
        }

        .input-switch, .output-light {
            margin: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .input-switch {
            background-color: #dc3545;
            color: white;
        }

        .input-switch.on {
            background-color: #28a745;
        }

        .output-light {
            background-color: #6c757d;
            color: white;
            cursor: default;
        }

        .output-light.on {
            background-color: #ffc107;
            color: #000;
            box-shadow: 0 0 15px #ffc107;
        }

        .gate-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            margin: 1rem 0;
        }

        .gate-btn {
            padding: 0.5rem 1rem;
            border: 2px solid #3498db;
            background: white;
            color: #3498db;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .gate-btn.active {
            background: #3498db;
            color: white;
        }

        .gate-btn:hover {
            background: #2980b9;
            color: white;
        }

        .truth-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: white;
        }

        .truth-table th,
        .truth-table td {
            border: 2px solid #ddd;
            padding: 0.75rem;
            text-align: center;
            font-weight: bold;
        }

        .truth-table th {
            background-color: #3498db;
            color: white;
        }

        .truth-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        .boolean-playground {
            background: #e8f5e8;
            border: 2px solid #28a745;
            border-radius: 8px;
            padding: 1.5rem;
        }

        .expression-input {
            width: 100%;
            padding: 0.75rem;
            font-size: 1rem;
            border: 2px solid #ddd;
            border-radius: 4px;
            margin: 0.5rem 0;
            font-family: 'Courier New', monospace;
        }

        .button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            margin: 0.25rem;
        }

        .button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        .button:focus {
            outline: 3px solid #74c0fc;
            outline-offset: 2px;
        }

        .result-display {
            background: white;
            border: 2px solid #ddd;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            min-height: 100px;
        }

        .quiz-question {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .quiz-options {
            display: grid;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .quiz-option {
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            background: #f8f9fa;
            border-color: #3498db;
        }

        .quiz-option.selected {
            background: #3498db;
            color: white;
            border-color: #2980b9;
        }

        .quiz-option.correct {
            background: #28a745;
            color: white;
            border-color: #1e7e34;
        }

        .quiz-option.incorrect {
            background: #dc3545;
            color: white;
            border-color: #c82333;
        }

        .progress-tracker {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #28a745, #20c997);
            width: 0%;
            transition: width 0.5s ease;
        }

        .laws-reference {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }

        .law-card {
            background: #f8f9fa;
            border: 2px solid #6c757d;
            border-radius: 8px;
            padding: 1rem;
        }

        .law-card h4 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .formula {
            font-family: 'Courier New', monospace;
            background: white;
            padding: 0.5rem;
            border-radius: 4px;
            border: 1px solid #ddd;
            margin: 0.25rem 0;
        }

        .gate-symbol {
            font-size: 2rem;
            margin: 0.5rem;
        }

        .accessibility-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            z-index: 1000;
        }

        .accessibility-controls button {
            background: #3498db;
            color: white;
            border: none;
            padding: 0.5rem;
            margin: 0.25rem;
            border-radius: 4px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .gate-simulator {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .week-info {
                grid-template-columns: 1fr;
            }

            .section {
                padding: 1rem;
            }

            .accessibility-controls {
                position: relative;
                right: auto;
                top: auto;
                background: #f8f9fa;
                color: #333;
                margin-bottom: 1rem;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        .tab-navigation {
            display: flex;
            border-bottom: 2px solid #ddd;
            margin-bottom: 1rem;
        }

        .tab-button {
            padding: 1rem 2rem;
            border: none;
            background: #f8f9fa;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab-button.active {
            background: white;
            border-bottom-color: #3498db;
            color: #3498db;
            font-weight: bold;
        }

        .tab-button:hover {
            background: #e9ecef;
        }

        .tab-button:focus {
            outline: 3px solid #74c0fc;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <div class="accessibility-controls" role="region" aria-label="Accessibility controls">
        <h3>Accessibility Options</h3>
        <button onclick="changeFontSize('increase')" aria-label="Increase font size">A+</button>
        <button onclick="changeFontSize('decrease')" aria-label="Decrease font size">A-</button>
        <button onclick="toggleHighContrast()" aria-label="Toggle high contrast">High Contrast</button>
        <button onclick="pauseAllAnimations()" aria-label="Pause animations">Pause Animations</button>
    </div>

    <div class="container">
        <header>
            <h1>Week 2: Boolean Logic and Digital Gates</h1>
            <p>Interactive Learning Experience - CSC210</p>
            <div class="week-info">
                <div class="info-card">
                    <h3>Time Commitment</h3>
                    <p>9 hours total</p>
                </div>
                <div class="info-card">
                    <h3>Focus Areas</h3>
                    <p>Boolean Algebra & Logic Gates</p>
                </div>
                <div class="info-card">
                    <h3>Prerequisites</h3>
                    <p>Week 1: Number Systems</p>
                </div>
                <div class="info-card">
                    <h3>Tools Used</h3>
                    <p>Interactive Simulators</p>
                </div>
            </div>
        </header>

        <section class="section">
            <h2>Binary Addition and Subtraction Review</h2>
            <div class="interactive-panel">
                <p><strong>Before diving into Boolean logic and gates, let's review binary arithmetic</strong> - the foundation that makes digital computation possible. Understanding how binary addition works, especially the concept of "carry," is crucial for grasping how computers perform calculations.</p>
                
                <h3>Binary Addition: The Basics</h3>
                <p>Binary addition follows the same principles as decimal addition, but with only two digits (0 and 1). Just like in decimal arithmetic, we add column by column from right to left, and when the sum exceeds the largest digit in our system, we "carry" to the next column.</p>
                
                <h4>Understanding Carry in Binary vs. Decimal</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 1.5rem 0;">
                    <div style="background: #f0f8ff; padding: 1rem; border-radius: 8px;">
                        <h5 style="color: #2c3e50; margin-top: 0;">Decimal Addition (Base 10)</h5>
                        <div style="font-family: monospace; font-size: 1.1rem; text-align: center;">
                            <div>  47</div>
                            <div>+ 58</div>
                            <div>---</div>
                            <div>105</div>
                        </div>
                        <p><small>When 7 + 8 = 15, we write 5 and carry 1 because 15 ‚â• 10 (our base).</small></p>
                    </div>
                    
                    <div style="background: #e8f5e8; padding: 1rem; border-radius: 8px;">
                        <h5 style="color: #2c3e50; margin-top: 0;">Binary Addition (Base 2)</h5>
                        <div style="font-family: monospace; font-size: 1.1rem; text-align: center;">
                            <div>  1011</div>
                            <div>+ 1110</div>
                            <div>-----</div>
                            <div>11001</div>
                        </div>
                        <p><small>When 1 + 1 = 2, we write 0 and carry 1 because 2 ‚â• 2 (our base).</small></p>
                    </div>
                </div>
                
                <div class="warning-box">
                    <h3>Key Insight: Carry Generation</h3>
                    <p>In binary, a carry is generated whenever we add two 1s. This is because 1 + 1 = 10 in binary (which equals 2 in decimal), so we place 0 in the current column and carry 1 to the next column to the left.</p>
                </div>
                
                <h3>Interactive Binary Addition Calculator</h3>
                <div style="background: white; border: 2px solid #3498db; border-radius: 8px; padding: 1.5rem;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 1rem;">
                        <div>
                            <label for="binNum1" style="font-weight: bold;">First Binary Number:</label>
                            <input type="text" id="binNum1" placeholder="e.g., 1011" 
                                   style="width: 100%; padding: 0.5rem; font-family: monospace; font-size: 1.1rem; border: 1px solid #ddd; border-radius: 4px;"
                                   pattern="[01]*" title="Enter only 0s and 1s">
                        </div>
                        <div>
                            <label for="binNum2" style="font-weight: bold;">Second Binary Number:</label>
                            <input type="text" id="binNum2" placeholder="e.g., 1110" 
                                   style="width: 100%; padding: 0.5rem; font-family: monospace; font-size: 1.1rem; border: 1px solid #ddd; border-radius: 4px;"
                                   pattern="[01]*" title="Enter only 0s and 1s">
                        </div>
                    </div>
                    <div style="text-align: center; margin: 1rem 0;">
                        <button onclick="calculateBinaryAddition()" class="button" aria-describedby="calc-help">Calculate Addition</button>
                        <span id="calc-help" class="sr-only">Calculate the binary addition with detailed step-by-step breakdown</span>
                    </div>
                    <div id="binaryResult" style="background: #f8f9fa; padding: 1rem; border-radius: 4px; margin-top: 1rem; min-height: 50px;" aria-live="polite">
                        <p>Enter two binary numbers above and click "Calculate Addition" to see the step-by-step process including carry generation.</p>
                    </div>
                </div>
                
                <h3>Two's Complement: Representing Negative Numbers</h3>
                <p>Computers use <strong>two's complement</strong> to represent negative numbers. This system allows both positive and negative numbers to be added using the same binary addition circuitry.</p>
                
                <div style="background: #fff3cd; border: 2px solid #ffc107; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                    <h4 style="color: #856404; margin-top: 0;">Two's Complement Process:</h4>
                    <ol>
                        <li><strong>Find the one's complement:</strong> Flip all bits (0 becomes 1, 1 becomes 0)</li>
                        <li><strong>Add 1:</strong> Add 1 to the one's complement result</li>
                    </ol>
                    <p><strong>Example:</strong> To find -5 in 8-bit two's complement:</p>
                    <div style="font-family: monospace; background: white; padding: 0.5rem; border-radius: 4px;">
                        +5 in binary: 00000101<br>
                        One's complement: 11111010<br>
                        Add 1: 11111010 + 1 = 11111011<br>
                        <strong>So -5 = 11111011</strong>
                    </div>
                </div>
                
                <h3>Interactive Two's Complement Converter</h3>
                <div style="background: white; border: 2px solid #28a745; border-radius: 8px; padding: 1.5rem;">
                    <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem; align-items: center; margin-bottom: 1rem;">
                        <div>
                            <label for="decimalInput" style="font-weight: bold;">Decimal Number:</label>
                            <input type="number" id="decimalInput" placeholder="e.g., -5" 
                                   min="-128" max="127"
                                   style="width: 100%; padding: 0.5rem; font-size: 1.1rem; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <button onclick="convertToTwosComplement()" class="button" style="margin-top: 1.5rem;">Convert</button>
                        <div>
                            <label style="font-weight: bold;">8-bit Two's Complement:</label>
                            <div id="twosComplementResult" 
                                 style="background: #f8f9fa; padding: 0.5rem; font-family: monospace; font-size: 1.2rem; border: 1px solid #ddd; border-radius: 4px; min-height: 40px; display: flex; align-items: center;">
                                Enter a number (-128 to 127)
                            </div>
                        </div>
                    </div>
                    <div id="conversionSteps" style="background: #f8f9fa; padding: 1rem; border-radius: 4px; margin-top: 1rem; min-height: 50px;" aria-live="polite">
                        <p>Enter a decimal number to see the step-by-step two's complement conversion.</p>
                    </div>
                </div>
                
                <h3>Binary Subtraction Using Two's Complement</h3>
                <p>The brilliant insight of two's complement is that <strong>subtraction becomes addition</strong>. Instead of A - B, we calculate A + (-B), where -B is the two's complement of B.</p>
                
                <div style="background: #e8f5e8; border: 2px solid #28a745; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                    <h4 style="color: #155724; margin-top: 0;">Subtraction Algorithm:</h4>
                    <ol>
                        <li>Convert the number being subtracted to two's complement (making it negative)</li>
                        <li>Add the two numbers using regular binary addition</li>
                        <li>If there's a carry out of the most significant bit, discard it</li>
                        <li>The result is your answer</li>
                    </ol>
                </div>
                
                <h3>Interactive Binary Subtraction Calculator</h3>
                <div style="background: white; border: 2px solid #dc3545; border-radius: 8px; padding: 1.5rem;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 1rem;">
                        <div>
                            <label for="minuend" style="font-weight: bold;">Minuend (A):</label>
                            <input type="number" id="minuend" placeholder="e.g., 12" 
                                   min="-128" max="127"
                                   style="width: 100%; padding: 0.5rem; font-size: 1.1rem; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div>
                            <label for="subtrahend" style="font-weight: bold;">Subtrahend (B):</label>
                            <input type="number" id="subtrahend" placeholder="e.g., 5" 
                                   min="-128" max="127"
                                   style="width: 100%; padding: 0.5rem; font-size: 1.1rem; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                    </div>
                    <div style="text-align: center; margin: 1rem 0;">
                        <button onclick="calculateBinarySubtraction()" class="button">Calculate A - B</button>
                    </div>
                    <div id="subtractionResult" style="background: #f8f9fa; padding: 1rem; border-radius: 4px; margin-top: 1rem; min-height: 50px;" aria-live="polite">
                        <p>Enter two decimal numbers to see how subtraction works using two's complement addition.</p>
                    </div>
                </div>
                
                <h3>Why This Matters for Digital Logic</h3>
                <div class="success-box">
                    <h3>Connection to Logic Gates</h3>
                    <p>Understanding binary addition and carry generation is essential because:</p>
                    <ul>
                        <li><strong>ALU Design:</strong> Arithmetic Logic Units use the same gates you'll study to perform addition</li>
                        <li><strong>Carry Logic:</strong> XOR gates generate sum bits, AND gates generate carry bits</li>
                        <li><strong>Two's Complement:</strong> Enables subtraction using only addition circuitry</li>
                        <li><strong>Computer Architecture:</strong> All arithmetic in processors relies on these principles</li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Week 2 Introduction Video</h2>
            <div class="interactive-panel">
                <h3>Week 2 Overview: Boolean Logic and Digital Gates</h3>
                <p>Watch this introduction video to get an overview of the key concepts you'll explore in this interactive module.</p>
                
                <div style="position: relative; width: 100%; height: 0; padding-bottom: 56.25%; background-color: #000; border-radius: 8px; margin: 1rem 0;">
                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">‚ñ∂Ô∏è</div>
                        <div style="font-size: 1.2rem; font-weight: bold;">YouTube Video Placeholder</div>
                        <div style="font-size: 1rem; opacity: 0.8; margin-top: 0.5rem;">Week 2 Introduction - Boolean Logic & Digital Gates</div>
                        <div style="font-size: 0.9rem; opacity: 0.6; margin-top: 0.5rem;">[Embed YouTube video here]</div>
                    </div>
                </div>
                
                <details style="margin-top: 1.5rem;">
                    <summary style="font-weight: bold; cursor: pointer; padding: 0.5rem; background: #f8f9fa; border-radius: 4px; border: 1px solid #ddd;">
                        üìÑ Video Transcript (Click to expand)
                    </summary>
                    <div style="padding: 1rem; background: white; border: 1px solid #ddd; border-top: none; border-radius: 0 0 4px 4px; margin-top: -1px;">
                        <p><strong>[Transcript will be inserted here]</strong></p>
                        <p><em>This transcript will provide a complete written version of the video content for accessibility and reference purposes. Students can follow along with the spoken content or review key points after watching.</em></p>
                        
                        <h4>Key Topics Covered:</h4>
                        <ul>
                            <li>Introduction to Boolean algebra fundamentals</li>
                            <li>Overview of the three basic operations: AND, OR, NOT</li>
                            <li>Connection between Boolean logic and physical gates</li>
                            <li>Preview of universal gates (NAND, NOR)</li>
                            <li>How this week builds toward CPU design concepts</li>
                            <li>Navigation guide for the interactive learning modules</li>
                        </ul>
                        
                        <p><strong>Note:</strong> This transcript includes time stamps and speaker identification for enhanced accessibility compliance.</p>
                    </div>
                </details>
            </div>
        </section>

        <section class="section">
            <h2>Learning Objectives</h2>
            <div class="objectives-grid">
                <div class="objective">
                    <strong>Apply Boolean Algebra:</strong> Use Boolean algebra rules to simplify logical expressions and understand their mathematical foundation.
                </div>
                <div class="objective">
                    <strong>Construct Truth Tables:</strong> Create systematic truth tables for any Boolean expression to analyze all possible outcomes.
                </div>
                <div class="objective">
                    <strong>Understand Logic Gates:</strong> Explain the function of basic logic gates and their role in digital circuits.
                </div>
                <div class="objective">
                    <strong>Convert Between Representations:</strong> Transform between Boolean expressions, truth tables, and gate diagrams fluidly.
                </div>
                <div class="objective">
                    <strong>Design Circuits:</strong> Create simple combinational circuits to solve logical problems effectively.
                </div>
                <div class="objective">
                    <strong>Recognize Patterns:</strong> Identify how gates combine to perform arithmetic and complex operations.
                </div>
            </div>

            <div class="progress-tracker">
                <h3>Learning Progress</h3>
                <div class="progress-bar" role="progressbar" aria-label="Learning progress" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p id="progressText">Complete the interactive sections to track your progress!</p>
            </div>
        </section>

        <section class="section">
            <h2>Interactive Gate Simulator</h2>
            <div class="interactive-panel">
                <p><strong>Experiment with logic gates!</strong> Click the input switches to change their states (Red = 0/OFF, Green = 1/ON) and observe how different gates respond.</p>
                
                <div class="gate-selector">
                    <button class="gate-btn active" onclick="selectGate('AND')" data-gate="AND">AND Gate</button>
                    <button class="gate-btn" onclick="selectGate('OR')" data-gate="OR">OR Gate</button>
                    <button class="gate-btn" onclick="selectGate('NOT')" data-gate="NOT">NOT Gate</button>
                    <button class="gate-btn" onclick="selectGate('NAND')" data-gate="NAND">NAND Gate</button>
                    <button class="gate-btn" onclick="selectGate('NOR')" data-gate="NOR">NOR Gate</button>
                    <button class="gate-btn" onclick="selectGate('XOR')" data-gate="XOR">XOR Gate</button>
                </div>

                <div class="gate-simulator">
                    <div class="inputs-section">
                        <h3>Inputs</h3>
                        <div>
                            <button class="input-switch" id="inputA" onclick="toggleInput('A')" aria-label="Input A, currently OFF">
                                A: 0
                            </button>
                        </div>
                        <div id="inputBContainer">
                            <button class="input-switch" id="inputB" onclick="toggleInput('B')" aria-label="Input B, currently OFF">
                                B: 0
                            </button>
                        </div>
                    </div>

                    <div class="gate-display">
                        <div id="gateName">AND Gate</div>
                        <div id="gate-svg-container" aria-live="polite" role="img" aria-label="Interactive logic gate diagram with animated wires">
                            <!-- SVG diagram will be inserted here -->
                        </div>
                        <div id="gateDescription">Output is 1 only when ALL inputs are 1</div>
                    </div>

                    <div class="outputs-section">
                        <h3>Output</h3>
                        <div>
                            <div class="output-light" id="output" aria-label="Output, currently OFF">
                                Y: 0
                            </div>
                        </div>
                    </div>
                </div>

                <div>
                    <h3>Truth Table for <span id="currentGate">AND</span> Gate</h3>
                    <table class="truth-table" id="truthTable" role="table" aria-label="Truth table for current gate">
                        <thead>
                            <tr>
                                <th>A</th>
                                <th>B</th>
                                <th>Y</th>
                            </tr>
                        </thead>
                        <tbody id="truthTableBody">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Boolean Algebra Laws Reference</h2>
            <div class="laws-reference">
                <div class="law-card">
                    <h4>Identity Laws</h4>
                    <div class="formula">A ¬∑ 1 = A</div>
                    <div class="formula">A + 0 = A</div>
                </div>
                <div class="law-card">
                    <h4>Null Laws</h4>
                    <div class="formula">A ¬∑ 0 = 0</div>
                    <div class="formula">A + 1 = 1</div>
                </div>
                <div class="law-card">
                    <h4>Complement Laws</h4>
                    <div class="formula">A ¬∑ <span style="text-decoration: overline;">A</span> = 0</div>
                    <div class="formula">A + <span style="text-decoration: overline;">A</span> = 1</div>
                </div>
                <div class="law-card">
                    <h4>Commutative Laws</h4>
                    <div class="formula">A ¬∑ B = B ¬∑ A</div>
                    <div class="formula">A + B = B + A</div>
                </div>
                <div class="law-card">
                    <h4>Associative Laws</h4>
                    <div class="formula">(A ¬∑ B) ¬∑ C = A ¬∑ (B ¬∑ C)</div>
                    <div class="formula">(A + B) + C = A + (B + C)</div>
                </div>
                <div class="law-card">
                    <h4>De Morgan's Laws</h4>
                    <div class="formula">NOT(A ¬∑ B) = <span style="text-decoration: overline;">A</span> + <span style="text-decoration: overline;">B</span></div>
                    <div class="formula">NOT(A + B) = <span style="text-decoration: overline;">A</span> ¬∑ <span style="text-decoration: overline;">B</span></div>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Boolean Expression Playground</h2>
            <div class="boolean-playground">
                <p><strong>Practice Boolean algebra!</strong> Enter expressions using A, B, C as variables. Use * for AND, + for OR, and ! for NOT.</p>
                <p><em>Examples: A*B, A+B, !A, (A+B)*C</em></p>
                
                <label for="expressionInput">Boolean Expression:</label>
                <input type="text" id="expressionInput" class="expression-input" 
                       placeholder="Enter expression like: A*B+C" 
                       aria-describedby="expressionHelp">
                <div id="expressionHelp" class="sr-only">Enter Boolean expressions using A, B, C as variables, * for AND, + for OR, and ! for NOT</div>
                
                <div>
                    <button class="button" onclick="evaluateExpression()" aria-describedby="evaluateHelp">Generate Truth Table</button>
                    <button class="button" onclick="clearExpression()" aria-describedby="clearHelp">Clear</button>
                    <span id="evaluateHelp" class="sr-only">Generate truth table for the entered expression</span>
                    <span id="clearHelp" class="sr-only">Clear the expression input</span>
                </div>

                <div class="result-display" id="expressionResult" aria-live="polite" aria-label="Expression evaluation results">
                    Enter a Boolean expression above and click "Generate Truth Table" to see the results.
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Interactive Practice Problems</h2>
            
            <div class="tab-navigation" role="tablist" aria-label="Practice problem categories">
                <button class="tab-button active" role="tab" aria-selected="true" aria-controls="quiz1" id="tab1" onclick="showTab('quiz1', 'tab1')">Gate Recognition</button>
                <button class="tab-button" role="tab" aria-selected="false" aria-controls="quiz2" id="tab2" onclick="showTab('quiz2', 'tab2')">Truth Tables</button>
                <button class="tab-button" role="tab" aria-selected="false" aria-controls="quiz3" id="tab3" onclick="showTab('quiz3', 'tab3')">Boolean Laws</button>
            </div>

            <div id="quiz1" class="tab-panel active" role="tabpanel" aria-labelledby="tab1">
                <div class="quiz-question">
                    <h3>Question 1: Gate Recognition</h3>
                    <p>Which gate produces output 1 only when exactly one input is 1?</p>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button" aria-describedby="q1opt1">
                            AND Gate
                            <span id="q1opt1" class="sr-only">Option: AND Gate</span>
                        </div>
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button" aria-describedby="q1opt2">
                            OR Gate
                            <span id="q1opt2" class="sr-only">Option: OR Gate</span>
                        </div>
                        <div class="quiz-option" onclick="selectAnswer(this, true)" tabindex="0" role="button" aria-describedby="q1opt3">
                            XOR Gate
                            <span id="q1opt3" class="sr-only">Option: XOR Gate</span>
                        </div>
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button" aria-describedby="q1opt4">
                            NAND Gate
                            <span id="q1opt4" class="sr-only">Option: NAND Gate</span>
                        </div>
                    </div>
                    <div id="quiz1feedback" class="result-display" aria-live="polite"></div>
                </div>
            </div>

            <div id="quiz2" class="tab-panel" role="tabpanel" aria-labelledby="tab2">
                <div class="quiz-question">
                    <h3>Question 2: Truth Table Completion</h3>
                    <p>For the expression A ¬∑ B + ƒÄ, what is the output when A=0 and B=1?</p>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button">0</div>
                        <div class="quiz-option" onclick="selectAnswer(this, true)" tabindex="0" role="button">1</div>
                    </div>
                    <div id="quiz2feedback" class="result-display" aria-live="polite"></div>
                </div>
            </div>

            <div id="quiz3" class="tab-panel" role="tabpanel" aria-labelledby="tab3">
                <div class="quiz-question">
                    <h3>Question 3: De Morgan's Law</h3>
                    <p>According to De Morgan's Law, NOT(A + B) is equivalent to:</p>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button">ƒÄ + BÃÑ</div>
                        <div class="quiz-option" onclick="selectAnswer(this, true)" tabindex="0" role="button">ƒÄ ¬∑ BÃÑ</div>
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button">A ¬∑ B</div>
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button">A + B</div>
                    </div>
                    <div id="quiz3feedback" class="result-display" aria-live="polite"></div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Global state
        let currentGateType = 'AND';
        let inputStates = { A: false, B: false };
        let completedSections = new Set();
        let fontSize = 16;
        let highContrast = false;
        let animationsPaused = false;

        // Gate definitions with exact SVG diagrams from the attached file
        const gates = {
            AND: {
                symbol: '&',
                name: 'AND Gate',
                description: 'Output is 1 only when ALL inputs are 1',
                inputs: 2,
                truthTable: [
                    [0, 0, 0],
                    [0, 1, 0],
                    [1, 0, 0],
                    [1, 1, 1]
                ],
                evaluate: (a, b) => a && b,
                svg: `<svg class="gate-svg" viewBox="0 0 200 100"><path class="gate-body" d="M50,10 H100 A40,40 0 0 1 100,90 H50 Z"></path><line class="wire" id="gWireA" x1="0" y1="30" x2="50" y2="30"/><line class="wire" id="gWireB" x1="0" y1="70" x2="50" y2="70"/><line class="wire" id="gWireOut" x1="140" y1="50" x2="200" y2="50"/><text x="15" y="25">A</text><text x="15" y="65">B</text><text id="gOutText" x="180" y="45">0</text></svg>`
            },
            OR: {
                symbol: '‚â•1',
                name: 'OR Gate',
                description: 'Output is 1 when at least ONE input is 1',
                inputs: 2,
                truthTable: [
                    [0, 0, 0],
                    [0, 1, 1],
                    [1, 0, 1],
                    [1, 1, 1]
                ],
                evaluate: (a, b) => a || b,
                svg: `<svg class="gate-svg" viewBox="0 0 200 100"><path class="gate-body" d="M25,10 Q70,50 25,90 H50 Q120,50 50,10 Z"></path><line class="wire" id="gWireA" x1="0" y1="30" x2="35" y2="30"/><line class="wire" id="gWireB" x1="0" y1="70" x2="35" y2="70"/><line class="wire" id="gWireOut" x1="105" y1="50" x2="200" y2="50"/><text x="15" y="25">A</text><text x="15" y="65">B</text><text id="gOutText" x="180" y="45">0</text></svg>`
            },
            NOT: {
                symbol: '¬¨',
                name: 'NOT Gate',
                description: 'Output is the INVERSE of the input',
                inputs: 1,
                truthTable: [
                    [0, 1],
                    [1, 0]
                ],
                evaluate: (a) => !a,
                svg: `<svg class="gate-svg" viewBox="0 0 200 100"><path class="gate-body" d="M50,10 L100,50 L50,90 Z"></path><circle class="gate-body" cx="110" cy="50" r="10"></circle><line class="wire" id="gWireA" x1="0" y1="50" x2="50" y2="50"/><line class="wire" id="gWireOut" x1="120" y1="50" x2="200" y2="50"/><text x="15" y="45">A</text><text id="gOutText" x="180" y="45">0</text></svg>`
            },
            NAND: {
                symbol: '‚äº',
                name: 'NAND Gate',
                description: 'Output is 0 only when ALL inputs are 1',
                inputs: 2,
                truthTable: [
                    [0, 0, 1],
                    [0, 1, 1],
                    [1, 0, 1],
                    [1, 1, 0]
                ],
                evaluate: (a, b) => !(a && b),
                svg: `<svg class="gate-svg" viewBox="0 0 200 100"><path class="gate-body" d="M50,10 H100 A40,40 0 0 1 100,90 H50 Z"></path><circle class="gate-body" cx="150" cy="50" r="10"></circle><line class="wire" id="gWireA" x1="0" y1="30" x2="50" y2="30"/><line class="wire" id="gWireB" x1="0" y1="70" x2="50" y2="70"/><line class="wire" id="gWireOut" x1="160" y1="50" x2="200" y2="50"/><text x="15" y="25">A</text><text x="15" y="65">B</text><text id="gOutText" x="180" y="45">0</text></svg>`
            },
            NOR: {
                symbol: '‚äΩ',
                name: 'NOR Gate',
                description: 'Output is 1 only when ALL inputs are 0',
                inputs: 2,
                truthTable: [
                    [0, 0, 1],
                    [0, 1, 0],
                    [1, 0, 0],
                    [1, 1, 0]
                ],
                evaluate: (a, b) => !(a || b),
                svg: `<svg class="gate-svg" viewBox="0 0 200 100"><path class="gate-body" d="M25,10 Q70,50 25,90 H50 Q120,50 50,10 Z"></path><circle class="gate-body" cx="115" cy="50" r="10"></circle><line class="wire" id="gWireA" x1="0" y1="30" x2="35" y2="30"/><line class="wire" id="gWireB" x1="0" y1="70" x2="35" y2="70"/><line class="wire" id="gWireOut" x1="125" y1="50" x2="200" y2="50"/><text x="15" y="25">A</text><text x="15" y="65">B</text><text id="gOutText" x="180" y="45">0</text></svg>`
            },
            XOR: {
                symbol: '‚äï',
                name: 'XOR Gate',
                description: 'Output is 1 when inputs are DIFFERENT',
                inputs: 2,
                truthTable: [
                    [0, 0, 0],
                    [0, 1, 1],
                    [1, 0, 1],
                    [1, 1, 0]
                ],
                evaluate: (a, b) => a !== b,
                svg: `<svg class="gate-svg" viewBox="0 0 200 100"><path class="gate-body" d="M35,10 Q80,50 35,90 H60 Q130,50 60,10 Z"></path><path class="gate-body" d="M25,10 Q70,50 25,90" fill="none"></path><line class="wire" id="gWireA" x1="0" y1="30" x2="30" y2="30"/><line class="wire" id="gWireB" x1="0" y1="70" x2="30" y2="70"/><line class="wire" id="gWireOut" x1="115" y1="50" x2="200" y2="50"/><text x="15" y="25">A</text><text x="15" y="65">B</text><text id="gOutText" x="180" y="45">0</text></svg>`
            }
        };

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            selectGate('AND');
            updateProgress();
            initializeInputs();
            
            // Add keyboard navigation
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    if (e.target.classList.contains('quiz-option')) {
                        e.preventDefault();
                        e.target.click();
                    }
                }
            });

            // Announce page load
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.className = 'sr-only';
            announcement.textContent = 'Interactive Boolean Logic learning page loaded. Use tab to navigate between sections and interactive elements.';
            document.body.appendChild(announcement);
            
            setTimeout(() => {
                if (document.body.contains(announcement)) {
                    document.body.removeChild(announcement);
                }
            }, 3000);
        });

        // Initialize input states
        function initializeInputs() {
            // Initialize binary calculator inputs
            const binNum1 = document.getElementById('binNum1');
            const binNum2 = document.getElementById('binNum2');
            if (binNum1) binNum1.addEventListener('input', validateBinaryInput);
            if (binNum2) binNum2.addEventListener('input', validateBinaryInput);

            // Initialize decimal inputs
            const decimalInput = document.getElementById('decimalInput');
            if (decimalInput) decimalInput.addEventListener('input', function() {
                const value = parseInt(this.value);
                if (!isNaN(value) && value >= -128 && value <= 127) {
                    convertToTwosComplement();
                }
            });
        }

        function validateBinaryInput(event) {
            const input = event.target;
            const value = input.value;
            // Remove any non-binary characters
            input.value = value.replace(/[^01]/g, '');
        }

        // Gate simulator functions
        function selectGate(gateType) {
            currentGateType = gateType;
            const gate = gates[gateType];
            
            // Update UI
            document.getElementById('gateName').textContent = gate.name;
            document.getElementById('gateDescription').textContent = gate.description;
            document.getElementById('currentGate').textContent = gateType;
            
            // Insert SVG diagram from the attached file
            const svgContainer = document.getElementById('gate-svg-container');
            svgContainer.innerHTML = gate.svg;
            
            // Update gate button states
            document.querySelectorAll('.gate-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.gate === gateType) {
                    btn.classList.add('active');
                }
            });
            
            // Handle NOT gate (single input) - hide second input container
            const inputBContainer = document.getElementById('inputBContainer');
            if (gate.inputs === 1) {
                inputBContainer.style.display = 'none';
            } else {
                inputBContainer.style.display = 'block';
            }
            
            // Reset inputs
            inputStates = { A: false, B: false };
            updateInputDisplay();
            updateOutput();
            updateTruthTable();
            updateGateVisualization();
            
            // Mark section as completed
            completedSections.add('gateSimulator');
            updateProgress();
        }

        function updateGateVisualization() {
            const gate = gates[currentGateType];
            const svgContainer = document.getElementById('gate-svg-container');
            
            if (!svgContainer.querySelector('svg')) return;
            
            // Use the same color scheme as the attached file
            const wireOnColor = '#007bff';   // Blue for ON (matches --wire-on from attached)
            const wireOffColor = '#888888';  // Gray for OFF (matches --wire-off from attached)
            
            const wireA = svgContainer.querySelector('#gWireA');
            const wireB = svgContainer.querySelector('#gWireB');
            const wireOut = svgContainer.querySelector('#gWireOut');
            const outText = svgContainer.querySelector('#gOutText');
            
            // Calculate output using the operators from the attached file
            let output;
            if (gate.inputs === 1) {
                output = inputStates.A ? 0 : 1; // NOT logic
            } else {
                const a = inputStates.A ? 1 : 0;
                const b = inputStates.B ? 1 : 0;
                
                switch(currentGateType) {
                    case 'AND':
                        output = a & b;
                        break;
                    case 'OR':
                        output = a | b;
                        break;
                    case 'NAND':
                        output = (a & b) ? 0 : 1;
                        break;
                    case 'NOR':
                        output = (a | b) ? 0 : 1;
                        break;
                    case 'XOR':
                        output = a ^ b;
                        break;
                    default:
                        output = 0;
                }
            }
            
            // Update wire colors based on input/output states
            if (wireA) {
                wireA.style.stroke = inputStates.A ? wireOnColor : wireOffColor;
            }
            
            if (wireB && gate.inputs === 2) {
                wireB.style.stroke = inputStates.B ? wireOnColor : wireOffColor;
                // Show/hide second input for NOT gate
                wireB.style.display = gate.inputs === 1 ? 'none' : 'block';
            }
            
            if (wireOut) {
                wireOut.style.stroke = output ? wireOnColor : wireOffColor;
            }
            
            if (outText) {
                outText.textContent = output;
            }
        }

        function toggleInput(input) {
            inputStates[input] = !inputStates[input];
            updateInputDisplay();
            updateOutput();
            
            // Announce state change for screen readers
            const state = inputStates[input] ? 'ON' : 'OFF';
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'assertive');
            announcement.className = 'sr-only';
            announcement.textContent = `Input ${input} changed to ${state}`;
            document.body.appendChild(announcement);
            
            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 1000);
        }

        function updateInputDisplay() {
            const inputA = document.getElementById('inputA');
            const inputB = document.getElementById('inputB');
            
            // Update input A
            inputA.textContent = `A: ${inputStates.A ? 1 : 0}`;
            inputA.className = inputStates.A ? 'input-switch on' : 'input-switch';
            inputA.setAttribute('aria-label', `Input A, currently ${inputStates.A ? 'ON' : 'OFF'}`);
            
            // Update input B (if visible)
            if (gates[currentGateType].inputs === 2) {
                inputB.textContent = `B: ${inputStates.B ? 1 : 0}`;
                inputB.className = inputStates.B ? 'input-switch on' : 'input-switch';
                inputB.setAttribute('aria-label', `Input B, currently ${inputStates.B ? 'ON' : 'OFF'}`);
            }
        }

        function updateOutput() {
            const gate = gates[currentGateType];
            let output;
            
            if (gate.inputs === 1) {
                output = gate.evaluate(inputStates.A);
            } else {
                output = gate.evaluate(inputStates.A, inputStates.B);
            }
            
            const outputElement = document.getElementById('output');
            outputElement.textContent = `Y: ${output ? 1 : 0}`;
            outputElement.className = output ? 'output-light on' : 'output-light';
            outputElement.setAttribute('aria-label', `Output, currently ${output ? 'ON' : 'OFF'}`);
            
            // Update the SVG visualization
            updateGateVisualization();
        }

        function updateTruthTable() {
            const gate = gates[currentGateType];
            const tbody = document.getElementById('truthTableBody');
            tbody.innerHTML = '';
            
            if (gate.inputs === 1) {
                // Single input truth table
                const table = document.getElementById('truthTable');
                table.querySelector('thead tr').innerHTML = '<th>A</th><th>Y</th>';
                
                gate.truthTable.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `<td>${row[0]}</td><td>${row[1]}</td>`;
                    tbody.appendChild(tr);
                });
            } else {
                // Two input truth table
                const table = document.getElementById('truthTable');
                table.querySelector('thead tr').innerHTML = '<th>A</th><th>B</th><th>Y</th>';
                
                gate.truthTable.forEach(row => {
                    const tr = document.createElement('tr');
                    tr.innerHTML = `<td>${row[0]}</td><td>${row[1]}</td><td>${row[2]}</td>`;
                    tbody.appendChild(tr);
                });
            }
        }

        // Boolean expression evaluator
        function evaluateExpression() {
            const input = document.getElementById('expressionInput').value.trim();
            const result = document.getElementById('expressionResult');
            
            if (!result) return;
            
            if (!input) {
                result.innerHTML = 'Please enter a Boolean expression.';
                return;
            }
            
            try {
                const variables = extractVariables(input);
                if (variables.length === 0) {
                    result.innerHTML = '<strong>Error:</strong> No valid variables found. Use A, B, or C as variables.';
                    return;
                }
                
                const truthTable = generateTruthTable(input, variables);
                displayTruthTable(truthTable, variables, result);
                
                completedSections.add('booleanPlayground');
                updateProgress();
            } catch (error) {
                result.innerHTML = `<strong>Error:</strong> ${error.message}<br><br>Please check your expression syntax. Use A, B, C as variables, * for AND, + for OR, and ! for NOT.`;
            }
        }

        function extractVariables(expression) {
            const matches = expression.match(/[A-C]/g);
            if (!matches) return [];
            return [...new Set(matches)].sort();
        }

        function generateTruthTable(expression, variables) {
            const numRows = Math.pow(2, variables.length);
            const table = [];
            
            for (let i = 0; i < numRows; i++) {
                const row = [];
                const values = {};
                
                // Generate input values (binary representation of i)
                for (let j = 0; j < variables.length; j++) {
                    const value = (i >> (variables.length - 1 - j)) & 1;
                    row.push(value);
                    values[variables[j]] = value === 1;
                }
                
                // Evaluate expression
                try {
                    const result = evaluateBooleanExpression(expression, values);
                    row.push(result ? 1 : 0);
                } catch (error) {
                throw new Error('Invalid expression syntax');
            }
        }

        function displayTruthTable(truthTable, variables, resultElement) {
            let html = '<h4>Truth Table Result:</h4>';
            html += '<table class="truth-table"><thead><tr>';
            
            // Headers for input variables
            variables.forEach(variable => {
                html += `<th>${variable}</th>`;
            });
            html += '<th>Result</th></tr></thead><tbody>';
            
            // Data rows
            truthTable.forEach(row => {
                html += '<tr>';
                row.forEach(value => {
                    html += `<td>${value}</td>`;
                });
                html += '</tr>';
            });
            
            html += '</tbody></table>';
            html += '<p><em>Expression evaluated successfully! Try another one.</em></p>';
            
            resultElement.innerHTML = html;
        }

        function clearExpression() {
            const inputElement = document.getElementById('expressionInput');
            const resultElement = document.getElementById('expressionResult');
            
            if (inputElement) inputElement.value = '';
            if (resultElement) {
                resultElement.innerHTML = 'Enter a Boolean expression above and click "Generate Truth Table" to see the results.';
            }
        }

        // Quiz functionality
        function selectAnswer(element, isCorrect) {
            if (!element || !element.parentElement) return;
            
            // Remove previous selections
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            // Mark the selected answer
            element.classList.add('selected');
            
            // Show feedback after a short delay
            setTimeout(() => {
                options.forEach(option => {
                    // Check if this option is the correct one by examining the onclick attribute
                    const onclickStr = option.getAttribute('onclick') || '';
                    const optionIsCorrect = onclickStr.includes('true');
                    
                    if (optionIsCorrect) {
                        option.classList.add('correct');
                    } else if (option.classList.contains('selected') && !isCorrect) {
                        option.classList.add('incorrect');
                    }
                });
                
                // Show feedback message
                const quizSection = element.closest('.tab-panel');
                if (!quizSection) return;
                
                const quizId = quizSection.id;
                const feedbackElement = document.getElementById(quizId + 'feedback');
                
                if (feedbackElement) {
                    if (isCorrect) {
                        feedbackElement.innerHTML = '<strong style="color: #28a745;">‚úì Correct!</strong> Great job understanding this concept.';
                        completedSections.add(quizId);
                    } else {
                        feedbackElement.innerHTML = '<strong style="color: #dc3545;">‚úó Not quite right.</strong> Try reviewing the gate behavior and truth tables above.';
                    }
                    
                    updateProgress();
                }
            }, 500);
        }

        // Tab functionality
        function showTab(tabId, buttonId) {
            // Hide all tab panels
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
                button.setAttribute('aria-selected', 'false');
            });
            
            // Show selected tab and activate button
            const selectedPanel = document.getElementById(tabId);
            const selectedButton = document.getElementById(buttonId);
            
            if (selectedPanel) selectedPanel.classList.add('active');
            if (selectedButton) {
                selectedButton.classList.add('active');
                selectedButton.setAttribute('aria-selected', 'true');
            }
        }d expression syntax');
                }
                
                table.push(row);
            }
            
            return table;
        }

        function evaluateBooleanExpression(expression, values) {
            // Convert Boolean expression to JavaScript-compatible format
            let jsExpression = expression
                .replace(/\*/g, '&&')           // AND
                .replace(/\+/g, '||')           // OR  
                .replace(/!/g, '!')             // NOT
                .replace(/\(/g, '(')            // Keep parentheses
                .replace(/\)/g, ')');
            
            // Replace variables with their boolean values
            for (const [variable, value] of Object.entries(values)) {
                const regex = new RegExp(`\\b${variable}\\b`, 'g');
                jsExpression = jsExpression.replace(regex, value.toString());
            }
            
            // Safely evaluate the expression
            try {
                return Function('"use strict"; return (' + jsExpression + ')')();
            } catch (error) {
                throw new Error('Cannot evaluate expression - check syntax');
            }
        }

        function displayTruthTable(truthTable, variables, resultElement) {
            let html = '<h4>Truth Table Result:</h4>';
            html += '<table class="truth-table"><thead><tr>';
            
            // Headers for input variables
            variables.forEach(variable => {
                html += `<th>${variable}</th>`;
            });
            html += '<th>Result</th></tr></thead><tbody>';
            
            // Data rows
            truthTable.forEach(row => {
                html += '<tr>';
                row.forEach(value => {
                    html += `<td>${value}</td>`;
                });
                html += '</tr>';
            });
            
            html += '</tbody></table>';
            html += '<p><em>Expression evaluated successfully! Try another one.</em></p>';
            
            resultElement.innerHTML = html;
        }

        function clearExpression() {
            const inputElement = document.getElementById('expressionInput');
            const resultElement = document.getElementById('expressionResult');
            
            if (inputElement) inputElement.value = '';
            if (resultElement) {
                resultElement.innerHTML = 'Enter a Boolean expression above and click "Generate Truth Table" to see the results.';
            }
        }d expression syntax');
            }
        }

        function displayTruthTable(truthTable, variables, resultElement) {
            let html = '<h4>Truth Table Result:</h4>';
            html += '<table class="truth-table"><thead><tr>';
            
            // Headers
            variables.forEach(variable => {
                html += `<th>${variable}</th>`;
            });
            html += '<th>Result</th></tr></thead><tbody>';
            
            // Rows
            truthTable.forEach(row => {
                html += '<tr>';
                row.forEach(value => {
                    html += `<td>${value}</td>`;
                });
                html += '</tr>';
            });
            
            html += '</tbody></table>';
            html += '<p><em>Expression evaluated successfully! Try another one.</em></p>';
            
            resultElement.innerHTML = html;
        }

        function clearExpression() {
            document.getElementById('expressionInput').value = '';
            document.getElementById('expressionResult').innerHTML = 'Enter a Boolean expression above and click "Generate Truth Table" to see the results.';
        }

        // Quiz functionality
        function selectAnswer(element, isCorrect) {
            // Remove previous selections
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(option => {
                option.classList.remove('selected', 'correct', 'incorrect');
            });
            
            // Mark the selected answer
            element.classList.add('selected');
            
            // Show feedback after a short delay
            setTimeout(() => {
                options.forEach(option => {
                    // Check if this option is the correct one by examining the onclick attribute
                    const onclickStr = option.getAttribute('onclick') || '';
                    const optionIsCorrect = onclickStr.includes('true');
                    
                    if (optionIsCorrect) {
                        option.classList.add('correct');
                    } else if (option.classList.contains('selected') && !isCorrect) {
                        option.classList.add('incorrect');
                    }
                });
                
                // Show feedback message
                const quizSection = element.closest('.tab-panel');
                if (!quizSection) return;
                
                const quizId = quizSection.id;
                const feedbackElement = document.getElementById(quizId + 'feedback');
                
                if (feedbackElement) {
                    if (isCorrect) {
                        feedbackElement.innerHTML = '<strong style="color: #28a745;">‚úì Correct!</strong> Great job understanding this concept.';
                        completedSections.add(quizId);
                    } else {
                        feedbackElement.innerHTML = '<strong style="color: #dc3545;">‚úó Not quite right.</strong> Try reviewing the gate behavior and truth tables above.';
                    }
                    
                    updateProgress();
                }
            }, 500);
        }

        // Tab functionality
        function showTab(tabId, buttonId) {
            // Hide all tab panels
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
                button.setAttribute('aria-selected', 'false');
            });
            
            // Show selected tab and activate button
            const selectedPanel = document.getElementById(tabId);
            const selectedButton = document.getElementById(buttonId);
            
            if (selectedPanel) selectedPanel.classList.add('active');
            if (selectedButton) {
                selectedButton.classList.add('active');
                selectedButton.setAttribute('aria-selected', 'true');
            }
        }

        // Progress tracking
        function updateProgress() {
            const totalSections = 5; // gateSimulator, booleanPlayground, quiz1, quiz2, quiz3
            const completed = completedSections.size;
            const percentage = (completed / totalSections) * 100;
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressFill').parentElement.setAttribute('aria-valuenow', percentage);
            
            let progressText = `Progress: ${completed}/${totalSections} sections completed`;
            if (percentage === 100) {
                progressText += ' - Excellent work! üéâ';
            }
            document.getElementById('progressText').textContent = progressText;
        }

        // Accessibility functions
        function changeFontSize(action) {
            if (action === 'increase' && fontSize < 24) {
                fontSize += 2;
            } else if (action === 'decrease' && fontSize > 12) {
                fontSize -= 2;
            }
            
            document.body.style.fontSize = fontSize + 'px';
            
            // Announce change
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.className = 'sr-only';
            announcement.textContent = `Font size changed to ${fontSize} pixels`;
            document.body.appendChild(announcement);
            
            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 2000);
        }

        function toggleHighContrast() {
            highContrast = !highContrast;
            
            if (highContrast) {
                document.body.style.filter = 'contrast(150%) brightness(1.2)';
            } else {
                document.body.style.filter = 'none';
            }
            
            // Announce change
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.className = 'sr-only';
            announcement.textContent = `High contrast ${highContrast ? 'enabled' : 'disabled'}`;
            document.body.appendChild(announcement);
            
            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 2000);
        }

        function pauseAllAnimations() {
            animationsPaused = !animationsPaused;
            
            if (animationsPaused) {
                document.body.style.animation = 'none';
                document.body.style.transition = 'none';
                const style = document.createElement('style');
                style.id = 'pause-animations';
                style.textContent = '*, *::before, *::after { animation-duration: 0.01ms !important; transition-duration: 0.01ms !important; }';
                document.head.appendChild(style);
            } else {
                document.body.style.animation = '';
                document.body.style.transition = '';
                const pauseStyle = document.getElementById('pause-animations');
                if (pauseStyle) {
                    pauseStyle.remove();
                }
            }
            
            // Announce change
            const announcement = document.createElement('div');
            announcement.setAttribute('aria-live', 'polite');
            announcement.className = 'sr-only';
            announcement.textContent = `Animations ${animationsPaused ? 'paused' : 'resumed'}`;
            document.body.appendChild(announcement);
            
            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 2000);
        }

        // Binary arithmetic functions
        function calculateBinaryAddition() {
            const num1 = document.getElementById('binNum1').value.trim();
            const num2 = document.getElementById('binNum2').value.trim();
            const resultDiv = document.getElementById('binaryResult');
            
            // Clear previous results
            if (!resultDiv) return;
            
            // Validate input
            if (!num1 || !num2) {
                resultDiv.innerHTML = '<p style="color: #dc3545;"><strong>Error:</strong> Please enter both binary numbers.</p>';
                return;
            }
            
            if (!/^[01]+$/.test(num1) || !/^[01]+$/.test(num2)) {
                resultDiv.innerHTML = '<p style="color: #dc3545;"><strong>Error:</strong> Please enter valid binary numbers (only 0s and 1s).</p>';
                return;
            }
            
            try {
                // Convert to decimal, add, convert back to binary
                const dec1 = parseInt(num1, 2);
                const dec2 = parseInt(num2, 2);
                const sum = dec1 + dec2;
                const binarySum = sum.toString(2);
                
                // Pad numbers to same length for display
                const maxLength = Math.max(num1.length, num2.length);
                const paddedNum1 = num1.padStart(maxLength, '0');
                const paddedNum2 = num2.padStart(maxLength, '0');
                
                // Display result
                let html = '<div style="font-family: monospace; font-size: 1.2rem; text-align: center; margin-bottom: 1rem;">';
                html += `<div>  ${paddedNum1}</div>`;
                html += `<div>+ ${paddedNum2}</div>`;
                html += `<div>${'-'.repeat(maxLength + 2)}</div>`;
                html += `<div>  ${binarySum}</div>`;
                html += '</div>';
                
                html += `<p><strong>Final Answer:</strong> ${paddedNum1} + ${paddedNum2} = ${binarySum}</p>`;
                html += `<p><strong>Decimal Check:</strong> ${dec1} + ${dec2} = ${sum}</p>`;
                
                resultDiv.innerHTML = html;
                
                // Mark section as completed
                completedSections.add('binaryArithmetic');
                updateProgress();
            } catch (error) {
                resultDiv.innerHTML = '<p style="color: #dc3545;"><strong>Error:</strong> Invalid binary numbers.</p>';
            }
        }
        
        function convertToTwosComplement() {
            const decimal = parseInt(document.getElementById('decimalInput').value);
            const resultDiv = document.getElementById('twosComplementResult');
            const stepsDiv = document.getElementById('conversionSteps');
            
            if (!resultDiv || !stepsDiv) return;
            
            if (isNaN(decimal)) {
                resultDiv.innerHTML = 'Please enter a valid number';
                stepsDiv.innerHTML = '<p>Enter a decimal number to see the conversion process.</p>';
                return;
            }
            
            if (decimal < -128 || decimal > 127) {
                resultDiv.innerHTML = 'Number out of 8-bit range';
                stepsDiv.innerHTML = '<p style="color: #dc3545;"><strong>Error:</strong> Please enter a number between -128 and 127 for 8-bit representation.</p>';
                return;
            }
            
            let html = '';
            
            if (decimal >= 0) {
                // Positive number - straight binary
                const binary = decimal.toString(2).padStart(8, '0');
                resultDiv.innerHTML = binary;
                
                html += `<h4>Conversion Steps for +${decimal}:</h4>`;
                html += '<div style="font-family: monospace; background: white; padding: 1rem; border-radius: 4px;">';
                html += `Positive numbers are represented directly in binary:<br>`;
                html += `${decimal} in decimal = ${binary} in 8-bit binary`;
                html += '</div>';
            } else {
                // Negative number - two's complement
                const positive = Math.abs(decimal);
                const positiveBinary = positive.toString(2).padStart(8, '0');
                
                // One's complement
                let onesComplement = '';
                for (let i = 0; i < positiveBinary.length; i++) {
                    onesComplement += positiveBinary[i] === '0' ? '1' : '0';
                }
                
                // Add 1 for two's complement
                let carry = 1;
                let twosComplement = '';
                for (let i = onesComplement.length - 1; i >= 0; i--) {
                    const sum = parseInt(onesComplement[i]) + carry;
                    twosComplement = (sum % 2) + twosComplement;
                    carry = Math.floor(sum / 2);
                }
                
                resultDiv.innerHTML = twosComplement;
                
                html += `<h4>Conversion Steps for ${decimal}:</h4>`;
                html += '<div style="font-family: monospace; background: white; padding: 1rem; border-radius: 4px;">';
                html += `<strong>Step 1:</strong> Find positive binary<br>`;
                html += `+${positive} = ${positiveBinary}<br><br>`;
                html += `<strong>Step 2:</strong> One's complement (flip bits)<br>`;
                html += `${onesComplement}<br><br>`;
                html += `<strong>Step 3:</strong> Add 1 for two's complement<br>`;
                html += `${onesComplement}<br>+ 00000001<br>`;
                html += `${'-'.repeat(8)}<br>`;
                html += `${twosComplement}<br><br>`;
                html += `<strong>Result:</strong> ${decimal} = ${twosComplement} in 8-bit two's complement`;
                html += '</div>';
            }
            
            stepsDiv.innerHTML = html;
            
            // Mark section as completed
            completedSections.add('twosComplement');
            updateProgress();
        }
        
        function calculateBinarySubtraction() {
            const minuend = parseInt(document.getElementById('minuend').value);
            const subtrahend = parseInt(document.getElementById('subtrahend').value);
            const resultDiv = document.getElementById('subtractionResult');
            
            if (!resultDiv) return;
            
            if (isNaN(minuend) || isNaN(subtrahend)) {
                resultDiv.innerHTML = '<p style="color: #dc3545;"><strong>Error:</strong> Please enter valid numbers for both fields.</p>';
                return;
            }
            
            if (minuend < -128 || minuend > 127 || subtrahend < -128 || subtrahend > 127) {
                resultDiv.innerHTML = '<p style="color: #dc3545;"><strong>Error:</strong> Please enter numbers between -128 and 127.</p>';
                return;
            }
            
            // Calculate actual result
            const actualResult = minuend - subtrahend;
            
            // Convert to binary representation
            function toBinary(num) {
                if (num >= 0) {
                    return num.toString(2).padStart(8, '0');
                } else {
                    // Two's complement
                    const positive = Math.abs(num);
                    const positiveBinary = positive.toString(2).padStart(8, '0');
                    let onesComp = positiveBinary.split('').map(bit => bit === '0' ? '1' : '0').join('');
                    
                    // Add 1
                    let carry = 1;
                    let result = '';
                    for (let i = 7; i >= 0; i--) {
                        const sum = parseInt(onesComp[i]) + carry;
                        result = (sum % 2) + result;
                        carry = Math.floor(sum / 2);
                    }
                    return result;
                }
            }
            
            const minuendBinary = toBinary(minuend);
            const subtrahendBinary = toBinary(subtrahend);
            const subtrahendNegBinary = toBinary(-subtrahend);
            
            let html = `<h4>Computing ${minuend} - ${subtrahend} using Two's Complement:</h4>`;
            html += '<div style="font-family: monospace; background: white; padding: 1rem; border-radius: 4px;">';
            html += `<strong>Step 1:</strong> Convert to binary<br>`;
            html += `A = ${minuend} ‚Üí ${minuendBinary}<br>`;
            html += `B = ${subtrahend} ‚Üí ${subtrahendBinary}<br><br>`;
            
            html += `<strong>Step 2:</strong> Find two's complement of B (to get -B)<br>`;
            html += `-B = ${subtrahendNegBinary}<br><br>`;
            
            html += `<strong>Step 3:</strong> Add A + (-B)<br>`;
            html += `  ${minuendBinary}<br>`;
            html += `+ ${subtrahendNegBinary}<br>`;
            html += `  ${'-'.repeat(8)}<br>`;
            html += `  ${toBinary(actualResult)}<br><br>`;
            
            html += `<strong>Final Answer:</strong> ${minuend} - ${subtrahend} = ${actualResult}`;
            html += '</div>';
            
            resultDiv.innerHTML = html;
            
            // Mark section as completed
            completedSections.add('binarySubtraction');
            updateProgress();
        }
            // Allow space bar to activate buttons and options
            if (e.key === ' ' && (e.target.classList.contains('input-switch') || e.target.classList.contains('quiz-option') || e.target.classList.contains('gate-btn'))) {
                e.preventDefault();
                e.target.click();
            }
            
            // Arrow key navigation for gate selector
            if (e.target.classList.contains('gate-btn') && (e.key === 'ArrowLeft' || e.key === 'ArrowRight')) {
                e.preventDefault();
                const buttons = Array.from(document.querySelectorAll('.gate-btn'));
                const currentIndex = buttons.indexOf(e.target);
                let nextIndex;
                
                if (e.key === 'ArrowRight') {
                    nextIndex = (currentIndex + 1) % buttons.length;
                } else {
                    nextIndex = (currentIndex - 1 + buttons.length) % buttons.length;
                }
                
                buttons[nextIndex].focus();
                buttons[nextIndex].click();
            }
        });

        // Add focus indicators for better accessibility
        const style = document.createElement('style');
        style.textContent = `
            .input-switch:focus, .quiz-option:focus, .gate-btn:focus {
                outline: 3px solid #74c0fc !important;
                outline-offset: 2px !important;
            }
            
            @media print {
                .accessibility-controls { display: none !important; }
                .interactive-panel { border: 2px solid #000 !important; }
                .section { page-break-inside: avoid; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
