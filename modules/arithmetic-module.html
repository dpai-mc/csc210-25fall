<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Learning Module: Digital Adders</title>
    <style>
        /* CSS Reset & Global Styles */
        :root {
            --bg-color: #ffffff;
            --text-color: #212529;
            --primary-color: #0056b3;
            --primary-hover: #004494;
            --border-color: #dee2e6;
            --card-bg: #f8f9fa;
            --wire-off-color: #adb5bd;
            --wire-on-color: #28a745;
            --gate-fill: #e9ecef;
            --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            --radius: 8px;
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.7;
            padding: 1.5rem;
        }

        /* Main Container & Layout */
        .container {
            max-width: 960px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 3rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 1rem;
        }

        h1 {
            font-size: 2.5rem;
            color: var(--primary-color);
        }
        
        h2 {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--border-color);
        }

        h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        p, ul {
            margin-bottom: 1rem;
            max-width: 75ch;
        }

        section {
            margin-bottom: 4rem;
        }

        /* Interactive Module Card */
        .interactive-module {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-top: 1.5rem;
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            align-items: center;
        }

        @media (min-width: 768px) {
            .interactive-module {
                grid-template-columns: 1fr 1fr;
            }
        }
        
        .explanation {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .diagram-container {
            min-height: 250px;
        }
        
        .simulation-svg {
            width: 100%;
            height: auto;
            font-family: var(--font-family);
        }

        /* SVG Specific Styles */
        .gate { fill: var(--gate-fill); stroke: var(--primary-color); stroke-width: 2.5; }
        .label { font-size: 14px; font-weight: bold; fill: var(--text-color); user-select: none; }
        .value { font-size: 16px; font-weight: bold; fill: var(--primary-color); }
        .wire { stroke: var(--wire-off-color); stroke-width: 3; fill: none; transition: stroke 0.2s ease; }
        .wire.on { stroke: var(--wire-on-color); stroke-width: 4; }
        .input-switch { cursor: pointer; }
        .input-switch:focus-visible { outline: 2px solid var(--primary-hover); }
        .output-light { transition: fill 0.2s ease; }
        
        /* Truth Table */
        table {
            width: 100%;
            max-width: 300px;
            border-collapse: collapse;
            text-align: center;
        }
        th, td {
            border: 1px solid var(--border-color);
            padding: 0.5rem;
        }
        thead {
            background-color: var(--primary-color);
            color: white;
        }

    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>Understanding Digital Adders</h1>
            <p>An interactive guide to the building blocks of computer arithmetic.</p>
        </header>

        <section id="half-adder">
            <h2>1. The Half-Adder: Adding Two Bits</h2>
            <div class="interactive-module">
                <div class="explanation">
                    <h3>How It Works</h3>
                    <p>A <strong>half-adder</strong> is the simplest arithmetic circuit. Its job is to add two single binary digits (bits) together.</p>
                    <p>It has two inputs, <strong>A</strong> and <strong>B</strong>, and produces two outputs:</p>
                    <ul>
                        <li><strong>Sum (S):</strong> The result of A <em>XOR</em> B.</li>
                        <li><strong>Carry (C):</strong> The result of A <em>AND</em> B.</li>
                    </ul>
                    <h4>Truth Table</h4>
                    <table>
                        <thead><tr><th>A</th><th>B</th><th>Carry</th><th>Sum</th></tr></thead>
                        <tbody>
                            <tr><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>0</td><td>1</td><td>0</td><td>1</td></tr>
                            <tr><td>1</td><td>0</td><td>0</td><td>1</td></tr>
                            <tr><td>1</td><td>1</td><td>1</td><td>0</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="diagram-container">
                    <svg id="ha-svg" class="simulation-svg" viewBox="0 0 350 250" aria-labelledby="ha-title" role="img">
                        <title id="ha-title">Half-Adder Interactive Diagram</title>
                        <path id="ha-wire-a1" class="wire" d="M 50 50 H 130" />
                        <path id="ha-wire-b1" class="wire" d="M 50 125 H 130" />
                        <path id="ha-wire-a2" class="wire" d="M 50 50 H 70 V 175 H 130" />
                        <path id="ha-wire-b2" class="wire" d="M 50 125 H 70 V 200 H 130" />
                        <path id="ha-wire-s" class="wire" d="M 230 88 H 300" />
                        <path id="ha-wire-c" class="wire" d="M 230 188 H 300" />
                        <path class="gate" d="M130,63 v50 q20,0 20,-25 q0,-25 -20,-25 m0,50 c30,0 30,-50 0,-50" />
                        <path class="gate" d="M130,163 h50 a25,25 0 0 1 0,50 h-50 z" />
                        <g id="ha-input-a" class="input-switch" tabindex="0" role="button" aria-pressed="false" aria-label="Input A">
                            <rect x="20" y="38" width="30" height="25" rx="5" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/>
                            <text class="label" x="8" y="55">A</text><text id="ha-val-a" class="value" x="32" y="56">0</text>
                        </g>
                        <g id="ha-input-b" class="input-switch" tabindex="0" role="button" aria-pressed="false" aria-label="Input B">
                            <rect x="20" y="113" width="30" height="25" rx="5" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/>
                            <text class="label" x="8" y="130">B</text><text id="ha-val-b" class="value" x="32" y="131">0</text>
                        </g>
                        <circle id="ha-light-s" class="output-light" cx="315" cy="88" r="12" fill="var(--wire-off-color)" stroke="#6c757d" stroke-width="2"/>
                        <text class="label" x="335" y="93">Sum</text><text id="ha-val-s" class="value" x="310" y="93" aria-live="polite">0</text>
                        <circle id="ha-light-c" class="output-light" cx="315" cy="188" r="12" fill="var(--wire-off-color)" stroke="#6c757d" stroke-width="2"/>
                        <text class="label" x="335" y="193">Carry</text><text id="ha-val-c" class="value" x="310" y="193" aria-live="polite">0</text>
                        <text class="label" x="160" y="50">XOR</text>
                        <text class="label" x="160" y="150">AND</text>
                    </svg>
                </div>
            </div>
        </section>

        <section id="full-adder">
            <h2>2. The Full-Adder: Including the Carry</h2>
            <div class="interactive-module">
                 <div class="explanation">
                    <h3>The Missing Piece</h3>
                    <p>A half-adder works for single bits, but what about adding larger numbers? When you add `1+1` in binary, you get `10`. The `1` must be "carried over" to the next column. A half-adder can't accept this incoming carry.</p>
                    <p>A <strong>full-adder</strong> solves this by adding a third input, <strong>Carry-In (Cin)</strong>, alongside <strong>A</strong> and <strong>B</strong>. It can be built by combining two half-adders and an OR gate.</p>
                    <h4>Truth Table</h4>
                    <table>
                        <thead><tr><th>A</th><th>B</th><th>Cin</th><th>Cout</th><th>Sum</th></tr></thead>
                        <tbody>
                            <tr><td>0</td><td>0</td><td>0</td><td>0</td><td>0</td></tr>
                            <tr><td>0</td><td>0</td><td>1</td><td>0</td><td>1</td></tr>
                            <tr><td>0</td><td>1</td><td>0</td><td>0</td><td>1</td></tr>
                            <tr><td>0</td><td>1</td><td>1</td><td>1</td><td>0</td></tr>
                            <tr><td>1</td><td>0</td><td>0</td><td>0</td><td>1</td></tr>
                            <tr><td>1</td><td>0</td><td>1</td><td>1</td><td>0</td></tr>
                            <tr><td>1</td><td>1</td><td>0</td><td>1</td><td>0</td></tr>
                            <tr><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="diagram-container">
                    <svg id="fa-svg" class="simulation-svg" viewBox="0 0 450 300" aria-labelledby="fa-title" role="img">
                        <title id="fa-title">Full-Adder Interactive Diagram</title>
                        <path id="fa-wire-a1" class="wire" d="M50 50 h 70" />
                        <path id="fa-wire-b1" class="wire" d="M50 100 h 70" />
                        <path id="fa-wire-s1" class="wire" d="M170 75 h 40" />
                        <path id="fa-wire-c1" class="wire" d="M145 125 h 110 v 75 h 40" />
                        <path id="fa-wire-cin1" class="wire" d="M50 150 h 160" />
                        <path id="fa-wire-s1-s2" class="wire" d="M210 75 h 40" />
                        <path id="fa-wire-s2" class="wire" d="M350 113 h 50" />
                        <path id="fa-wire-c2" class="wire" d="M325 163 h 25 v -25 h 30" />
                        <path id="fa-wire-cout" class="wire" d="M360 175 h 40" />
                        <rect class="gate" x="120" y="50" width="50" height="75" rx="5" />
                        <text class="label" x="130" y="90">HA 1</text>
                        <rect class="gate" x="250" y="75" width="75" height="88" rx="5" />
                        <text class="label" x="260" y="125">HA 2</text>
                        <path class="gate" d="M320,150 a40,40 0 0 1 0,50 c15,0 15,-50 0,-50" />
                        <g id="fa-input-a" class="input-switch" tabindex="0" role="button" aria-pressed="false" aria-label="Input A"><rect x="20" y="38" width="30" height="25" rx="5" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/><text class="label" x="8" y="55">A</text><text id="fa-val-a" class="value" x="32" y="56">0</text></g>
                        <g id="fa-input-b" class="input-switch" tabindex="0" role="button" aria-pressed="false" aria-label="Input B"><rect x="20" y="88" width="30" height="25" rx="5" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/><text class="label" x="8" y="105">B</text><text id="fa-val-b" class="value" x="32" y="106">0</text></g>
                        <g id="fa-input-cin" class="input-switch" tabindex="0" role="button" aria-pressed="false" aria-label="Input Carry In"><rect x="20" y="138" width="30" height="25" rx="5" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/><text class="label" x="-2" y="155">Cin</text><text id="fa-val-cin" class="value" x="32" y="156">0</text></g>
                        <circle id="fa-light-s" class="output-light" cx="415" cy="113" r="12" fill="var(--wire-off-color)" stroke="#6c757d" stroke-width="2"/><text class="label" x="435" y="118">Sum</text><text id="fa-val-s" class="value" x="410" y="118" aria-live="polite">0</text>
                        <circle id="fa-light-cout" class="output-light" cx="415" cy="175" r="12" fill="var(--wire-off-color)" stroke="#6c757d" stroke-width="2"/><text class="label" x="435" y="180">Cout</text><text id="fa-val-cout" class="value" x="410" y="180" aria-live="polite">0</text>
                    </svg>
                </div>
            </div>
        </section>

        <section id="ripple-adder">
            <h2>3. The 4-Bit Ripple-Carry Adder</h2>
             <div class="interactive-module">
                <div class="explanation">
                    <h3>Adding Multiple Bits</h3>
                    <p>To add numbers with more than one bit (e.g., `1011` + `0010`), we chain full-adders together. This creates a <strong>Ripple-Carry Adder</strong>.</p>
                    <p>The <strong>Carry-Out (Cout)</strong> from one full-adder becomes the <strong>Carry-In (Cin)</strong> for the next one in the chain. This "ripples" the carry bit from the least significant bit (right) to the most significant bit (left).</p>
                    <p>In this 4-bit adder, we add two numbers: <strong>A (A3 A2 A1 A0)</strong> and <strong>B (B3 B2 B1 B0)</strong>.</p>
                </div>
                <div class="diagram-container">
                     <svg id="rca-svg" class="simulation-svg" viewBox="0 0 500 320" aria-labelledby="rca-title" role="img">
                         <title id="rca-title">4-Bit Ripple-Carry Adder Interactive Diagram</title>
                         <g id="rca-fa0"><rect class="gate" x="370" y="100" width="60" height="100" rx="5"/><text class="label" x="380" y="155">FA 0</text></g>
                         <g id="rca-fa1"><rect class="gate" x="270" y="100" width="60" height="100" rx="5"/><text class="label" x="280" y="155">FA 1</text></g>
                         <g id="rca-fa2"><rect class="gate" x="170" y="100" width="60" height="100" rx="5"/><text class="label" x="180" y="155">FA 2</text></g>
                         <g id="rca-fa3"><rect class="gate" x="70" y="100" width="60" height="100" rx="5"/><text class="label" x="80" y="155">FA 3</text></g>
                         <path id="rca-wire-c0" class="wire" d="M370 150 h-40 v-25 h-30"/>
                         <path id="rca-wire-c1" class="wire" d="M270 150 h-40 v-25 h-30"/>
                         <path id="rca-wire-c2" class="wire" d="M170 150 h-40 v-25 h-30"/>
                         <path id="rca-wire-c3" class="wire" d="M70 150 h-20"/>
                         <path class="wire" d="M400 60 v 40"/><g id="rca-input-a0" class="input-switch" tabindex="0" role="button" aria-pressed="false" aria-label="Input A0"><rect x="385" y="30" width="30" height="30" rx="5" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/><text class="label" x="390" y="20">A0</text><text id="rca-val-a0" class="value" x="397" y="51">0</text></g>
                         <path class="wire" d="M300 60 v 40"/><g id="rca-input-a1" class="input-switch" tabindex="0" role="button" aria-pressed="false" aria-label="Input A1"><rect x="285" y="30" width="30" height="30" rx="5" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/><text class="label" x="290" y="20">A1</text><text id="rca-val-a1" class="value" x="297" y="51">0</text></g>
                         <path class="wire" d="M200 60 v 40"/><g id="rca-input-a2" class="input-switch" tabindex="0" role="button" aria-pressed="false" aria-label="Input A2"><rect x="185" y="30" width="30" height="30" rx="5" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/><text class="label" x="190" y="20">A2</text><text id="rca-val-a2" class="value" x="197" y="51">0</text></g>
                         <path class="wire" d="M100 60 v 40"/><g id="rca-input-a3" class="input-switch" tabindex="0" role="button" aria-pressed="false" aria-label="Input A3"><rect x="85" y="30" width="30" height="30" rx="5" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/><text class="label" x="90" y="20">A3</text><text id="rca-val-a3" class="value" x="97" y="51">0</text></g>
                         <path class="wire" d="M400 240 v-40"/><g id="rca-input-b0" class="input-switch" tabindex="0" role="button" aria-pressed="false" aria-label="Input B0"><rect x="385" y="240" width="30" height="30" rx="5" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/><text class="label" x="390" y="285">B0</text><text id="rca-val-b0" class="value" x="397" y="261">0</text></g>
                         <path class="wire" d="M300 240 v-40"/><g id="rca-input-b1" class="input-switch" tabindex="0" role="button" aria-pressed="false" aria-label="Input B1"><rect x="285" y="240" width="30" height="30" rx="5" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/><text class="label" x="290" y="285">B1</text><text id="rca-val-b1" class="value" x="297" y="261">0</text></g>
                         <path class="wire" d="M200 240 v-40"/><g id="rca-input-b2" class="input-switch" tabindex="0" role="button" aria-pressed="false" aria-label="Input B2"><rect x="185" y="240" width="30" height="30" rx="5" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/><text class="label" x="190" y="285">B2</text><text id="rca-val-b2" class="value" x="197" y="261">0</text></g>
                         <path class="wire" d="M100 240 v-40"/><g id="rca-input-b3" class="input-switch" tabindex="0" role="button" aria-pressed="false" aria-label="Input B3"><rect x="85" y="240" width="30" height="30" rx="5" fill="#e9ecef" stroke="#6c757d" stroke-width="2"/><text class="label" x="90" y="285">B3</text><text id="rca-val-b3" class="value" x="97" y="261">0</text></g>
                         <path id="rca-wire-s0" class="wire" d="M400 200 v 10"/><circle id="rca-light-s0" class="output-light" cx="400" cy="220" r="12" fill="var(--wire-off-color)" stroke="#6c757d" stroke-width="2"/><text class="label" x="420" y="225">S0</text><text id="rca-val-s0" class="value" x="395" y="225" aria-live="polite">0</text>
                         <path id="rca-wire-s1" class="wire" d="M300 200 v 10"/><circle id="rca-light-s1" class="output-light" cx="300" cy="220" r="12" fill="var(--wire-off-color)" stroke="#6c757d" stroke-width="2"/><text class="label" x="320" y="225">S1</text><text id="rca-val-s1" class="value" x="295" y="225" aria-live="polite">0</text>
                         <path id="rca-wire-s2" class="wire" d="M200 200 v 10"/><circle id="rca-light-s2" class="output-light" cx="200" cy="220" r="12" fill="var(--wire-off-color)" stroke="#6c757d" stroke-width="2"/><text class="label" x="220" y="225">S2</text><text id="rca-val-s2" class="value" x="195" y="225" aria-live="polite">0</text>
                         <path id="rca-wire-s3" class="wire" d="M100 200 v 10"/><circle id="rca-light-s3" class="output-light" cx="100" cy="220" r="12" fill="var(--wire-off-color)" stroke="#6c757d" stroke-width="2"/><text class="label" x="120" y="225">S3</text><text id="rca-val-s3" class="value" x="95" y="225" aria-live="polite">0</text>
                         <circle id="rca-light-c3" class="output-light" cx="35" cy="150" r="12" fill="var(--wire-off-color)" stroke="#6c757d" stroke-width="2"/><text class="label" x="10" y="130">Cout</text><text id="rca-val-c3" class="value" x="30" y="155" aria-live="polite">0</text>
                     </svg>
                </div>
            </div>
        </section>

    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- UTILITY FUNCTIONS ---
        const getEl = (id) => document.getElementById(id);
        const setClass = (id, className, condition) => getEl(id).classList.toggle(className, condition);
        const setText = (id, text) => getEl(id).textContent = text;
        const setFill = (id, color) => getEl(id).style.fill = color;

        /**
         * Generic function to handle input clicks and keyboard events for accessibility.
         * @param {HTMLElement} el - The input element.
         * @param {Function} callback - The function to call on activation.
         */
        function setupInput(el, callback) {
            const handler = (event) => {
                if (event.type === 'click' || (event.type === 'keydown' && (event.key === 'Enter' || event.key === ' '))) {
                    event.preventDefault();
                    callback();
                }
            };
            el.addEventListener('click', handler);
            el.addEventListener('keydown', handler);
        }

        // --- HALF ADDER SIMULATOR ---
        class HalfAdderSim {
            constructor() {
                this.a = 0;
                this.b = 0;
                this.elements = {
                    valA: 'ha-val-a', valB: 'ha-val-b', valS: 'ha-val-s', valC: 'ha-val-c',
                    wireA1: 'ha-wire-a1', wireA2: 'ha-wire-a2', wireB1: 'ha-wire-b1', wireB2: 'ha-wire-b2',
                    wireS: 'ha-wire-s', wireC: 'ha-wire-c',
                    lightS: 'ha-light-s', lightC: 'ha-light-c'
                };
                setupInput(getEl('ha-input-a'), () => this.toggleA());
                setupInput(getEl('ha-input-b'), () => this.toggleB());
                this.update();
            }

            toggleA() { this.a = 1 - this.a; getEl('ha-input-a').setAttribute('aria-pressed', this.a === 1); this.update(); }
            toggleB() { this.b = 1 - this.b; getEl('ha-input-b').setAttribute('aria-pressed', this.b === 1); this.update(); }

            update() {
                const sum = this.a ^ this.b;
                const carry = this.a & this.b;

                // Update text values
                setText(this.elements.valA, this.a);
                setText(this.elements.valB, this.b);
                setText(this.elements.valS, sum);
                setText(this.elements.valC, carry);

                // Update wires
                setClass(this.elements.wireA1, 'on', this.a);
                setClass(this.elements.wireA2, 'on', this.a);
                setClass(this.elements.wireB1, 'on', this.b);
                setClass(this.elements.wireB2, 'on', this.b);
                setClass(this.elements.wireS, 'on', sum);
                setClass(this.elements.wireC, 'on', carry);

                // Update lights
                setFill(this.elements.lightS, sum ? 'var(--wire-on-color)' : 'var(--wire-off-color)');
                setFill(this.elements.lightC, carry ? 'var(--wire-on-color)' : 'var(--wire-off-color)');
            }
        }
        new HalfAdderSim();


        // --- FULL ADDER SIMULATOR ---
        class FullAdderSim {
            constructor() {
                this.a = 0;
                this.b = 0;
                this.cin = 0;
                this.elements = {
                    valA: 'fa-val-a', valB: 'fa-val-b', valCin: 'fa-val-cin',
                    valS: 'fa-val-s', valCout: 'fa-val-cout',
                    wireA1: 'fa-wire-a1', wireB1: 'fa-wire-b1', wireCin1: 'fa-wire-cin1',
                    wireS1: 'fa-wire-s1', wireC1: 'fa-wire-c1', wireS1S2: 'fa-wire-s1-s2',
                    wireC2: 'fa-wire-c2', wireS2: 'fa-wire-s2', wireCout: 'fa-wire-cout',
                    lightS: 'fa-light-s', lightCout: 'fa-light-cout'
                };
                setupInput(getEl('fa-input-a'), () => this.toggle('a'));
                setupInput(getEl('fa-input-b'), () => this.toggle('b'));
                setupInput(getEl('fa-input-cin'), () => this.toggle('cin'));
                this.update();
            }

            toggle(input) {
                this[input] = 1 - this[input];
                getEl(`fa-input-${input}`).setAttribute('aria-pressed', this[input] === 1);
                this.update();
            }
            
            update() {
                // HA1
                const s1 = this.a ^ this.b;
                const c1 = this.a & this.b;
                // HA2
                const sum = s1 ^ this.cin;
                const c2 = s1 & this.cin;
                // OR Gate
                const cout = c1 | c2;

                // Update text
                setText(this.elements.valA, this.a);
                setText(this.elements.valB, this.b);
                setText(this.elements.valCin, this.cin);
                setText(this.elements.valS, sum);
                setText(this.elements.valCout, cout);

                // Update wires
                setClass(this.elements.wireA1, 'on', this.a);
                setClass(this.elements.wireB1, 'on', this.b);
                setClass(this.elements.wireCin1, 'on', this.cin);
                setClass(this.elements.wireS1, 'on', s1);
                setClass(this.elements.wireC1, 'on', c1);
                setClass(this.elements.wireS1S2, 'on', s1);
                setClass(this.elements.wireC2, 'on', c2);
                setClass(this.elements.wireS2, 'on', sum);
                setClass(this.elements.wireCout, 'on', cout);

                // Update lights
                setFill(this.elements.lightS, sum ? 'var(--wire-on-color)' : 'var(--wire-off-color)');
                setFill(this.elements.lightCout, cout ? 'var(--wire-on-color)' : 'var(--wire-off-color)');
            }
        }
        new FullAdderSim();
        
        // --- RIPPLE CARRY ADDER SIMULATOR ---
        class RippleCarryAdderSim {
            constructor() {
                this.inputs = { a: [0,0,0,0], b: [0,0,0,0] };
                for (let i = 0; i < 4; i++) {
                    setupInput(getEl(`rca-input-a${i}`), () => this.toggle('a', i));
                    setupInput(getEl(`rca-input-b${i}`), () => this.toggle('b', i));
                }
                this.update();
            }
            
            toggle(type, index) {
                this.inputs[type][index] = 1 - this.inputs[type][index];
                getEl(`rca-input-${type}${index}`).setAttribute('aria-pressed', this.inputs[type][index] === 1);
                this.update();
            }
            
            update() {
                let carry = 0;
                for (let i = 0; i < 4; i++) {
                    const a = this.inputs.a[i];
                    const b = this.inputs.b[i];
                    
                    // Full adder logic
                    const sum = a ^ b ^ carry;
                    carry = (a & b) | (carry & (a ^ b));

                    // Update UI for this bit
                    setText(`rca-val-a${i}`, a);
                    setText(`rca-val-b${i}`, b);
                    setText(`rca-val-s${i}`, sum);
                    setClass(`rca-wire-s${i}`, 'on', sum);
                    setFill(`rca-light-s${i}`, sum ? 'var(--wire-on-color)' : 'var(--wire-off-color)');
                    setClass(`rca-wire-c${i}`, 'on', carry);
                }
                
                // Final carry out
                setText(`rca-val-c3`, carry);
                setFill(`rca-light-c3`, carry ? 'var(--wire-on-color)' : 'var(--wire-off-color)');
            }
        }
        new RippleCarryAdderSim();

    });
    </script>

</body>
</html>
