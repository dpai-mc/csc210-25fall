<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSC210 Week 2: Boolean Logic and Digital Gates</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #3498db;
            --primary-dark: #2980b9;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --info-color: #17a2b8;
            --light-color: #f8f9fa;
            --dark-color: #2c3e50;
            --wire-on: #007bff;
            --wire-off: #888888;
            --border-radius: 8px;
            --box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #ffffff;
            font-size: 16px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, var(--dark-color), var(--primary-color));
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-bottom: 2rem;
            border-radius: var(--border-radius);
        }

        .week-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .info-card {
            background: rgba(255,255,255,0.1);
            padding: 1rem;
            border-radius: var(--border-radius);
            text-align: center;
        }

        .info-card h3 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        .section {
            background-color: #ffffff;
            border: 1px solid #e9ecef;
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--box-shadow);
        }

        .section h2 {
            color: var(--dark-color);
            margin-bottom: 1rem;
            font-size: 1.8rem;
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 0.5rem;
        }

        .objectives-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .objective {
            background: var(--light-color);
            padding: 1rem;
            border-left: 4px solid var(--success-color);
            border-radius: 4px;
        }

        .interactive-panel {
            background: #f0f8ff;
            border: 2px solid var(--primary-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .gate-simulator {
            display: grid;
            grid-template-columns: 1fr 200px 1fr;
            gap: 2rem;
            align-items: center;
            margin: 1rem 0;
        }

        .inputs-section, .outputs-section {
            text-align: center;
        }

        .gate-display {
            text-align: center;
            padding: 1rem;
            background: white;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
        }

        .gate-svg {
            max-width: 250px;
            height: auto;
            margin: 1rem 0;
        }

        .gate-svg .wire { 
            stroke-width: 4; 
            transition: stroke 0.3s; 
        }

        .gate-svg .gate-body { 
            fill: #f0f0f0; 
            stroke: #333; 
            stroke-width: 2; 
        }

        .gate-svg text { 
            font-family: monospace; 
            font-size: 20px; 
            font-weight: bold; 
            fill: #333;
        }

        .input-switch, .output-light {
            margin: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            min-width: 80px;
        }

        .input-switch {
            background-color: var(--danger-color);
            color: white;
        }

        .input-switch.on {
            background-color: var(--success-color);
        }

        .input-switch:focus {
            outline: 3px solid #74c0fc;
            outline-offset: 2px;
        }

        .output-light {
            background-color: #6c757d;
            color: white;
            cursor: default;
        }

        .output-light.on {
            background-color: var(--warning-color);
            color: #000;
            box-shadow: 0 0 15px var(--warning-color);
        }

        .gate-selector {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            margin: 1rem 0;
        }

        .gate-btn {
            padding: 0.5rem 1rem;
            border: 2px solid var(--primary-color);
            background: white;
            color: var(--primary-color);
            border-radius: 4px;
            cursor: pointer;
            transition: var(--transition);
        }

        .gate-btn.active {
            background: var(--primary-color);
            color: white;
        }

        .gate-btn:hover, .gate-btn:focus {
            background: var(--primary-dark);
            color: white;
            outline: 2px solid #74c0fc;
            outline-offset: 2px;
        }

        .truth-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            background: white;
        }

        .truth-table th,
        .truth-table td {
            border: 2px solid #ddd;
            padding: 0.75rem;
            text-align: center;
            font-weight: bold;
        }

        .truth-table th {
            background-color: var(--primary-color);
            color: white;
        }

        .truth-table tr:nth-child(even) {
            background-color: var(--light-color);
        }

        .boolean-playground {
            background: #e8f5e8;
            border: 2px solid var(--success-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
        }

        .expression-input {
            width: 100%;
            padding: 0.75rem;
            font-size: 1rem;
            border: 2px solid #ddd;
            border-radius: 4px;
            margin: 0.5rem 0;
            font-family: 'Courier New', monospace;
        }

        .expression-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: var(--transition);
            margin: 0.25rem;
        }

        .button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .button:focus {
            outline: 3px solid #74c0fc;
            outline-offset: 2px;
        }

        .result-display {
            background: white;
            border: 2px solid #ddd;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            min-height: 100px;
        }

        .quiz-question {
            background: #fff3cd;
            border: 2px solid var(--warning-color);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .quiz-options {
            display: grid;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .quiz-option {
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            transition: var(--transition);
        }

        .quiz-option:hover, .quiz-option:focus {
            background: var(--light-color);
            border-color: var(--primary-color);
            outline: none;
        }

        .quiz-option.selected {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-dark);
        }

        .quiz-option.correct {
            background: var(--success-color);
            color: white;
            border-color: #1e7e34;
        }

        .quiz-option.incorrect {
            background: var(--danger-color);
            color: white;
            border-color: #c82333;
        }

        .progress-tracker {
            background: var(--light-color);
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            padding: 1rem;
            margin: 1rem 0;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success-color), #20c997);
            width: 0%;
            transition: width 0.5s ease;
        }

        .laws-reference {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }

        .law-card {
            background: var(--light-color);
            border: 2px solid #6c757d;
            border-radius: var(--border-radius);
            padding: 1rem;
        }

        .law-card h4 {
            color: var(--dark-color);
            margin-bottom: 0.5rem;
        }

        .formula {
            font-family: 'Courier New', monospace;
            background: white;
            padding: 0.5rem;
            border-radius: 4px;
            border: 1px solid #ddd;
            margin: 0.25rem 0;
        }

        .accessibility-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 1rem;
            border-radius: var(--border-radius);
            z-index: 1000;
        }

        .accessibility-controls button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem;
            margin: 0.25rem;
            border-radius: 4px;
            cursor: pointer;
        }

        .accessibility-controls button:focus {
            outline: 2px solid white;
            outline-offset: 2px;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        .tab-navigation {
            display: flex;
            border-bottom: 2px solid #ddd;
            margin-bottom: 1rem;
            overflow-x: auto;
        }

        .tab-button {
            padding: 1rem 2rem;
            border: none;
            background: var(--light-color);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: var(--transition);
            white-space: nowrap;
        }

        .tab-button.active {
            background: white;
            border-bottom-color: var(--primary-color);
            color: var(--primary-color);
            font-weight: bold;
        }

        .tab-button:hover {
            background: #e9ecef;
        }

        .tab-button:focus {
            outline: 3px solid #74c0fc;
            outline-offset: 2px;
        }

        .warning-box, .success-box {
            padding: 1rem;
            border-radius: var(--border-radius);
            margin: 1rem 0;
        }

        .warning-box {
            background: #fff3cd;
            border: 2px solid var(--warning-color);
            color: #856404;
        }

        .success-box {
            background: #d4edda;
            border: 2px solid var(--success-color);
            color: #155724;
        }

        /* High Contrast Mode */
        .high-contrast {
            filter: contrast(150%) brightness(1.2);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .gate-simulator {
                grid-template-columns: 1fr;
                gap: 1rem;
                text-align: center;
            }

            .gate-display {
                order: -1;
                margin-bottom: 1rem;
            }

            .week-info {
                grid-template-columns: 1fr;
            }

            .section {
                padding: 1rem;
            }

            .accessibility-controls {
                position: relative;
                right: auto;
                top: auto;
                background: var(--light-color);
                color: #333;
                margin-bottom: 1rem;
            }

            .gate-selector {
                justify-content: center;
                flex-direction: column;
                align-items: center;
            }

            .gate-btn {
                font-size: 0.9rem;
                padding: 0.4rem 0.8rem;
                width: 100%;
                max-width: 200px;
            }

            .tab-navigation {
                justify-content: flex-start;
            }

            .tab-button {
                padding: 0.75rem 1rem;
                font-size: 0.9rem;
            }

            .input-switch, .output-light {
                display: block;
                width: 100%;
                max-width: 150px;
                margin: 0.5rem auto;
            }

            .gate-svg {
                max-width: 200px;
            }
        }

        @media (max-width: 480px) {
            .inputs-section, .outputs-section {
                margin: 1rem 0;
            }
        }

        /* Enhanced focus indicators */
        .input-switch:focus, .quiz-option:focus, .gate-btn:focus {
            outline: 3px solid #74c0fc !important;
            outline-offset: 2px !important;
        }

        .quiz-option:focus {
            transform: translateY(-1px);
        }

        .gate-btn:focus {
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);
        }

        .input-switch:hover {
            transform: scale(1.05);
        }

        .output-light.on {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Reduced Motion */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            
            .quiz-option:focus, .input-switch:hover {
                transform: none;
            }
            
            .output-light.on {
                animation: none;
            }
        }

        /* Print Styles */
        @media print {
            .accessibility-controls { 
                display: none !important; 
            }
            
            .interactive-panel { 
                border: 2px solid #000 !important; 
            }
            
            .section { 
                page-break-inside: avoid; 
            }
            
            .gate-svg {
                max-width: 150px;
            }
            
            body {
                font-size: 12pt;
            }
        }

        /* Keyboard navigation enhancement */
        body:not(.keyboard-nav) *:focus {
            outline: none;
        }
        
        .keyboard-nav *:focus {
            outline: 3px solid #74c0fc !important;
            outline-offset: 2px !important;
        }
    </style>
    
    <style>
        .video-transcript-container {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            display: flex;
            flex-direction: row;
            gap: 20px;
            max-width: 1200px;
            margin: 20px auto;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        .video-wrapper {
            position: relative;
            padding-top: 56.25%;
            height: 0;
            flex: 2;
        }

        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        .transcript-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 280px;
        }

        .transcript-wrapper h2 {
            margin-top: 0;
            font-size: 1.2em;
            color: #333;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }

        .transcript-content {
            overflow-y: auto;
            height: 400px;
            border: 1px solid #e0e0e0;
            padding: 10px;
            background-color: #ffffff;
            border-radius: 4px;
        }
        
        .transcript-content span {
            display: block;
            padding: 8px 12px;
            margin-bottom: 4px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            line-height: 1.5;
        }
        
        .transcript-content span:hover,
        .transcript-content span:focus {
            background-color: #e9e9e9;
            outline: 2px solid #005fcc;
            outline-offset: 2px;
        }
        
        .transcript-content span.active-transcript {
            background-color: #ffe0b2;
            font-weight: bold;
            color: #000;
        }
        
        @media (max-width: 800px) {
            .video-transcript-container {
                flex-direction: column;
            }
            .video-wrapper {
                width: 100%;
            }
            .transcript-wrapper {
                margin-top: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="accessibility-controls" role="region" aria-label="Accessibility controls">
        <h3>Accessibility Options</h3>
        <button onclick="changeFontSize('increase')" aria-label="Increase font size">A+</button>
        <button onclick="changeFontSize('decrease')" aria-label="Decrease font size">A-</button>
        <button onclick="toggleHighContrast()" aria-label="Toggle high contrast">High Contrast</button>
        <button onclick="pauseAllAnimations()" aria-label="Pause animations">Pause Animations</button>
    </div>

    <div class="container">
        <header>
            <h1>Week 2: Boolean Logic and Digital Gates</h1>
            <p>Interactive Learning Experience - CSC210</p>
            <div class="week-info">
                <div class="info-card">
                    <h3>Time Commitment</h3>
                    <p>9 hours total</p>
                </div>
                <div class="info-card">
                    <h3>Focus Areas</h3>
                    <p>Boolean Algebra & Logic Gates</p>
                </div>
                <div class="info-card">
                    <h3>Prerequisites</h3>
                    <p>Week 1: Number Systems</p>
                </div>
                <div class="info-card">
                    <h3>Tools Used</h3>
                    <p>Interactive Simulators</p>
                </div>
            </div>
        </header>

        <section class="section">
            <h2>Binary Addition and Subtraction Review</h2>
            <div class="interactive-panel">
                <p><strong>Before diving into Boolean logic and gates, let's review binary arithmetic</strong> - the foundation that makes digital computation possible. Understanding how binary addition works, especially the concept of "carry," is crucial for grasping how computers perform calculations.</p>
                
                <h3>Binary Addition: The Basics</h3>
                <p>Binary addition follows the same principles as decimal addition, but with only two digits (0 and 1). Just like in decimal arithmetic, we add column by column from right to left, and when the sum exceeds the largest digit in our system, we "carry" to the next column.</p>
                
                <h4>Understanding Carry in Binary vs. Decimal</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin: 1.5rem 0;">
                    <div style="background: #f0f8ff; padding: 1rem; border-radius: 8px;">
                        <h5 style="color: #2c3e50; margin-top: 0;">Decimal Addition (Base 10)</h5>
                        <div style="font-family: monospace; font-size: 1.1rem; text-align: center;">
                            <div>  47</div>
                            <div>+ 58</div>
                            <div>---</div>
                            <div>105</div>
                        </div>
                        <p><small>When 7 + 8 = 15, we write 5 and carry 1 because 15 ≥ 10 (our base).</small></p>
                    </div>
                    
                    <div style="background: #e8f5e8; padding: 1rem; border-radius: 8px;">
                        <h5 style="color: #2c3e50; margin-top: 0;">Binary Addition (Base 2)</h5>
                        <div style="font-family: monospace; font-size: 1.1rem; text-align: center;">
                            <div>  1011</div>
                            <div>+ 1110</div>
                            <div>-----</div>
                            <div>11001</div>
                        </div>
                        <p><small>When 1 + 1 = 2, we write 0 and carry 1 because 2 ≥ 2 (our base).</small></p>
                    </div>
                </div>
                
                <div class="warning-box">
                    <h3>Key Insight: Carry Generation</h3>
                    <p>In binary, a carry is generated whenever we add two 1s. This is because 1 + 1 = 10 in binary (which equals 2 in decimal), so we place 0 in the current column and carry 1 to the next column to the left.</p>
                </div>
                
                <h3>Interactive Binary Addition Calculator</h3>
                <div style="background: white; border: 2px solid #3498db; border-radius: 8px; padding: 1.5rem;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 1rem;">
                        <div>
                            <label for="binNum1" style="font-weight: bold;">First Binary Number:</label>
                            <input type="text" id="binNum1" placeholder="e.g., 1011" 
                                   style="width: 100%; padding: 0.5rem; font-family: monospace; font-size: 1.1rem; border: 1px solid #ddd; border-radius: 4px;"
                                   pattern="[01]*" title="Enter only 0s and 1s">
                        </div>
                        <div>
                            <label for="binNum2" style="font-weight: bold;">Second Binary Number:</label>
                            <input type="text" id="binNum2" placeholder="e.g., 1110" 
                                   style="width: 100%; padding: 0.5rem; font-family: monospace; font-size: 1.1rem; border: 1px solid #ddd; border-radius: 4px;"
                                   pattern="[01]*" title="Enter only 0s and 1s">
                        </div>
                    </div>
                    <div style="text-align: center; margin: 1rem 0;">
                        <button onclick="calculateBinaryAddition()" class="button" aria-describedby="calc-help">Calculate Addition</button>
                        <span id="calc-help" class="sr-only">Calculate the binary addition with detailed step-by-step breakdown</span>
                    </div>
                    <div id="binaryResult" style="background: #f8f9fa; padding: 1rem; border-radius: 4px; margin-top: 1rem; min-height: 50px;" aria-live="polite">
                        <p>Enter two binary numbers above and click "Calculate Addition" to see the step-by-step process including carry generation.</p>
                    </div>
                </div>
                
                <h3>Two's Complement: Representing Negative Numbers</h3>
                <p>Computers use <strong>two's complement</strong> to represent negative numbers. This system allows both positive and negative numbers to be added using the same binary addition circuitry.</p>
                
                <div style="background: #fff3cd; border: 2px solid #ffc107; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                    <h4 style="color: #856404; margin-top: 0;">Two's Complement Process:</h4>
                    <ol>
                        <li><strong>Find the one's complement:</strong> Flip all bits (0 becomes 1, 1 becomes 0)</li>
                        <li><strong>Add 1:</strong> Add 1 to the one's complement result</li>
                    </ol>
                    <p><strong>Example:</strong> To find -5 in 8-bit two's complement:</p>
                    <div style="font-family: monospace; background: white; padding: 0.5rem; border-radius: 4px;">
                        +5 in binary: 00000101<br>
                        One's complement: 11111010<br>
                        Add 1: 11111010 + 1 = 11111011<br>
                        <strong>So -5 = 11111011</strong>
                    </div>
                </div>
                
                <h3>Interactive Two's Complement Converter</h3>
                <div style="background: white; border: 2px solid #28a745; border-radius: 8px; padding: 1.5rem;">
                    <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem; align-items: center; margin-bottom: 1rem;">
                        <div>
                            <label for="decimalInput" style="font-weight: bold;">Decimal Number:</label>
                            <input type="number" id="decimalInput" placeholder="e.g., -5" 
                                   min="-128" max="127"
                                   style="width: 100%; padding: 0.5rem; font-size: 1.1rem; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <button onclick="convertToTwosComplement()" class="button" style="margin-top: 1.5rem;">Convert</button>
                        <div>
                            <label style="font-weight: bold;">8-bit Two's Complement:</label>
                            <div id="twosComplementResult" 
                                 style="background: #f8f9fa; padding: 0.5rem; font-family: monospace; font-size: 1.2rem; border: 1px solid #ddd; border-radius: 4px; min-height: 40px; display: flex; align-items: center;">
                                Enter a number (-128 to 127)
                            </div>
                        </div>
                    </div>
                    <div id="conversionSteps" style="background: #f8f9fa; padding: 1rem; border-radius: 4px; margin-top: 1rem; min-height: 50px;" aria-live="polite">
                        <p>Enter a decimal number to see the step-by-step two's complement conversion.</p>
                    </div>
                </div>
                
                <h3>Binary Subtraction Using Two's Complement</h3>
                <p>The brilliant insight of two's complement is that <strong>subtraction becomes addition</strong>. Instead of A - B, we calculate A + (-B), where -B is the two's complement of B.</p>
                
                <div style="background: #e8f5e8; border: 2px solid #28a745; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                    <h4 style="color: #155724; margin-top: 0;">Subtraction Algorithm:</h4>
                    <ol>
                        <li>Convert the number being subtracted to two's complement (making it negative)</li>
                        <li>Add the two numbers using regular binary addition</li>
                        <li>If there's a carry out of the most significant bit, discard it</li>
                        <li>The result is your answer</li>
                    </ol>
                </div>
                
                <h3>Interactive Binary Subtraction Calculator</h3>
                <div style="background: white; border: 2px solid #dc3545; border-radius: 8px; padding: 1.5rem;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 1rem;">
                        <div>
                            <label for="minuend" style="font-weight: bold;">Minuend (A):</label>
                            <input type="number" id="minuend" placeholder="e.g., 12" 
                                   min="-128" max="127"
                                   style="width: 100%; padding: 0.5rem; font-size: 1.1rem; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                        <div>
                            <label for="subtrahend" style="font-weight: bold;">Subtrahend (B):</label>
                            <input type="number" id="subtrahend" placeholder="e.g., 5" 
                                   min="-128" max="127"
                                   style="width: 100%; padding: 0.5rem; font-size: 1.1rem; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                    </div>
                    <div style="text-align: center; margin: 1rem 0;">
                        <button onclick="calculateBinarySubtraction()" class="button">Calculate A - B</button>
                    </div>
                    <div id="subtractionResult" style="background: #f8f9fa; padding: 1rem; border-radius: 4px; margin-top: 1rem; min-height: 50px;" aria-live="polite">
                        <p>Enter two decimal numbers to see how subtraction works using two's complement addition.</p>
                    </div>
                </div>
                
                <h3>Why This Matters for Digital Logic</h3>
                <div class="success-box">
                    <h3>Connection to Logic Gates</h3>
                    <p>Understanding binary addition and carry generation is essential because:</p>
                    <ul>
                        <li><strong>ALU Design:</strong> Arithmetic Logic Units use the same gates you'll study to perform addition</li>
                        <li><strong>Carry Logic:</strong> XOR gates generate sum bits, AND gates generate carry bits</li>
                        <li><strong>Two's Complement:</strong> Enables subtraction using only addition circuitry</li>
                        <li><strong>Computer Architecture:</strong> All arithmetic in processors relies on these principles</li>
                    </ul>
                </div>
            </div>
        </section>
        
        <section class="section">
            <h2>Instructional Video: Boolean Logic</h2>
            <div class="video-transcript-container">
                <div class="video-wrapper">
                    <iframe id="youtube-player"
                            title="YouTube video player"
                            src="https://www.youtube.com/embed/Oc65pA8ATSs?si=VMNOApuFPCTzv7SI"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                            allowfullscreen>
                    </iframe>
                </div>
                <div class="transcript-wrapper">
                    <h2>Interactive Transcript</h2>
                    <div id="transcript-container" class="transcript-content">
                        <span data-start="0.0" data-end="5.04" tabindex="0" role="button">Aloha and welcome to Boolean Logic and Digital Gates.</span>
                        <span data-start="5.68" data-end="8.0" tabindex="0" role="button">That's going to be our topic this week.</span>
                        <span data-start="10.2" data-end="16.14" tabindex="0" role="button">And so what we're going to start with is a little review here of Binary Edition, the basics.</span>
                        <span data-start="16.58" data-end="20.62" tabindex="0" role="button">So we sort of went over it last time, but we didn't really cover it real close.</span>
                        <span data-start="20.62" data-end="30.18" tabindex="0" role="button">So I put up a summary kind of activity for you to look at Boolean Edition and it's kind of foundational.</span>
                        <span data-start="30.64" data-end="32.78" tabindex="0" role="button">And so you really need to understand that.</span>
                        <span data-start="32.98" data-end="45.68" tabindex="0" role="button">So if you're struggling with that a little bit, take some time, review the addition and subtraction review that I've posted here, along with the example interactive calculator that you can use.</span>
                        <span data-start="46.3" data-end="49.88" tabindex="0" role="button">OK, and it talks also about two's complement and how you do negative numbers.</span>
                        <span data-start="50.62" data-end="57.88" tabindex="0" role="button">And add them, so basically, if you want to subtract the number, you convert it to negative and add it.</span>
                        <span data-start="59.5" data-end="101.92" tabindex="0" role="button">Right, because adding a negative is the same as subtraction, so.</span>
                        <span data-start="103.34" data-end="107.1" tabindex="0" role="button">OK, so and that's what this first part is, I'm not going to go through it in detail.</span>
                        <span data-start="120.62" data-end="133.7" tabindex="0" role="button">If you struggle at all with conversion between binary and decimal, if that's if you're still struggling with that, it doesn't make a lot of sense.</span>
                        <span data-start="133.96" data-end="139.08" tabindex="0" role="button">I posted a link here to this thing called a Cisco binary game.</span>
                        <span data-start="139.74" data-end="146.76" tabindex="0" role="button">OK, and so it's a gamified approach to just basically doing a lot of conversions. All right.</span>
                        <span data-start="147.18" data-end="154.64" tabindex="0" role="button">And so through sheer repetition, it helps you. Learn, I better understand how that works.</span>
                        <span data-start="203.94" data-end="208.32" tabindex="0" role="button">OK, you can say play game instructions, you can see in the background these columns.</span>
                        <span data-start="209.38" data-end="219.64" tabindex="0" role="button">So what it does is when there's a number here, like the number two, it wants you to select the bits to match the number. And then once you do, it goes away.</span>
                        <span data-start="220.62" data-end="221.52" tabindex="0" role="button">Four and one.</span>
                        <span data-start="222.42" data-end="230.24" tabindex="0" role="button">When there's a question mark, it wants you to type in the value that that binary eight bit binary number means.</span>
                        <span data-start="233.2" data-end="237.84" tabindex="0" role="button">And you just go through these and it has multiple levels.</span>
                        <span data-start="251.24" data-end="254.5" tabindex="0" role="button">You basically run out of space, kind of like a Tetris thing.</span>
                        <span data-start="258.8" data-end="301.74" tabindex="0" role="button">You know, the game ends or you can end the game yourself.</span>
                        <span data-start="346.24" data-end="350.6" tabindex="0" role="button">OK, the other thing I should mention is that I created a course tutor.</span>
                        <span data-start="356.24" data-end="400.64" tabindex="0" role="button">It links to a chat bot that you can ask questions of.</span>
                        <span data-start="411.2" data-end="416.38" tabindex="0" role="button">It is backed by a gen AI, so you can ask it, you know.</span>
                        <span data-start="444.82" data-end="449.7" tabindex="0" role="button">You can go pretty much anywhere you want to go, and it will answer you.</span>
                        <span data-start="452.34" data-end="458.0" tabindex="0" role="button">It's not meant to do your work for you, but it's meant to aid and assist you.</span>
                        <span data-start="508.0" data-end="509.86" tabindex="0" role="button">It's fairly extensive and comprehensive.</span>
                        <span data-start="511.18" data-end="514.9" tabindex="0" role="button">Basically, it says you're going to use it and you're going to use it as intended.</span>
                        <span data-start="516.28" data-end="520.1" tabindex="0" role="button">As an aid to help you learn not to do the work for you.</span>
                        <span data-start="521.22" data-end="526.1" tabindex="0" role="button">OK, so that's so please read this and take a look at it.</span>
                        <span data-start="550.62" data-end="613.04" tabindex="0" role="button">OK, so this video will get posted here, so we want to talk a little about Boolean algebra, what it is, what logic gates are, maybe what circuits are, truth tables, conversion between representations of Boolean expressions, two tables, gate diagrams and sometimes recognize patterns, sometimes you can see patterns in any more sense.</span>
                        <span data-start="620.56" data-end="635.76" tabindex="0" role="button">There are these one, two, three, these six primary gates that we care about and and gate and or gate and not gate and and gate and nor gate and in. XOR gate, which is exclusive or or ZOR gate.</span>
                        <span data-start="637.26" data-end="645.84" tabindex="0" role="button">OK, so an and gate works just like in programming when you're branching, you have an if statement inside your if you have a conditional statement.</span>
                        <span data-start="646.96" data-end="654.34" tabindex="0" role="button">OK, that is true or false. Well, when you have a compound conditional. You usually have two conditions connected with an and or an or.</span>
                        <span data-start="655.24" data-end="706.84" tabindex="0" role="button">OK, and an and is exactly that it says, hey, when both inputs are high or true, think of true, false, I'm thinking true, false, one is true, zero is false.</span>
                        <span data-start="742.16" data-end="746.42" tabindex="0" role="button">These are the laws of bullying algebra. When you look at this, a a is an input.</span>
                        <span data-start="755.08" data-end="801.12" tabindex="0" role="button">Dot is an and. So a and one equals a OK.</span>
                        <span data-start="801.66" data-end="808.16" tabindex="0" role="button">A or plus is an or a or zero equals an A. And we use.</span>
                        <span data-start="834.26" data-end="838.6" tabindex="0" role="button">There's a lot of different notations, but a bar over it means not a.</span>
                        <span data-start="838.62" data-end="858.58" tabindex="0" role="button">So it means you've taken a and you've not at it. So a times not a equals zero because if a is one, not a is zero. A is zero, not a is one OK, so this community of it doesn't matter which one comes first associative doesn't matter how you pair them.</span>
                        <span data-start="858.58" data-end="908.68" tabindex="0" role="button">If they're all the same. Um, they're all times or they're all plus. It doesn't matter which order you do them and pair them up in and then to Morgan's law, which says.</span>
                        <span data-start="922.8" data-end="928.08" tabindex="0" role="button">You can group if you have a, B and C, you can group multiple things and create a truth table.</span>
                        <span data-start="943.32" data-end="948.26" tabindex="0" role="button">And like I said, apparently I got it. I have to update this, but I will update the.</span>
                        <span data-start="955.62" data-end="959.2" tabindex="0" role="button">All right, so, um, really focus on gates, how they work.</span>
                        <span data-start="959.9" data-end="1012.1" tabindex="0" role="button">Understand and and in an or a not means just reverse it and and is not and meaning take the results from an and gate and reverse all the answers.</span>
                        <span data-start="1035.1" data-end="1048.4" tabindex="0" role="button">What it says is that when, um, the if you're doing a two input when the two inputs are the same and you get zero and when they're different, you get one.</span>
                        <span data-start="1118.76" data-end="1119.98" tabindex="0" role="button">OK, because it's.</span>
                        <span data-start="1120.02" data-end="1127.48" tabindex="0" role="button">An odd number, one plus one plus one is three, three is odd, so the output is one.</span>
                        <span data-start="1135.56" data-end="1149.48" tabindex="0" role="button">Simulator isn't working right now, like I said, but it should also show a diagram of what our and gates and or gates look like in logic and essentially.</span>
                        <span data-start="1150.02" data-end="1158.56" tabindex="0" role="button">So, um, that's this week's material. Take some time and work your way through it all. Thanks.</span>
                    </div>
                </div>
            </div>
        </section>
        <section class="section">
            <h2>Learning Objectives</h2>
            <div class="objectives-grid">
                <div class="objective">
                    <strong>Apply Boolean Algebra:</strong> Use Boolean algebra rules to simplify logical expressions and understand their mathematical foundation.
                </div>
                <div class="objective">
                    <strong>Construct Truth Tables:</strong> Create systematic truth tables for any Boolean expression to analyze all possible outcomes.
                </div>
                <div class="objective">
                    <strong>Understand Logic Gates:</strong> Explain the function of basic logic gates and their role in digital circuits.
                </div>
                <div class="objective">
                    <strong>Convert Between Representations:</strong> Transform between Boolean expressions, truth tables, and gate diagrams fluidly.
                </div>
                <div class="objective">
                    <strong>Design Circuits:</strong> Create simple combinational circuits to solve logical problems effectively.
                </div>
                <div class="objective">
                    <strong>Recognize Patterns:</strong> Identify how gates combine to perform arithmetic and complex operations.
                </div>
            </div>

            <div class="progress-tracker">
                <h3>Learning Progress</h3>
                <div class="progress-bar" role="progressbar" aria-label="Learning progress" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p id="progressText">Complete the interactive sections to track your progress!</p>
            </div>
        </section>

        <section class="section">
            <h2>Interactive Gate Simulator</h2>
            <div class="interactive-panel">
                <p><strong>Experiment with logic gates!</strong> Click the input switches to change their states (Red = 0/OFF, Green = 1/ON) and observe how different gates respond.</p>
                
                <div class="gate-selector">
                    <button class="gate-btn active" onclick="selectGate('AND')" data-gate="AND">AND Gate</button>
                    <button class="gate-btn" onclick="selectGate('OR')" data-gate="OR">OR Gate</button>
                    <button class="gate-btn" onclick="selectGate('NOT')" data-gate="NOT">NOT Gate</button>
                    <button class="gate-btn" onclick="selectGate('NAND')" data-gate="NAND">NAND Gate</button>
                    <button class="gate-btn" onclick="selectGate('NOR')" data-gate="NOR">NOR Gate</button>
                    <button class="gate-btn" onclick="selectGate('XOR')" data-gate="XOR">XOR Gate</button>
                </div>

                <div class="gate-simulator">
                    <div class="inputs-section">
                        <h3>Inputs</h3>
                        <div>
                            <button class="input-switch" id="inputA" onclick="toggleInput('A')" aria-label="Input A, currently OFF">
                                A: 0
                            </button>
                        </div>
                        <div id="inputBContainer">
                            <button class="input-switch" id="inputB" onclick="toggleInput('B')" aria-label="Input B, currently OFF">
                                B: 0
                            </button>
                        </div>
                    </div>

                    <div class="gate-display">
                        <div id="gateName">AND Gate</div>
                        <div id="gate-svg-container" aria-live="polite" role="img" aria-label="Interactive logic gate diagram with animated wires">
                            </div>
                        <div id="gateDescription">Output is 1 only when ALL inputs are 1</div>
                    </div>

                    <div class="outputs-section">
                        <h3>Output</h3>
                        <div>
                            <div class="output-light" id="output" aria-label="Output, currently OFF">
                                Y: 0
                            </div>
                        </div>
                    </div>
                </div>

                <div>
                    <h3>Truth Table for <span id="currentGate">AND</span> Gate</h3>
                    <table class="truth-table" id="truthTable" role="table" aria-label="Truth table for current gate">
                        <thead>
                            <tr>
                                <th>A</th>
                                <th>B</th>
                                <th>Y</th>
                            </tr>
                        </thead>
                        <tbody id="truthTableBody">
                            </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Boolean Algebra Laws Reference</h2>
            <div class="laws-reference">
                <div class="law-card">
                    <h4>Identity Laws</h4>
                    <div class="formula">A · 1 = A</div>
                    <div class="formula">A + 0 = A</div>
                </div>
                <div class="law-card">
                    <h4>Null Laws</h4>
                    <div class="formula">A · 0 = 0</div>
                    <div class="formula">A + 1 = 1</div>
                </div>
                <div class="law-card">
                    <h4>Complement Laws</h4>
                    <div class="formula">A · A̅ = 0</div>
                    <div class="formula">A + A̅ = 1</div>
                </div>
                <div class="law-card">
                    <h4>Commutative Laws</h4>
                    <div class="formula">A · B = B · A</div>
                    <div class="formula">A + B = B + A</div>
                </div>
                <div class="law-card">
                    <h4>Associative Laws</h4>
                    <div class="formula">(A · B) · C = A · (B · C)</div>
                    <div class="formula">(A + B) + C = A + (B + C)</div>
                </div>
                <div class="law-card">
                    <h4>De Morgan's Laws</h4>
                    <div class="formula">NOT(A · B) = A̅ + B̅</div>
                    <div class="formula">NOT(A + B) = A̅ · B̅</div>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Boolean Expression Playground</h2>
            <div class="boolean-playground">
                <p><strong>Practice Boolean algebra!</strong> Enter expressions using A, B, C as variables. Use * for AND, + for OR, and ! for NOT.</p>
                <p><em>Examples: A*B, A+B, !A, (A+B)*C</em></p>
                
                <label for="expressionInput">Boolean Expression:</label>
                <input type="text" id="expressionInput" class="expression-input" 
                       placeholder="Enter expression like: A*B+C" 
                       aria-describedby="expressionHelp">
                <div id="expressionHelp" class="sr-only">Enter Boolean expressions using A, B, C as variables, * for AND, + for OR, and ! for NOT</div>
                
                <div>
                    <button class="button" onclick="evaluateExpression()" aria-describedby="evaluateHelp">Generate Truth Table</button>
                    <button class="button" onclick="clearExpression()" aria-describedby="clearHelp">Clear</button>
                    <span id="evaluateHelp" class="sr-only">Generate truth table for the entered expression</span>
                    <span id="clearHelp" class="sr-only">Clear the expression input</span>
                </div>

                <div class="result-display" id="expressionResult" aria-live="polite" aria-label="Expression evaluation results">
                    Enter a Boolean expression above and click "Generate Truth Table" to see the results.
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Interactive Practice Problems</h2>
            
            <div class="tab-navigation" role="tablist" aria-label="Practice problem categories">
                <button class="tab-button active" role="tab" aria-selected="true" aria-controls="quiz1" id="tab1" onclick="showTab('quiz1', 'tab1')">Gate Recognition</button>
                <button class="tab-button" role="tab" aria-selected="false" aria-controls="quiz2" id="tab2" onclick="showTab('quiz2', 'tab2')">Truth Tables</button>
                <button class="tab-button" role="tab" aria-selected="false" aria-controls="quiz3" id="tab3" onclick="showTab('quiz3', 'tab3')">Boolean Laws</button>
            </div>
            
            <div id="quiz1" class="tab-panel active" role="tabpanel" aria-labelledby="tab1">
                <div class="quiz-question">
                    <h3>Question 1: Gate Recognition</h3>
                    <p>Which gate produces output 1 only when exactly one input is 1?</p>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button" aria-describedby="q1opt1">
                            AND Gate
                            <span id="q1opt1" class="sr-only">Option: AND Gate</span>
                        </div>
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button" aria-describedby="q1opt2">
                            OR Gate
                            <span id="q1opt2" class="sr-only">Option: OR Gate</span>
                        </div>
                        <div class="quiz-option" onclick="selectAnswer(this, true)" tabindex="0" role="button" aria-describedby="q1opt3">
                            XOR Gate
                            <span id="q1opt3" class="sr-only">Option: XOR Gate</span>
                        </div>
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button" aria-describedby="q1opt4">
                            NAND Gate
                            <span id="q1opt4" class="sr-only">Option: NAND Gate</span>
                        </div>
                    </div>
                    <div id="quiz1feedback" class="result-display" aria-live="polite"></div>
                </div>
            </div>

            <div id="quiz2" class="tab-panel" role="tabpanel" aria-labelledby="tab2">
                <div class="quiz-question">
                    <h3>Question 2: Truth Table Completion</h3>
                    <p>For the expression A · B + Ā, what is the output when A=0 and B=1?</p>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button">0</div>
                        <div class="quiz-option" onclick="selectAnswer(this, true)" tabindex="0" role="button">1</div>
                    </div>
                    <div id="quiz2feedback" class="result-display" aria-live="polite"></div>
                </div>
            </div>

            <div id="quiz3" class="tab-panel" role="tabpanel" aria-labelledby="tab3">
                <div class="quiz-question">
                    <h3>Question 3: De Morgan's Law</h3>
                    <p>According to De Morgan's Law, NOT(A + B) is equivalent to:</p>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button">Ā + B̄</div>
                        <div class="quiz-option" onclick="selectAnswer(this, true)" tabindex="0" role="button">Ā · B̄</div>
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button">A · B</div>
                        <div class="quiz-option" onclick="selectAnswer(this, false)" tabindex="0" role="button">A + B</div>
                    </div>
                    <div id="quiz3feedback" class="result-display" aria-live="polite"></div>
                </div>
            </div>
        </section>
    </div>

    <script>
        // Global state variables
        let currentGateType = 'AND';
        let inputStates = { A: false, B: false };
        let completedSections = new Set();
        let fontSize = 16;
        let highContrast = false;
        let animationsPaused = false;

        // Gate definitions with proper SVG diagrams and logic
        const gates = {
            AND: {
                symbol: '&',
                name: 'AND Gate',
                description: 'Output is 1 only when ALL inputs are 1',
                inputs: 2,
                truthTable: [
                    [0, 0, 0],
                    [0, 1, 0],
                    [1, 0, 0],
                    [1, 1, 1]
                ],
                evaluate: (a, b) => a && b,
                svg: `<svg class="gate-svg" viewBox="0 0 200 100">
                    <path class="gate-body" d="M50,10 H100 A40,40 0 0 1 100,90 H50 Z"></path>
                    <line class="wire" id="gWireA" x1="0" y1="30" x2="50" y2="30"/>
                    <line class="wire" id="gWireB" x1="0" y1="70" x2="50" y2="70"/>
                    <line class="wire" id="gWireOut" x1="140" y1="50" x2="200" y2="50"/>
                    <text x="15" y="25">A</text>
                    <text x="15" y="65">B</text>
                    <text id="gOutText" x="180" y="45">0</text>
                </svg>`
            },
            OR: {
                symbol: '≥1',
                name: 'OR Gate',
                description: 'Output is 1 when at least ONE input is 1',
                inputs: 2,
                truthTable: [
                    [0, 0, 0],
                    [0, 1, 1],
                    [1, 0, 1],
                    [1, 1, 1]
                ],
                evaluate: (a, b) => a || b,
                svg: `<svg class="gate-svg" viewBox="0 0 200 100">
                    <path class="gate-body" d="M25,10 Q70,50 25,90 H50 Q120,50 50,10 Z"></path>
                    <line class="wire" id="gWireA" x1="0" y1="30" x2="35" y2="30"/>
                    <line class="wire" id="gWireB" x1="0" y1="70" x2="35" y2="70"/>
                    <line class="wire" id="gWireOut" x1="105" y1="50" x2="200" y2="50"/>
                    <text x="15" y="25">A</text>
                    <text x="15" y="65">B</text>
                    <text id="gOutText" x="180" y="45">0</text>
                </svg>`
            },
            NOT: {
                symbol: '¬',
                name: 'NOT Gate',
                description: 'Output is the INVERSE of the input',
                inputs: 1,
                truthTable: [
                    [0, 1],
                    [1, 0]
                ],
                evaluate: (a) => !a,
                svg: `<svg class="gate-svg" viewBox="0 0 200 100">
                    <path class="gate-body" d="M50,10 L100,50 L50,90 Z"></path>
                    <circle class="gate-body" cx="110" cy="50" r="10"></circle>
                    <line class="wire" id="gWireA" x1="0" y1="50" x2="50" y2="50"/>
                    <line class="wire" id="gWireOut" x1="120" y1="50" x2="200" y2="50"/>
                    <text x="15" y="45">A</text>
                    <text id="gOutText" x="180" y="45">1</text>
                </svg>`
            },
            NAND: {
                symbol: '⊼',
                name: 'NAND Gate',
                description: 'The INVERSE of an AND gate',
                inputs: 2,
                truthTable: [
                    [0, 0, 1],
                    [0, 1, 1],
                    [1, 0, 1],
                    [1, 1, 0]
                ],
                evaluate: (a, b) => !(a && b),
                svg: `<svg class="gate-svg" viewBox="0 0 200 100">
                    <path class="gate-body" d="M50,10 H100 A40,40 0 0 1 100,90 H50 Z"></path>
                    <circle class="gate-body" cx="150" cy="50" r="10"></circle>
                    <line class="wire" id="gWireA" x1="0" y1="30" x2="50" y2="30"/>
                    <line class="wire" id="gWireB" x1="0" y1="70" x2="50" y2="70"/>
                    <line class="wire" id="gWireOut" x1="160" y1="50" x2="200" y2="50"/>
                    <text x="15" y="25">A</text>
                    <text x="15" y="65">B</text>
                    <text id="gOutText" x="180" y="45">1</text>
                </svg>`
            },
            NOR: {
                symbol: '⊽',
                name: 'NOR Gate',
                description: 'The INVERSE of an OR gate',
                inputs: 2,
                truthTable: [
                    [0, 0, 1],
                    [0, 1, 0],
                    [1, 0, 0],
                    [1, 1, 0]
                ],
                evaluate: (a, b) => !(a || b),
                svg: `<svg class="gate-svg" viewBox="0 0 200 100">
                    <path class="gate-body" d="M25,10 Q70,50 25,90 H50 Q120,50 50,10 Z"></path>
                    <circle class="gate-body" cx="115" cy="50" r="10"></circle>
                    <line class="wire" id="gWireA" x1="0" y1="30" x2="35" y2="30"/>
                    <line class="wire" id="gWireB" x1="0" y1="70" x2="35" y2="70"/>
                    <line class="wire" id="gWireOut" x1="125" y1="50" x2="200" y2="50"/>
                    <text x="15" y="25">A</text>
                    <text x="15" y="65">B</text>
                    <text id="gOutText" x="180" y="45">1</text>
                </svg>`
            },
            XOR: {
                symbol: '⊕',
                name: 'XOR Gate',
                description: 'Output is 1 only when inputs are DIFFERENT',
                inputs: 2,
                truthTable: [
                    [0, 0, 0],
                    [0, 1, 1],
                    [1, 0, 1],
                    [1, 1, 0]
                ],
                evaluate: (a, b) => a !== b,
                svg: `<svg class="gate-svg" viewBox="0 0 200 100">
                    <path class="gate-body" d="M35,10 Q80,50 35,90 H60 Q130,50 60,10 Z"></path>
                    <path class="gate-body" d="M25,10 Q70,50 25,90" fill="none"></path>
                    <line class="wire" id="gWireA" x1="0" y1="30" x2="45" y2="30"/>
                    <line class="wire" id="gWireB" x1="0" y1="70" x2="45" y2="70"/>
                    <line class="wire" id="gWireOut" x1="115" y1="50" x2="200" y2="50"/>
                    <text x="15" y="25">A</text>
                    <text x="15" y="65">B</text>
                    <text id="gOutText" x="180" y="45">0</text>
                </svg>`
            }
        };

        // DOM utility
        const $ = (selector) => document.querySelector(selector);
        const $$ = (selector) => document.querySelectorAll(selector);

        // Event listener setup
        document.addEventListener('DOMContentLoaded', () => {
            selectGate('AND'); // Initialize with AND gate
            addKeyboardNavListener();
        });

        // Binary Arithmetic Functions
        function calculateBinaryAddition() {
            const num1 = $('#binNum1').value.trim();
            const num2 = $('#binNum2').value.trim();
            const resultDiv = $('#binaryResult');

            if (!/^[01]+$/.test(num1) || !/^[01]+$/.test(num2)) {
                resultDiv.innerHTML = `<p style="color: red;">Error: Please enter valid binary numbers (only 0s and 1s).</p>`;
                return;
            }

            const maxLength = Math.max(num1.length, num2.length);
            const n1 = num1.padStart(maxLength, '0');
            const n2 = num2.padStart(maxLength, '0');
            
            let result = '';
            let carry = 0;
            let steps = '<h4>Step-by-step Calculation:</h4><div style="font-family: monospace; white-space: pre; text-align: right;">';
            steps += `  ${' '.repeat(maxLength + 1)}\n`; // for carries
            steps += `  ${n1}\n`;
            steps += `+ ${n2}\n`;
            steps += '-'.repeat(maxLength + 3) + '\n';
            
            let carryRow = '';

            for (let i = maxLength - 1; i >= 0; i--) {
                const bit1 = parseInt(n1[i]);
                const bit2 = parseInt(n2[i]);
                const sum = bit1 + bit2 + carry;
                
                result = (sum % 2) + result;
                carry = Math.floor(sum / 2);
                carryRow = (carry > 0 ? '1' : ' ') + carryRow;
            }

            if (carry > 0) {
                result = '1' + result;
            }

            steps = steps.replace(' ', carryRow + '\n ');
            steps += `  ${result}\n</div>`;
            
            resultDiv.innerHTML = steps;
            updateProgress('binary-addition');
        }

        function convertToTwosComplement() {
            const decimalInput = $('#decimalInput');
            const resultDiv = $('#twosComplementResult');
            const stepsDiv = $('#conversionSteps');
            const dec = parseInt(decimalInput.value);

            if (isNaN(dec) || dec < -128 || dec > 127) {
                resultDiv.textContent = 'Invalid Input';
                stepsDiv.innerHTML = '<p style="color: red;">Please enter a number between -128 and 127.</p>';
                return;
            }

            let binary;
            if (dec >= 0) {
                binary = dec.toString(2).padStart(8, '0');
                stepsDiv.innerHTML = `<h4>Conversion for +${dec}:</h4><p>Positive numbers are represented directly in binary.</p><div style="font-family: monospace;">${binary}</div>`;
            } else {
                let absBinary = Math.abs(dec).toString(2).padStart(8, '0');
                
                let onesComp = '';
                for(let bit of absBinary) {
                    onesComp += (bit === '0' ? '1' : '0');
                }
                
                let twosComp = (parseInt(onesComp, 2) + 1).toString(2).padStart(8, '0');
                binary = twosComp.slice(-8);
                
                stepsDiv.innerHTML = `<h4>Conversion for ${dec}:</h4>
                <ol>
                    <li>Start with positive binary: <code>${absBinary}</code></li>
                    <li>Flip all bits (One's Complement): <code>${onesComp}</code></li>
                    <li>Add 1: <code>${binary}</code></li>
                </ol>`;
            }
            
            resultDiv.textContent = binary;
            updateProgress('twos-complement');
        }

        function calculateBinarySubtraction() {
            const minuendEl = $('#minuend');
            const subtrahendEl = $('#subtrahend');
            const resultDiv = $('#subtractionResult');
            
            const minuend = parseInt(minuendEl.value);
            const subtrahend = parseInt(subtrahendEl.value);

            if (isNaN(minuend) || isNaN(subtrahend)) {
                resultDiv.innerHTML = '<p style="color: red;">Please enter valid decimal numbers for both fields.</p>';
                return;
            }

            // Convert minuend to binary
            const minuendBin = (minuend & 0xFF).toString(2).padStart(8, '0');

            // Find two's complement of subtrahend
            const subtrahendTwosComp = (-subtrahend & 0xFF).toString(2).padStart(8, '0');

            // Perform addition
            const sum = (minuend + (-subtrahend)) & 0xFF;
            const resultBin = sum.toString(2).padStart(8, '0');

            resultDiv.innerHTML = `<h4>Calculating ${minuend} - ${subtrahend}:</h4>
            <div style="font-family: monospace; line-height: 1.8;">
                Minuend (A):      ${minuend.toString().padStart(4)}  ->  ${minuendBin}<br>
                Subtrahend (B):   ${subtrahend.toString().padStart(4)}  ->  Two's Comp is ${subtrahendTwosComp}<br>
                --------------------------------------<br>
                A + (-B):         ${minuendBin} + ${subtrahendTwosComp}<br>
                Result:           ${resultBin} (which is ${sum > 127 ? sum - 256 : sum} in decimal)
            </div>`;
            updateProgress('binary-subtraction');
        }

        // Gate Simulator Functions
        function selectGate(gateType) {
            currentGateType = gateType;
            const gate = gates[gateType];

            $$('.gate-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.gate === gateType);
            });

            $('#gateName').textContent = gate.name;
            $('#gate-svg-container').innerHTML = gate.svg;
            $('#gateDescription').textContent = gate.description;
            $('#currentGate').textContent = gate.name;
            $('#inputBContainer').style.display = gate.inputs === 1 ? 'none' : 'block';

            updateTruthTable();
            updateGate();
            announceToScreenReader(`${gate.name} selected.`);
        }

        function toggleInput(inputId) {
            inputStates[inputId] = !inputStates[inputId];
            updateGate();
            updateProgress('gate-simulator');
        }

        function updateGate() {
            const gate = gates[currentGateType];
            const inputAVal = Number(inputStates.A);
            const inputBVal = Number(inputStates.B);
            
            const outputVal = gate.evaluate(inputStates.A, inputStates.B);
            
            const btnA = $('#inputA');
            btnA.textContent = `A: ${inputAVal}`;
            btnA.classList.toggle('on', inputStates.A);
            btnA.setAttribute('aria-label', `Input A, currently ${inputStates.A ? 'ON' : 'OFF'}`);
            
            $('#gWireA').style.stroke = inputStates.A ? 'var(--wire-on)' : 'var(--wire-off)';
            
            if (gate.inputs === 2) {
                const btnB = $('#inputB');
                btnB.textContent = `B: ${inputBVal}`;
                btnB.classList.toggle('on', inputStates.B);
                btnB.setAttribute('aria-label', `Input B, currently ${inputStates.B ? 'ON' : 'OFF'}`);
                $('#gWireB').style.stroke = inputStates.B ? 'var(--wire-on)' : 'var(--wire-off)';
            }
            
            const outputDiv = $('#output');
            outputDiv.textContent = `Y: ${Number(outputVal)}`;
            outputDiv.classList.toggle('on', outputVal);
            outputDiv.setAttribute('aria-label', `Output, currently ${outputVal ? 'ON' : 'OFF'}`);

            $('#gWireOut').style.stroke = outputVal ? 'var(--wire-on)' : 'var(--wire-off)';
            $('#gOutText').textContent = Number(outputVal);

            highlightTruthTableRow();
        }

        function updateTruthTable() {
            const gate = gates[currentGateType];
            const tableBody = $('#truthTableBody');
            tableBody.innerHTML = '';

            const headerRow = $('#truthTable thead tr');
            if(gate.inputs === 1) {
                headerRow.innerHTML = `<th>A</th><th>Y</th>`;
            } else {
                headerRow.innerHTML = `<th>A</th><th>B</th><th>Y</th>`;
            }

            gate.truthTable.forEach(row => {
                const tr = document.createElement('tr');
                tr.setAttribute('data-row', row.slice(0, -1).join(''));
                row.forEach(cell => {
                    const td = document.createElement('td');
                    td.textContent = cell;
                    tr.appendChild(td);
                });
                tableBody.appendChild(tr);
            });
        }

        function highlightTruthTableRow() {
            $$('#truthTableBody tr').forEach(row => {
                row.style.backgroundColor = 'transparent';
            });
            
            const gate = gates[currentGateType];
            let activeRowId;
            if (gate.inputs === 1) {
                activeRowId = String(Number(inputStates.A));
            } else {
                activeRowId = String(Number(inputStates.A)) + String(Number(inputStates.B));
            }
            
            const activeRow = $(`#truthTableBody tr[data-row="${activeRowId}"]`);
            if (activeRow) {
                activeRow.style.backgroundColor = 'var(--warning-color)';
            }
        }

        // Boolean Expression Playground
        function evaluateExpression() {
            const input = $('#expressionInput').value.trim();
            const resultDiv = $('#expressionResult');
            if (!input) {
                resultDiv.innerHTML = '<p style="color:red;">Please enter an expression.</p>';
                return;
            }

            try {
                const variables = [...new Set(input.match(/[A-C]/g))].sort();
                if (!variables.length) throw new Error("No variables (A, B, C) found.");

                let tableHTML = '<table class="truth-table"><thead><tr>';
                variables.forEach(v => tableHTML += `<th>${v}</th>`);
                tableHTML += `<th>Result</th></tr></thead><tbody>`;

                for (let i = 0; i < Math.pow(2, variables.length); i++) {
                    let expression = input.toUpperCase();
                    let rowValues = [];
                    tableHTML += '<tr>';

                    for (let j = 0; j < variables.length; j++) {
                        const val = (i >> (variables.length - 1 - j)) & 1;
                        expression = expression.replace(new RegExp(variables[j], 'g'), val);
                        tableHTML += `<td>${val}</td>`;
                        rowValues.push(val);
                    }

                    // Simple but unsafe eval. For a real app, use a proper parser.
                    let sanitized = expression.replace(/!/g, ' ! ').replace(/\*/g, ' && ').replace(/\+/g, ' || ');
                    const result = eval(sanitized.replace(/[^01&|! ()]/g, ''));
                    
                    tableHTML += `<td><strong>${Number(result)}</strong></td></tr>`;
                }

                tableHTML += '</tbody></table>';
                resultDiv.innerHTML = tableHTML;
                updateProgress('expression-playground');
            } catch (e) {
                resultDiv.innerHTML = `<p style="color:red;">Error evaluating expression: ${e.message}. Please check your syntax.</p>`;
            }
        }

        function clearExpression() {
            $('#expressionInput').value = '';
            $('#expressionResult').innerHTML = 'Enter a Boolean expression above and click "Generate Truth Table" to see the results.';
        }

        // Quiz and Progress Tracking
        function showTab(tabId, buttonId) {
            $$('.tab-panel').forEach(panel => panel.classList.remove('active'));
            $$('.tab-button').forEach(btn => btn.classList.remove('active'));
            
            $(`#${tabId}`).classList.add('active');
            $(`#${buttonId}`).classList.add('active');
        }

        function selectAnswer(element, isCorrect) {
            const parentOptions = element.parentElement;
            const feedbackDiv = parentOptions.nextElementSibling;
            
            $$('.quiz-option', parentOptions).forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
                opt.style.pointerEvents = 'none';
            });
            
            element.classList.add('selected');
            if (isCorrect) {
                element.classList.add('correct');
                feedbackDiv.innerHTML = '<p style="color:green;"><strong>Correct!</strong> Great job.</p>';
                updateProgress(element.closest('.tab-panel').id);
            } else {
                element.classList.add('incorrect');
                feedbackDiv.innerHTML = '<p style="color:red;"><strong>Not quite.</strong> Try reviewing the material and attempting again.</p>';
            }
        }

        function updateProgress(sectionId) {
            completedSections.add(sectionId);
            const totalSections = 6; // manual count of interactive sections
            const progress = (completedSections.size / totalSections) * 100;
            
            $('#progressFill').style.width = `${progress}%`;
            $('#progressFill').parentElement.setAttribute('aria-valuenow', progress);
            $('#progressText').textContent = `Progress: ${completedSections.size} of ${totalSections} sections completed.`;

            if (progress === 100) {
                 $('#progressText').textContent = 'Congratulations! You have completed all interactive sections!';
                 announceToScreenReader('Congratulations! You have completed all interactive sections!');
            }
        }

        // Accessibility Functions
        function changeFontSize(direction) {
            fontSize += (direction === 'increase' ? 2 : -2);
            if(fontSize < 12) fontSize = 12;
            if(fontSize > 24) fontSize = 24;
            document.body.style.fontSize = `${fontSize}px`;
        }
        
        function toggleHighContrast() {
            highContrast = !highContrast;
            document.body.classList.toggle('high-contrast', highContrast);
        }

        function pauseAllAnimations() {
            animationsPaused = !animationsPaused;
            const style = document.createElement('style');
            style.id = 'anim-pause-style';
            if (animationsPaused) {
                style.innerHTML = `* { animation: none !important; transition: none !important; }`;
                document.head.appendChild(style);
            } else {
                const existingStyle = document.getElementById('anim-pause-style');
                if (existingStyle) existingStyle.remove();
            }
        }

        function announceToScreenReader(message) {
            let srAnnouncer = $('#sr-announcer');
            if (!srAnnouncer) {
                srAnnouncer = document.createElement('div');
                srAnnouncer.id = 'sr-announcer';
                srAnnouncer.className = 'sr-only';
                srAnnouncer.setAttribute('aria-live', 'polite');
                document.body.appendChild(srAnnouncer);
            }
            srAnnouncer.textContent = message;
        }
        
        function addKeyboardNavListener() {
            document.body.addEventListener('keydown', (e) => {
                if(e.key === 'Tab') {
                    document.body.classList.add('keyboard-nav');
                }
            });
            document.body.addEventListener('mousedown', () => {
                document.body.classList.remove('keyboard-nav');
            });
        }
    </script>
    
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
        let player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtube-player', {
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            setupTranscript();
        }

        const transcriptContainer = document.getElementById('transcript-container');
        const transcriptSpans = transcriptContainer.querySelectorAll('span');
        let timeupdater = null;

        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING) {
                timeupdater = setInterval(updateActiveTranscript, 250);
            } else if (event.data == YT.PlayerState.PAUSED || event.data == YT.PlayerState.ENDED) {
                clearInterval(timeupdater);
            }
        }

        function setupTranscript() {
            transcriptSpans.forEach(span => {
                const startTime = parseFloat(span.getAttribute('data-start'));
                span.addEventListener('click', () => {
                    seekToTime(startTime);
                });
                span.addEventListener('keydown', (event) => {
                    if (event.key === 'Enter' || event.key === ' ') {
                        event.preventDefault();
                        seekToTime(startTime);
                    }
                });
            });
        }

        function seekToTime(time) {
            if (player && typeof player.seekTo === 'function') {
                player.seekTo(time, true);
                player.playVideo();
            }
        }

        let activeSpan = null;
        function updateActiveTranscript() {
            if (!player || typeof player.getCurrentTime !== 'function') return;
            const currentTime = player.getCurrentTime();
            let newActiveSpan = null;
            for (const span of transcriptSpans) {
                const start = parseFloat(span.dataset.start);
                const end = parseFloat(span.dataset.end);
                if (currentTime >= start && currentTime < end) {
                    newActiveSpan = span;
                    break;
                }
            }
            if (newActiveSpan !== activeSpan) {
                if (activeSpan) {
                    activeSpan.classList.remove('active-transcript');
                }
                if (newActiveSpan) {
                    newActiveSpan.classList.add('active-transcript');
                    newActiveSpan.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
                activeSpan = newActiveSpan;
            }
        }
    </script>
</body>
</html>
