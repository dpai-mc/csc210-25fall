<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 6: MIPS Arithmetic & Logic Instructions</title>
    
    <!-- CDN Links -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- Meta Comments -->
    <!-- Chosen Palette: Light background (#FDFBF8), Primary text (#383838), Primary accent (#EADDD7), Hover state (#F0EBE8) -->
    <!-- Application Structure Plan: Modular design with plug-in modules, enhanced interactivity, comprehensive MIPS instruction coverage -->
    <!-- Visualization & Content Choices: Interactive decoder, step-by-step simulator, detailed module content with examples -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    
    <!-- Embedded CSS -->
    <style>
        body {
            background-color: #FDFBF8;
            color: #383838;
            font-family: 'Inter', sans-serif;
        }
        
        .code-font {
            font-family: 'Fira Code', monospace;
        }
        
        .primary-accent {
            background-color: #EADDD7;
        }
        
        .hover-accent:hover {
            background-color: #F0EBE8;
        }
        
        .tab-active {
            background-color: #EADDD7;
            border-bottom: 2px solid #383838;
        }
        
        .code-highlight {
            background-color: #F0EBE8;
            border-left: 4px solid #EADDD7;
        }
        
        .instruction-box {
            border: 2px solid #EADDD7;
            background-color: #FDFBF8;
        }
        
        .register-display {
            background-color: #F0EBE8;
            border: 1px solid #EADDD7;
        }
        
        .module-content {
            min-height: 500px;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .instruction-table {
            border-collapse: collapse;
            font-size: 0.875rem;
        }
        
        .instruction-table th,
        .instruction-table td {
            border: 1px solid #EADDD7;
            padding: 8px;
            text-align: left;
        }
        
        .instruction-table th {
            background-color: #EADDD7;
            font-weight: 600;
        }
        
        .instruction-table tr:nth-child(even) {
            background-color: #F0EBE8;
        }
        
        .binary-display {
            font-family: 'Fira Code', monospace;
            background-color: #F0EBE8;
            border: 1px solid #EADDD7;
            padding: 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            letter-spacing: 0.5px;
        }
        
        .step-highlight {
            background-color: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 0.5rem;
            margin: 0.5rem 0;
        }
        
        @media print {
            .no-print { display: none; }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-highlight {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { background-color: #F0EBE8; }
            50% { background-color: #EADDD7; }
        }
        
        .exercise-output {
            background-color: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            padding: 1rem;
            margin-top: 1rem;
            font-family: 'Fira Code', monospace;
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="antialiased">
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded">
        Skip to main content
    </a>

    <div class="container mx-auto p-4 md:p-8 max-w-6xl">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">Week 6: MIPS Arithmetic & Logic Instructions</h1>
            <p class="text-lg text-gray-600">Interactive Learning Guide</p>
            <div class="mt-4 p-4 primary-accent rounded-lg">
                <p class="font-medium">Learning Objectives: Master R-type and I-type instructions, implement arithmetic and logical operations, understand instruction encoding, and debug MIPS programs effectively.</p>
            </div>
        </header>

        <div class="mb-8 p-4 border-2 border-gray-300 rounded-lg">
            <h3 class="font-semibold mb-2">Your Progress</h3>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-2">
                <div class="progress-item p-2 text-center rounded cursor-pointer hover-accent" data-module="1">
                    <span class="block font-medium">Module 1</span>
                    <span class="text-sm">R-Type Instructions</span>
                    <div class="progress-indicator mt-1 h-2 bg-gray-200 rounded">
                        <div class="progress-bar h-full bg-green-500 rounded" style="width: 0%"></div>
                    </div>
                </div>
                <div class="progress-item p-2 text-center rounded cursor-pointer hover-accent" data-module="2">
                    <span class="block font-medium">Module 2</span>
                    <span class="text-sm">I-Type Instructions</span>
                    <div class="progress-indicator mt-1 h-2 bg-gray-200 rounded">
                        <div class="progress-bar h-full bg-green-500 rounded" style="width: 0%"></div>
                    </div>
                </div>
                <div class="progress-item p-2 text-center rounded cursor-pointer hover-accent" data-module="3">
                    <span class="block font-medium">Module 3</span>
                    <span class="text-sm">Shift Operations</span>
                    <div class="progress-indicator mt-1 h-2 bg-gray-200 rounded">
                        <div class="progress-bar h-full bg-green-500 rounded" style="width: 0%"></div>
                    </div>
                </div>
                <div class="progress-item p-2 text-center rounded cursor-pointer hover-accent" data-module="4">
                    <span class="block font-medium">Module 4</span>
                    <span class="text-sm">Programming & Debug</span>
                    <div class="progress-indicator mt-1 h-2 bg-gray-200 rounded">
                        <div class="progress-bar h-full bg-green-500 rounded" style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <nav class="mb-8" role="tablist">
            <div class="flex flex-wrap border-b-2 border-gray-300">
                <button class="tab-button px-6 py-3 font-medium hover-accent focus:ring-2 focus:ring-blue-500" 
                        role="tab" aria-selected="true" aria-controls="overview-panel" data-tab="overview">
                    Overview
                </button>
                <button class="tab-button px-6 py-3 font-medium hover-accent focus:ring-2 focus:ring-blue-500" 
                        role="tab" aria-selected="false" aria-controls="instruction-decoder-panel" data-tab="instruction-decoder">
                    Instruction Decoder
                </button>
                <button class="tab-button px-6 py-3 font-medium hover-accent focus:ring-2 focus:ring-blue-500" 
                        role="tab" aria-selected="false" aria-controls="simulator-panel" data-tab="simulator">
                    MIPS Simulator
                </button>
                <button class="tab-button px-6 py-3 font-medium hover-accent focus:ring-2 focus:ring-blue-500" 
                        role="tab" aria-selected="false" aria-controls="exercises-panel" data-tab="exercises">
                    Practice Exercises
                </button>
                <button class="tab-button px-6 py-3 font-medium hover-accent focus:ring-2 focus:ring-blue-500" 
                        role="tab" aria-selected="false" aria-controls="reference-panel" data-tab="reference">
                    Quick Reference
                </button>
            </div>
        </nav>

        <main id="main-content">
            <div id="overview-panel" class="tab-panel fade-in" role="tabpanel">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div>
                        <h2 class="text-2xl font-bold mb-4">Learning Modules</h2>
                        <div class="space-y-4">
                            <div class="module-card p-6 border-2 border-gray-300 rounded-lg cursor-pointer hover-accent" data-module="1">
                                <h3 class="text-xl font-semibold mb-2">Module 1: R-Type Arithmetic Instructions</h3>
                                <p class="text-gray-600 mb-3">Master register-to-register operations, instruction encoding, and the complete set of R-type arithmetic and logical operations.</p>
                                <div class="flex items-center text-sm">
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded mr-2">3-4 hours</span>
                                    <span class="text-gray-500">Essential foundation</span>
                                </div>
                            </div>
                            
                            <div class="module-card p-6 border-2 border-gray-300 rounded-lg cursor-pointer hover-accent" data-module="2">
                                <h3 class="text-xl font-semibold mb-2">Module 2: I-Type Instructions & Immediate Operands</h3>
                                <p class="text-gray-600 mb-3">Understand immediate operands, sign extension, constant loading, and all I-type instruction variants.</p>
                                <div class="flex items-center text-sm">
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded mr-2">3-4 hours</span>
                                    <span class="text-gray-500">Building complexity</span>
                                </div>
                            </div>
                            
                            <div class="module-card p-6 border-2 border-gray-300 rounded-lg cursor-pointer hover-accent" data-module="3">
                                <h3 class="text-xl font-semibold mb-2">Module 3: Shift Operations & Bit Manipulation</h3>
                                <p class="text-gray-600 mb-3">Master logical and arithmetic shifts, rotation operations, and advanced bit manipulation techniques.</p>
                                <div class="flex items-center text-sm">
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded mr-2">2-3 hours</span>
                                    <span class="text-gray-500">Advanced techniques</span>
                                </div>
                            </div>
                            
                            <div class="module-card p-6 border-2 border-gray-300 rounded-lg cursor-pointer hover-accent" data-module="4">
                                <h3 class="text-xl font-semibold mb-2">Module 4: Programming & Debugging</h3>
                                <p class="text-gray-600 mb-3">Convert C to MIPS, master debugging techniques, optimize performance, and handle real-world programming scenarios.</p>
                                <div class="flex items-center text-sm">
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded mr-2">4-5 hours</span>
                                    <span class="text-gray-500">Practical application</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div id="module-content" class="border-2 border-gray-300 rounded-lg p-6 module-content">
                            <h3 class="text-xl font-semibold mb-4">Select a Module to Begin</h3>
                            <p class="text-gray-600 mb-4">Click on any module card to view detailed content, interactive demonstrations, and hands-on exercises.</p>
                            
                            <div class="mt-6 p-4 primary-accent rounded-lg">
                                <h4 class="font-semibold mb-2">Prerequisites Check</h4>
                                <ul class="space-y-1 text-sm">
                                    <li>✓ Week 5: MIPS Architecture basics completed</li>
                                    <li>✓ Binary and hexadecimal number systems</li>
                                    <li>✓ Register file understanding</li>
                                    <li>✓ Basic C programming knowledge</li>
                                </ul>
                            </div>
                            
                            <div class="mt-6 p-4 bg-blue-50 rounded-lg">
                                <h4 class="font-semibold mb-2">Learning Strategy</h4>
                                <p class="text-sm text-gray-700">Each module builds on the previous one. Complete them in order for the best learning experience. Use the simulator to test your understanding as you progress.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="instruction-decoder-panel" class="tab-panel hidden" role="tabpanel">
                <h2 class="text-2xl font-bold mb-6">Interactive Instruction Decoder</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold mb-4">Enter MIPS Instruction</h3>
                        <div class="space-y-4">
                            <div>
                                <label for="instruction-input" class="block font-medium mb-2">Assembly Instruction:</label>
                                <input type="text" id="instruction-input" 
                                       class="w-full p-3 border-2 border-gray-300 rounded code-font focus:ring-2 focus:ring-blue-500"
                                       placeholder="e.g., add $t0, $t1, $t2"
                                       aria-describedby="instruction-help">
                                <p id="instruction-help" class="text-sm text-gray-600 mt-1">Enter a MIPS assembly instruction to decode</p>
                            </div>
                            
                            <button id="decode-btn" class="w-full bg-blue-600 text-white py-3 px-6 rounded font-medium hover:bg-blue-700 focus:ring-2 focus:ring-blue-500">
                                Decode Instruction
                            </button>
                            
                            <div class="space-y-2">
                                <h4 class="font-medium">Quick Examples:</h4>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-2">
                                    <button class="example-btn px-3 py-2 text-sm border border-gray-300 rounded code-font hover-accent" data-instruction="add $t0, $t1, $t2">add $t0, $t1, $t2</button>
                                    <button class="example-btn px-3 py-2 text-sm border border-gray-300 rounded code-font hover-accent" data-instruction="addi $t0, $t1, 100">addi $t0, $t1, 100</button>
                                    <button class="example-btn px-3 py-2 text-sm border border-gray-300 rounded code-font hover-accent" data-instruction="sll $t0, $t1, 4">sll $t0, $t1, 4</button>
                                    <button class="example-btn px-3 py-2 text-sm border border-gray-300 rounded code-font hover-accent" data-instruction="and $t0, $t1, $t2">and $t0, $t1, $t2</button>
                                    <button class="example-btn px-3 py-2 text-sm border border-gray-300 rounded code-font hover-accent" data-instruction="andi $t0, $t1, 0xFF">andi $t0, $t1, 0xFF</button>
                                    <button class="example-btn px-3 py-2 text-sm border border-gray-300 rounded code-font hover-accent" data-instruction="lui $t0, 0x1234">lui $t0, 0x1234</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-xl font-semibold mb-4">Instruction Analysis</h3>
                        <div id="decode-output" class="instruction-box p-4 rounded-lg min-h-[200px]">
                            <p class="text-gray-600">Enter an instruction to see its complete breakdown including binary encoding...</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="simulator-panel" class="tab-panel hidden" role="tabpanel">
                <h2 class="text-2xl font-bold mb-6">Interactive MIPS Simulator</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-2">
                        <h3 class="text-xl font-semibold mb-4">MIPS Assembly Code</h3>
                        <textarea id="code-input" 
                                  class="w-full h-64 p-4 border-2 border-gray-300 rounded code-font text-sm focus:ring-2 focus:ring-blue-500"
                                  placeholder="# Enter your MIPS code here
# Example: Calculate (5 + 3) * 2
li $t0, 5
li $t1, 3
add $t2, $t0, $t1    # $t2 = 8
sll $t3, $t2, 1      # $t3 = 16 (multiply by 2)"
                                  aria-label="MIPS assembly code input"></textarea>
                        
                        <div class="flex flex-wrap gap-4 mt-4">
                            <button id="run-btn" class="bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 focus:ring-2 focus:ring-green-500">
                                Run All
                            </button>
                            <button id="step-btn" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 focus:ring-2 focus:ring-blue-500">
                                Step Through
                            </button>
                            <button id="reset-btn" class="bg-gray-600 text-white px-6 py-2 rounded hover:bg-gray-700 focus:ring-2 focus:ring-gray-500">
                                Reset
                            </button>
                            <button id="load-example-btn" class="bg-purple-600 text-white px-6 py-2 rounded hover:bg-purple-700 focus:ring-2 focus:ring-purple-500">
                                Load Example
                            </button>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-xl font-semibold mb-4">Registers</h3>
                        <div id="register-display" class="register-display p-4 rounded-lg text-sm code-font">
                        </div>
                        
                        <div class="mt-4">
                            <h4 class="font-semibold mb-2">Execution Status</h4>
                            <div id="execution-status" class="p-2 rounded text-sm bg-gray-100">
                                Ready to execute
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <h4 class="font-semibold mb-2">Current Instruction</h4>
                            <div id="current-instruction" class="p-2 rounded text-sm bg-gray-100 code-font">
                                None
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="exercises-panel" class="tab-panel hidden" role="tabpanel">
                <h2 class="text-2xl font-bold mb-6">Practice Exercises</h2>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold mb-4">Choose an Exercise</h3>
                        <div class="space-y-4">
                            <div class="exercise-card p-4 border-2 border-gray-300 rounded-lg cursor-pointer hover-accent" data-exercise="arithmetic">
                                <h4 class="font-semibold">Basic Arithmetic Operations</h4>
                                <p class="text-sm text-gray-600">Practice add, sub, and register operations with step-by-step verification</p>
                                <span class="inline-block mt-2 px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Beginner</span>
                            </div>
                            
                            <div class="exercise-card p-4 border-2 border-gray-300 rounded-lg cursor-pointer hover-accent" data-exercise="immediate">
                                <h4 class="font-semibold">Immediate Operations</h4>
                                <p class="text-sm text-gray-600">Work with addi, loading constants, and understanding sign extension</p>
                                <span class="inline-block mt-2 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">Intermediate</span>
                            </div>
                            
                            <div class="exercise-card p-4 border-2 border-gray-300 rounded-lg cursor-pointer hover-accent" data-exercise="bitwise">
                                <h4 class="font-semibold">Bitwise Operations</h4>
                                <p class="text-sm text-gray-600">Master and, or, xor, nor and complex bit manipulation patterns</p>
                                <span class="inline-block mt-2 px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">Intermediate</span>
                            </div>
                            
                            <div class="exercise-card p-4 border-2 border-gray-300 rounded-lg cursor-pointer hover-accent" data-exercise="shifts">
                                <h4 class="font-semibold">Shift Operations</h4>
                                <p class="text-sm text-gray-600">Practice logical and arithmetic shifts for multiplication, division, and data manipulation</p>
                                <span class="inline-block mt-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded">Advanced</span>
                            </div>
                            
                            <div class="exercise-card p-4 border-2 border-gray-300 rounded-lg cursor-pointer hover-accent" data-exercise="mixed">
                                <h4 class="font-semibold">Mixed Operations Challenge</h4>
                                <p class="text-sm text-gray-600">Combine multiple instruction types to solve complex problems</p>
                                <span class="inline-block mt-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded">Expert</span>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div id="exercise-content" class="border-2 border-gray-300 rounded-lg p-6 min-h-[400px]">
                            <h3 class="text-xl font-semibold mb-4">Select an Exercise</h3>
                            <p class="text-gray-600">Choose an exercise from the left to begin practicing. Each exercise includes guided solutions and immediate feedback.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="reference-panel" class="tab-panel hidden" role="tabpanel">
                <h2 class="text-2xl font-bold mb-6">Quick Reference</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="border-2 border-gray-300 rounded-lg p-4">
                        <h3 class="text-lg font-semibold mb-3">R-Type Instructions</h3>
                        <div class="text-sm code-font space-y-1">
                            <div><strong>add</strong> rd, rs, rt</div>
                            <div><strong>sub</strong> rd, rs, rt</div>
                            <div><strong>and</strong> rd, rs, rt</div>
                            <div><strong>or</strong> rd, rs, rt</div>
                            <div><strong>xor</strong> rd, rs, rt</div>
                            <div><strong>nor</strong> rd, rs, rt</div>
                            <div><strong>slt</strong> rd, rs, rt</div>
                            <div><strong>sll</strong> rd, rt, shamt</div>
                            <div><strong>srl</strong> rd, rt, shamt</div>
                            <div><strong>sra</strong> rd, rt, shamt</div>
                        </div>
                    </div>

                    <div class="border-2 border-gray-300 rounded-lg p-4">
                        <h3 class="text-lg font-semibold mb-3">I-Type Instructions</h3>
                        <div class="text-sm code-font space-y-1">
                            <div><strong>addi</strong> rt, rs, imm</div>
                            <div><strong>andi</strong> rt, rs, imm</div>
                            <div><strong>ori</strong> rt, rs, imm</div>
                            <div><strong>xori</strong> rt, rs, imm</div>
                            <div><strong>slti</strong> rt, rs, imm</div>
                            <div><strong>lui</strong> rt, imm</div>
                        </div>
                    </div>

                    <div class="border-2 border-gray-300 rounded-lg p-4">
                        <h3 class="text-lg font-semibold mb-3">Common Registers</h3>
                        <div class="text-sm code-font space-y-1">
                            <div><strong>$t0-$t7:</strong> Temporary</div>
                            <div><strong>$s0-$s7:</strong> Saved</div>
                            <div><strong>$a0-$a3:</strong> Arguments</div>
                            <div><strong>$v0-$v1:</strong> Return values</div>
                            <div><strong>$zero:</strong> Always 0</div>
                            <div><strong>$ra:</strong> Return address</div>
                        </div>
                    </div>
                </div>

                <div class="mt-8">
                    <h3 class="text-xl font-semibold mb-4">Instruction Formats</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="border-2 border-gray-300 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">R-Type Format</h4>
                            <div class="binary-display">
                                op(6) | rs(5) | rt(5) | rd(5) | shamt(5) | funct(6)
                            </div>
                            <p class="text-sm text-gray-600 mt-2">Used for register-to-register operations. Opcode = 0, function specifies operation.</p>
                        </div>
                        
                        <div class="border-2 border-gray-300 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">I-Type Format</h4>
                            <div class="binary-display">
                                op(6) | rs(5) | rt(5) | immediate(16)
                            </div>
                            <p class="text-sm text-gray-600 mt-2">Used for immediate operations and memory access. Immediate is sign-extended.</p>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Embedded JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- APPLICATION STATE ---
            let currentTab = 'overview';
            let currentModule = null;
            let registers = {};
            let progressData = { 1: 0, 2: 0, 3: 0, 4: 0 };
            
            // Simulator state
            let currentInstructionIndex = 0;
            let instructions = [];

            // --- COMPREHENSIVE MODULE CONTENT ---
            const moduleContent = {
                1: {
                    title: "Module 1: R-Type Arithmetic Instructions",
                    content: `
                        <div class="space-y-6">
                            <section>
                                <h3 class="text-xl font-semibold mb-4">R-Type Instruction Format Deep Dive</h3>
                                <div class="binary-display mb-4">
                                    op(6) | rs(5) | rt(5) | rd(5) | shamt(5) | funct(6)<br>
                                    000000 | source | target | dest | shift | function
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <div class="code-highlight p-4 rounded">
                                        <h4 class="font-semibold mb-2">Field Descriptions:</h4>
                                        <ul class="text-sm space-y-1">
                                            <li><strong>op:</strong> Always 000000 for R-type</li>
                                            <li><strong>rs:</strong> First source register</li>
                                            <li><strong>rt:</strong> Second source register</li>
                                            <li><strong>rd:</strong> Destination register</li>
                                            <li><strong>shamt:</strong> Shift amount (0-31)</li>
                                            <li><strong>funct:</strong> Function code (operation)</li>
                                        </ul>
                                    </div>
                                    <div class="code-highlight p-4 rounded">
                                        <h4 class="font-semibold mb-2">Key Characteristics:</h4>
                                        <ul class="text-sm space-y-1">
                                            <li>All operands are registers</li>
                                            <li>Result stored in rd register</li>
                                            <li>32-bit arithmetic operations</li>
                                            <li>Two's complement representation</li>
                                        </ul>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Arithmetic Operations</h3>
                                <table class="instruction-table w-full mb-4">
                                    <thead>
                                        <tr>
                                            <th>Instruction</th>
                                            <th>Function Code</th>
                                            <th>Operation</th>
                                            <th>Example</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="code-font">add</td>
                                            <td class="code-font">100000</td>
                                            <td>Addition with overflow</td>
                                            <td class="code-font">add $t0, $t1, $t2</td>
                                        </tr>
                                        <tr>
                                            <td class="code-font">addu</td>
                                            <td class="code-font">100001</td>
                                            <td>Addition without overflow</td>
                                            <td class="code-font">addu $t0, $t1, $t2</td>
                                        </tr>
                                        <tr>
                                            <td class="code-font">sub</td>
                                            <td class="code-font">100010</td>
                                            <td>Subtraction with overflow</td>
                                            <td class="code-font">sub $t0, $t1, $t2</td>
                                        </tr>
                                        <tr>
                                            <td class="code-font">subu</td>
                                            <td class="code-font">100011</td>
                                            <td>Subtraction without overflow</td>
                                            <td class="code-font">subu $t0, $t1, $t2</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Logical Operations</h3>
                                <table class="instruction-table w-full mb-4">
                                    <thead>
                                        <tr>
                                            <th>Instruction</th>
                                            <th>Function Code</th>
                                            <th>Operation</th>
                                            <th>Truth Table</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="code-font">and</td>
                                            <td class="code-font">100100</td>
                                            <td>Bitwise AND</td>
                                            <td>1 & 1 = 1, else 0</td>
                                        </tr>
                                        <tr>
                                            <td class="code-font">or</td>
                                            <td class="code-font">100101</td>
                                            <td>Bitwise OR</td>
                                            <td>0 | 0 = 0, else 1</td>
                                        </tr>
                                        <tr>
                                            <td class="code-font">xor</td>
                                            <td class="code-font">100110</td>
                                            <td>Bitwise XOR</td>
                                            <td>a ⊕ b = a != b</td>
                                        </tr>
                                        <tr>
                                            <td class="code-font">nor</td>
                                            <td class="code-font">100111</td>
                                            <td>Bitwise NOR</td>
                                            <td>~(a | b)</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Comparison Operations</h3>
                                <div class="code-highlight p-4 rounded mb-4">
                                    <h4 class="font-semibold mb-2">Set Less Than (slt)</h4>
                                    <div class="code-font text-sm mb-2">slt $rd, $rs, $rt</div>
                                    <p class="text-sm">Sets $rd = 1 if $rs < $rt (signed), else $rd = 0</p>
                                    <div class="mt-2 text-sm">
                                        <strong>Example:</strong><br>
                                        <code>li $t1, -5</code><br>
                                        <code>li $t2, 3</code><br>
                                        <code>slt $t0, $t1, $t2  # $t0 = 1 (since -5 < 3)</code>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Practical Example: Calculator Operations</h3>
                                <div class="step-highlight">
                                    <h4 class="font-semibold mb-2">Problem: Calculate (a + b) - (c & d)</h4>
                                    <div class="code-font text-sm space-y-1">
                                        <div># Assume: a=$s0, b=$s1, c=$s2, d=$s3</div>
                                        <div>add  $t0, $s0, $s1    # $t0 = a + b</div>
                                        <div>and  $t1, $s2, $s3    # $t1 = c & d</div>
                                        <div>sub  $t2, $t0, $t1    # $t2 = (a+b) - (c&d)</div>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Common Pitfalls and Best Practices</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="border border-red-300 bg-red-50 p-4 rounded">
                                        <h4 class="font-semibold text-red-800 mb-2">Common Mistakes:</h4>
                                        <ul class="text-sm space-y-1">
                                            <li>Confusing source and destination order</li>
                                            <li>Using add when addu is needed</li>
                                            <li>Forgetting overflow can occur</li>
                                            <li>Mixing signed/unsigned operations</li>
                                        </ul>
                                    </div>
                                    <div class="border border-green-300 bg-green-50 p-4 rounded">
                                        <h4 class="font-semibold text-green-800 mb-2">Best Practices:</h4>
                                        <ul class="text-sm space-y-1">
                                            <li>Use descriptive register names</li>
                                            <li>Comment complex operations</li>
                                            <li>Test with edge cases (0, -1, max values)</li>
                                            <li>Use simulator to verify results</li>
                                        </ul>
                                    </div>
                                </div>
                            </section>

                            <div class="mt-6">
                                <button class="complete-activity bg-green-600 text-white px-6 py-3 rounded hover:bg-green-700" data-module="1">Complete Module 1</button>
                            </div>
                        </div>`
                },
                2: {
                    title: "Module 2: I-Type Instructions & Immediate Operands",
                    content: `
                        <div class="space-y-6">
                            <section>
                                <h3 class="text-xl font-semibold mb-4">I-Type Instruction Format</h3>
                                <div class="binary-display mb-4">
                                    op(6) | rs(5) | rt(5) | immediate(16)<br>
                                    opcode | source | target | constant value
                                </div>
                                <div class="code-highlight p-4 rounded mb-4">
                                    <h4 class="font-semibold mb-2">Key Differences from R-Type:</h4>
                                    <ul class="text-sm space-y-1">
                                        <li>Unique opcode for each instruction (not 000000)</li>
                                        <li>16-bit immediate value instead of second source register</li>
                                        <li>rt is the destination (not rd)</li>
                                        <li>No function field needed</li>
                                    </ul>
                                </div>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Sign Extension Explained</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                    <div class="code-highlight p-4 rounded">
                                        <h4 class="font-semibold mb-2">Positive Immediate (100)</h4>
                                        <div class="code-font text-xs space-y-1">
                                            <div>16-bit: 0000 0000 0110 0100</div>
                                            <div>32-bit: 0000 0000 0000 0000 0000 0000 0110 0100</div>
                                            <div class="text-green-600">Value remains: +100</div>
                                        </div>
                                    </div>
                                    <div class="code-highlight p-4 rounded">
                                        <h4 class="font-semibold mb-2">Negative Immediate (-100)</h4>
                                        <div class="code-font text-xs space-y-1">
                                            <div>16-bit: 1111 1111 1001 1100</div>
                                            <div>32-bit: 1111 1111 1111 1111 1111 1111 1001 1100</div>
                                            <div class="text-green-600">Value remains: -100</div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Arithmetic Immediate Instructions</h3>
                                <table class="instruction-table w-full mb-4">
                                    <thead>
                                        <tr>
                                            <th>Instruction</th>
                                            <th>Opcode</th>
                                            <th>Operation</th>
                                            <th>Range</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="code-font">addi</td>
                                            <td class="code-font">001000</td>
                                            <td>Add immediate</td>
                                            <td>-32,768 to +32,767</td>
                                        </tr>
                                        <tr>
                                            <td class="code-font">addiu</td>
                                            <td class="code-font">001001</td>
                                            <td>Add immediate unsigned</td>
                                            <td>0 to 65,535</td>
                                        </tr>
                                        <tr>
                                            <td class="code-font">slti</td>
                                            <td class="code-font">001010</td>
                                            <td>Set less than immediate</td>
                                            <td>-32,768 to +32,767</td>
                                        </tr>
                                        <tr>
                                            <td class="code-font">sltiu</td>
                                            <td class="code-font">001011</td>
                                            <td>Set less than immediate unsigned</td>
                                            <td>0 to 65,535</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Logical Immediate Instructions</h3>
                                <div class="code-highlight p-4 rounded mb-4">
                                    <h4 class="font-semibold mb-2">Zero Extension vs Sign Extension</h4>
                                    <p class="text-sm mb-2">Logical operations use ZERO extension, not sign extension!</p>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <h5 class="font-medium">andi $t0, $t1, 0xFF</h5>
                                            <div class="code-font text-xs">
                                                16-bit: 0000 0000 1111 1111<br>
                                                32-bit: 0000 0000 0000 0000 0000 0000 1111 1111
                                            </div>
                                        </div>
                                        <div>
                                            <h5 class="font-medium">ori $t0, $t1, 0x8000</h5>
                                            <div class="code-font text-xs">
                                                16-bit: 1000 0000 0000 0000<br>
                                                32-bit: 0000 0000 0000 0000 1000 0000 0000 0000
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <table class="instruction-table w-full mb-4">
                                    <thead>
                                        <tr>
                                            <th>Instruction</th>
                                            <th>Opcode</th>
                                            <th>Extension Type</th>
                                            <th>Common Use</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="code-font">andi</td>
                                            <td class="code-font">001100</td>
                                            <td>Zero</td>
                                            <td>Masking bits</td>
                                        </tr>
                                        <tr>
                                            <td class="code-font">ori</td>
                                            <td class="code-font">001101</td>
                                            <td>Zero</td>
                                            <td>Setting bits</td>
                                        </tr>
                                        <tr>
                                            <td class="code-font">xori</td>
                                            <td class="code-font">001110</td>
                                            <td>Zero</td>
                                            <td>Toggling bits</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Load Upper Immediate (LUI)</h3>
                                <div class="step-highlight">
                                    <h4 class="font-semibold mb-2">lui $rt, immediate</h4>
                                    <p class="text-sm mb-2">Loads 16-bit immediate into upper 16 bits, zeros lower 16 bits</p>
                                    <div class="code-font text-sm space-y-1">
                                        <div>lui $t0, 0x1234      # $t0 = 0x12340000</div>
                                        <div>ori $t0, $t0, 0x5678 # $t0 = 0x12345678</div>
                                    </div>
                                    <p class="text-sm mt-2">This is how to load any 32-bit constant!</p>
                                </div>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Practical Examples</h3>
                                <div class="space-y-4">
                                    <div class="step-highlight">
                                        <h4 class="font-semibold mb-2">Example 1: Increment by 10</h4>
                                        <div class="code-font text-sm">
                                            addi $t0, $t0, 10    # $t0 = $t0 + 10
                                        </div>
                                    </div>
                                    <div class="step-highlight">
                                        <h4 class="font-semibold mb-2">Example 2: Extract Lower Byte</h4>
                                        <div class="code-font text-sm">
                                            andi $t1, $t0, 0xFF  # Keep only bits 0-7
                                        </div>
                                    </div>
                                    <div class="step-highlight">
                                        <h4 class="font-semibold mb-2">Example 3: Set Bit 15</h4>
                                        <div class="code-font text-sm">
                                            ori $t1, $t0, 0x8000 # Set bit 15 to 1
                                        </div>
                                    </div>
                                    <div class="step-highlight">
                                        <h4 class="font-semibold mb-2">Example 4: Load Large Constant</h4>
                                        <div class="code-font text-sm space-y-1">
                                            <div>lui $t0, 0xDEAD   # Upper: 0xDEAD0000</div>
                                            <div>ori $t0, $t0, 0xBEEF # Result: 0xDEADBEEF</div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Optimization Techniques</h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="border border-blue-300 bg-blue-50 p-4 rounded">
                                        <h4 class="font-semibold text-blue-800 mb-2">Efficient Patterns:</h4>
                                        <ul class="text-sm space-y-1">
                                            <li>Use addi instead of li + add</li>
                                            <li>Combine lui + ori for constants</li>
                                            <li>Use andi for fast modulo powers of 2</li>
                                            <li>Use xori to toggle specific bits</li>
                                        </ul>
                                    </div>
                                    <div class="border border-yellow-300 bg-yellow-50 p-4 rounded">
                                        <h4 class="font-semibold text-yellow-800 mb-2">Performance Tips:</h4>
                                        <ul class="text-sm space-y-1">
                                            <li>Immediate operations are faster than memory</li>
                                            <li>Use small immediates when possible</li>
                                            <li>Consider sign extension effects</li>
                                            <li>Minimize register pressure</li>
                                        </ul>
                                    </div>
                                </div>
                            </section>

                            <div class="mt-6">
                                <button class="complete-activity bg-green-600 text-white px-6 py-3 rounded hover:bg-green-700" data-module="2">Complete Module 2</button>
                            </div>
                        </div>`
                },
                3: {
                    title: "Module 3: Shift Operations & Bit Manipulation",
                    content: `
                        <div class="space-y-6">
                            <section>
                                <h3 class="text-xl font-semibold mb-4">Understanding Shift Operations</h3>
                                <div class="code-highlight p-4 rounded mb-4">
                                    <h4 class="font-semibold mb-2">Why Shifts Matter:</h4>
                                    <ul class="text-sm space-y-1">
                                        <li>Fastest way to multiply/divide by powers of 2</li>
                                        <li>Essential for bit manipulation and data packing</li>
                                        <li>Used in address calculations and data alignment</li>
                                        <li>Critical for implementing efficient algorithms</li>
                                    </ul>
                                </div>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Shift Left Logical (SLL)</h3>
                                <div class="step-highlight">
                                    <h4 class="font-semibold mb-2">sll $rd, $rt, shamt</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <h5 class="font-medium mb-2">Operation:</h5>
                                            <ul class="text-sm space-y-1">
                                                <li>Shifts bits left by shamt positions</li>
                                                <li>Fills with zeros from the right</li>
                                                <li>Multiplies by 2^shamt</li>
                                                <li>Can cause overflow</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <h5 class="font-medium mb-2">Example: sll $t0, $t1, 2</h5>
                                            <div class="code-font text-xs space-y-1">
                                                <div>Before: 0000 0000 0000 0101 (5)</div>
                                                <div>After:  0000 0000 0001 0100 (20)</div>
                                                <div class="text-green-600">Result: 5 * 4 = 20</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Shift Right Logical (SRL)</h3>
                                <div class="step-highlight">
                                    <h4 class="font-semibold mb-2">srl $rd, $rt, shamt</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <h5 class="font-medium mb-2">Operation:</h5>
                                            <ul class="text-sm space-y-1">
                                                <li>Shifts bits right by shamt positions</li>
                                                <li>Fills with zeros from the left</li>
                                                <li>Unsigned divide by 2^shamt</li>
                                                <li>Always positive result</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <h5 class="font-medium mb-2">Example: srl $t0, $t1, 2</h5>
                                            <div class="code-font text-xs space-y-1">
                                                <div>Before: 0000 0000 0001 0100 (20)</div>
                                                <div>After:  0000 0000 0000 0101 (5)</div>
                                                <div class="text-green-600">Result: 20 / 4 = 5</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Shift Right Arithmetic (SRA)</h3>
                                <div class="step-highlight">
                                    <h4 class="font-semibold mb-2">sra $rd, $rt, shamt</h4>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <h5 class="font-medium mb-2">Operation:</h5>
                                            <ul class="text-sm space-y-1">
                                                <li>Shifts bits right by shamt positions</li>
                                                <li>Fills with sign bit from the left</li>
                                                <li>Signed divide by 2^shamt</li>
                                                <li>Preserves sign for negative numbers</li>
                                            </ul>
                                        </div>
                                        <div>
                                            <h5 class="font-medium mb-2">Example: sra $t0, $t1, 2</h5>
                                            <div class="code-font text-xs space-y-1">
                                                <div>Before: 1111 1111 1110 1100 (-20)</div>
                                                <div>After:  1111 1111 1111 1011 (-5)</div>
                                                <div class="text-green-600">Result: -20 / 4 = -5</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Variable Shifts</h3>
                                <table class="instruction-table w-full mb-4">
                                    <thead>
                                        <tr>
                                            <th>Instruction</th>
                                            <th>Format</th>
                                            <th>Shift Amount Source</th>
                                            <th>Use Case</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="code-font">sllv</td>
                                            <td class="code-font">sllv $rd, $rt, $rs</td>
                                            <td>Register $rs (bits 0-4)</td>
                                            <td>Dynamic left shifts</td>
                                        </tr>
                                        <tr>
                                            <td class="code-font">srlv</td>
                                            <td class="code-font">srlv $rd, $rt, $rs</td>
                                            <td>Register $rs (bits 0-4)</td>
                                            <td>Dynamic right shifts (unsigned)</td>
                                        </tr>
                                        <tr>
                                            <td class="code-font">srav</td>
                                            <td class="code-font">srav $rd, $rt, $rs</td>
                                            <td>Register $rs (bits 0-4)</td>
                                            <td>Dynamic right shifts (signed)</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </section>

                            <section>
                                <h3 class="text-xl font-semibold mb-4">Bit Manipulation Techniques</h3>
                                <div class="space-y-4">
                                    <div class="step-highlight">
                                        <h4 class="font-semibold mb-2">Extract Specific Bits</h4>
                                        <div class="code-font text-sm space-y-1">
                                            <div># Extract bits 8-15 from $t0</div>
                                            <div>srl $t1, $t0, 8      # Shift right 8 positions</div>
                                            <div>andi $t1, $t1, 0xFF # Mask to keep only 8 bits</div>
                                        </div>
                                    </div>
                                    <div class="step-highlight">
                                        <h4 class="font-semibold mb-2">Set Specific Bits</h4>
                                        <div class="code-font text-sm space-y-1">
                                            <div># Set bit 10 in $t0</div>
                                            <div>ori $t0, $t0, 0x400  # 0x400 = 2^10</div>
                                        </div>
                                    </div>
                                    <div class="step-highlight">
                                        <h4 class="font-semibold mb-2">Clear Specific Bits</h4>
                                        <div class="code-font text-sm space-y-1">
                                            <div># Clear bits 4-7 in $t0</div>
                                            <div>andi $t0, $t0, 0xFF0F # Mask with 0s in positions 4-7
