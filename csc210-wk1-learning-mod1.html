<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSC210 Module 1: The Big Picture</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8fafc;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 12px;
            text-align: center;
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 0.5rem;
        }

        .module-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Progress Bar */
        .progress-container {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e5e7eb;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #16a34a 0%, #22c55e 100%);
            border-radius: 5px;
            transition: width 0.8s ease;
            width: 0%;
        }

        /* Content Sections */
        .content-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: #1e3a8a;
            font-size: 1.8rem;
            margin-bottom: 1rem;
            border-bottom: 3px solid #e5e7eb;
            padding-bottom: 0.5rem;
        }

        h3 {
            color: #374151;
            font-size: 1.4rem;
            margin: 1.5rem 0 1rem 0;
        }

        h4 {
            color: #4b5563;
            font-size: 1.2rem;
            margin: 1rem 0 0.5rem 0;
        }

        /* Interactive Computer Components Explorer - FIXED LAYOUT */
        .computer-explorer {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid #0ea5e9;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
            z-index: 1;
        }

        .computer-diagram {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 1.5rem 0;
            /* Ensure enough vertical spacing for detail cards */
            margin-bottom: 8rem;
        }

        .component {
            background: white;
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            z-index: 10;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .component:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            border-color: #3b82f6;
            z-index: 20;
        }

        .component.active {
            border-color: #1e40af;
            background: #dbeafe;
            transform: scale(1.02);
            z-index: 50;
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
        }

        .component-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .component-name {
            font-weight: bold;
            color: #1e3a8a;
            margin-bottom: 0.3rem;
        }

        .component-role {
            font-size: 0.9rem;
            color: #6b7280;
        }

        .component-details {
            position: absolute;
            top: 100%;
            left: -2px;
            right: -2px;
            background: #1e3a8a;
            color: white;
            padding: 1.5rem;
            border-radius: 0 0 8px 8px;
            font-size: 0.9rem;
            line-height: 1.5;
            opacity: 0;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 100;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.25);
            border: 2px solid #1e40af;
            border-top: none;
            /* Ensure text is readable */
            font-weight: 500;
        }

        .component.active .component-details {
            opacity: 1;
            transform: translateY(0);
        }

        /* Action buttons container - positioned below components with proper spacing */
        .action-buttons-container {
            position: relative;
            z-index: 5;
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 2rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Abstraction Layers Visualization */
        .abstraction-layers {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            position: relative;
            z-index: 1;
        }

        .layer {
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 1rem;
            margin: 0.5rem 0;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            z-index: 5;
        }

        .layer:hover {
            background: #f9fafb;
            border-color: #9ca3af;
            z-index: 10;
        }

        .layer.active {
            background: #e0f2fe;
            border-color: #0284c7;
            z-index: 15;
        }

        .layer-title {
            font-weight: bold;
            color: #1e3a8a;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .layer-description {
            margin-top: 0.5rem;
            color: #6b7280;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .layer.active .layer-description {
            max-height: 200px;
        }

        /* Quiz Components */
        .quiz-section {
            background: #f0fdf4;
            border: 2px solid #16a34a;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .question {
            margin-bottom: 2rem;
        }

        .question-text {
            font-weight: bold;
            margin-bottom: 1rem;
            color: #166534;
        }

        .options {
            list-style: none;
            padding: 0;
        }

        .option {
            background: white;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            padding: 1rem;
            margin: 0.5rem 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            border-color: #9ca3af;
            background: #f9fafb;
        }

        .option.selected {
            border-color: #3b82f6;
            background: #dbeafe;
        }

        .option.correct {
            border-color: #16a34a;
            background: #dcfce7;
        }

        .option.incorrect {
            border-color: #ef4444;
            background: #fee2e2;
        }

        .feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 8px;
            display: none;
        }

        .feedback.correct {
            background: #dcfce7;
            color: #166534;
            border: 1px solid #16a34a;
        }

        .feedback.incorrect {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #ef4444;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(30, 58, 138, 0.3);
        }

        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
            border: 1px solid #d1d5db;
        }

        .btn-secondary:hover {
            background: #e5e7eb;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Video Container */
        .video-container {
            background: #1f2937;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .video-placeholder {
            background: #374151;
            border-radius: 8px;
            padding: 3rem;
            color: white;
            margin-bottom: 1rem;
        }

        .video-controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        /* Reflection Section */
        .reflection-section {
            background: #faf5ff;
            border: 2px solid #a855f7;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .reflection-prompt {
            font-weight: bold;
            color: #7c3aed;
            margin-bottom: 1rem;
        }

        .reflection-input {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
        }

        .reflection-input:focus {
            outline: 2px solid #3b82f6;
            border-color: #3b82f6;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            h1 {
                font-size: 1.8rem;
            }

            .computer-diagram {
                grid-template-columns: 1fr;
                gap: 2rem;
                margin-bottom: 3rem;
            }

            .component {
                min-height: auto;
            }

            .component-details {
                position: static;
                opacity: 1;
                transform: none;
                margin-top: 1rem;
                border-radius: 8px;
                border: 2px solid #1e40af;
                z-index: auto;
            }

            .component.active .component-details {
                display: block;
            }

            .action-buttons {
                flex-direction: column;
            }

            .action-buttons-container {
                margin-top: 1rem;
            }
        }

        @media (max-width: 480px) {
            .computer-diagram {
                gap: 1.5rem;
                margin-bottom: 2rem;
            }
            
            .component {
                padding: 0.8rem;
            }
            
            .component-details {
                padding: 1rem;
                font-size: 0.85rem;
            }
        }

        /* Accessibility */
        .btn:focus,
        .component:focus,
        .layer:focus,
        .option:focus {
            outline: 3px solid #3b82f6;
            outline-offset: 2px;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .component {
                border-width: 3px;
            }
            
            .component.active {
                border-width: 4px;
            }
            
            .component-details {
                border-width: 3px;
            }
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            .component,
            .component-details,
            .btn,
            .layer {
                transition: none;
            }
            
            .component:hover,
            .component.active {
                transform: none;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Module 1: The Big Picture</h1>
            <p class="module-subtitle">Foundation Concepts & Abstraction Layers • Estimated Time: 2 hours</p>
            <div style="margin-top: 1rem;">
                <button class="btn btn-secondary" onclick="returnToPlatform()" style="font-size: 0.9rem; padding: 0.5rem 1rem;">
                    ← Return to Learning Platform
                </button>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Progress Tracking -->
        <div class="progress-container">
            <div class="progress-header">
                <span style="font-weight: bold; color: #1e3a8a;">Module 1 Progress (This Session)</span>
                <span id="progress-text">0% Complete</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <p style="font-size: 0.9rem; color: #6b7280; margin-top: 0.5rem;">
                ℹ Progress resets when you close your browser. Download your reflection before leaving.
            </p>
        </div>

        <!-- Introduction Video Section -->
        <section class="content-section">
            <h2>🎥 Welcome Video</h2>
            <div class="video-container">
                <div class="video-placeholder">
                    <h3 style="margin-bottom: 1rem;">Course Introduction & Overview</h3>
                    <p style="margin-bottom: 1rem;">Duration: 15 minutes</p>
                    <div style="font-size: 4rem; margin: 1rem 0;">▶️</div>
                    <p style="font-size: 0.9rem; opacity: 0.8;">Click play to start the introduction video</p>
                </div>
                <div class="video-controls">
                    <button class="btn btn-primary" onclick="playVideo('intro')">
                        ▶️ Play Video
                    </button>
                    <button class="btn btn-secondary" onclick="showTranscript('intro')">
                        📄 View Transcript
                    </button>
                </div>
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="completeSection('video')" id="video-complete-btn" disabled>
                    ✅ Mark Video Complete
                </button>
            </div>
        </section>

        <!-- Interactive Computer Components Explorer -->
        <section class="content-section">
            <h2>🖥️ Interactive Computer Components Explorer</h2>
            <p>Click on each component to learn about its role in a computer system. Understanding these components helps you see how they work together to execute programs.</p>
            
            <div class="computer-explorer">
                <h3 style="text-align: center; color: #0ea5e9; margin-bottom: 1rem;">Major Computer Components</h3>
                <div class="computer-diagram">
                    <div class="component" tabindex="0" data-component="cpu" onclick="exploreComponent('cpu')" 
                         role="button" aria-describedby="cpu-desc" aria-expanded="false">
                        <div class="component-icon">🧠</div>
                        <div class="component-name">CPU</div>
                        <div class="component-role">Central Processing Unit</div>
                        <div class="component-details" id="cpu-desc" role="region" aria-live="polite">
                            The "brain" of the computer that executes instructions. Contains the ALU (Arithmetic Logic Unit) and Control Unit. Processes data and coordinates all other components.
                        </div>
                    </div>

                    <div class="component" tabindex="0" data-component="memory" onclick="exploreComponent('memory')"
                         role="button" aria-describedby="memory-desc" aria-expanded="false">
                        <div class="component-icon">💾</div>
                        <div class="component-name">Memory</div>
                        <div class="component-role">RAM & Storage</div>
                        <div class="component-details" id="memory-desc" role="region" aria-live="polite">
                            Stores programs and data. RAM provides fast, temporary storage for running programs. Storage devices provide permanent data retention.
                        </div>
                    </div>

                    <div class="component" tabindex="0" data-component="io" onclick="exploreComponent('io')"
                         role="button" aria-describedby="io-desc" aria-expanded="false">
                        <div class="component-icon">🔌</div>
                        <div class="component-name">I/O Devices</div>
                        <div class="component-role">Input & Output</div>
                        <div class="component-details" id="io-desc" role="region" aria-live="polite">
                            Interfaces between humans and computers. Input devices (keyboard, mouse) send data in. Output devices (monitor, speakers) present results.
                        </div>
                    </div>

                    <div class="component" tabindex="0" data-component="bus" onclick="exploreComponent('bus')"
                         role="button" aria-describedby="bus-desc" aria-expanded="false">
                        <div class="component-icon">🚌</div>
                        <div class="component-name">System Bus</div>
                        <div class="component-role">Data Highway</div>
                        <div class="component-details" id="bus-desc" role="region" aria-live="polite">
                            Connects all components together. Consists of data bus (carries information), address bus (specifies locations), and control bus (coordinates operations).
                        </div>
                    </div>

                    <div class="component" tabindex="0" data-component="motherboard" onclick="exploreComponent('motherboard')"
                         role="button" aria-describedby="motherboard-desc" aria-expanded="false">
                        <div class="component-icon">🔧</div>
                        <div class="component-name">Motherboard</div>
                        <div class="component-role">Main Circuit Board</div>
                        <div class="component-details" id="motherboard-desc" role="region" aria-live="polite">
                            The foundation that connects all components. Contains slots, sockets, and circuits that allow components to communicate and receive power.
                        </div>
                    </div>

                    <div class="component" tabindex="0" data-component="power" onclick="exploreComponent('power')"
                         role="button" aria-describedby="power-desc" aria-expanded="false">
                        <div class="component-icon">⚡</div>
                        <div class="component-name">Power Supply</div>
                        <div class="component-role">Energy Provider</div>
                        <div class="component-details" id="power-desc" role="region" aria-live="polite">
                            Converts AC power from the wall outlet to DC power that computer components need. Provides stable, regulated power to all system components.
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons-container">
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="completeSection('components')" id="components-complete-btn" disabled>
                            ✅ Complete Component Exploration
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Abstraction Layers -->
        <section class="content-section">
            <h2>🗗️ Abstraction Layers</h2>
            <p>Computers work through layers of abstraction - each layer hides the complexity of the layer below it. Click each layer to explore how they build upon each other.</p>
            
            <div class="abstraction-layers">
                <div class="layer" tabindex="0" data-layer="applications" onclick="exploreLayer('applications')"
                     role="button" aria-expanded="false">
                    <div class="layer-title">
                        <span>🖥️ Applications & User Programs</span>
                        <span>▼</span>
                    </div>
                    <div class="layer-description">
                        The software you use daily - web browsers, games, word processors. These programs are written in high-level languages and focus on user functionality rather than hardware details.
                    </div>
                </div>

                <div class="layer" tabindex="0" data-layer="highlevel" onclick="exploreLayer('highlevel')"
                     role="button" aria-expanded="false">
                    <div class="layer-title">
                        <span>📝 High-Level Languages (Java, Python, C++)</span>
                        <span>▼</span>
                    </div>
                    <div class="layer-description">
                        Programming languages that are closer to human language. They provide abstractions like variables, functions, and objects that make programming easier but must be translated to lower levels.
                    </div>
                </div>

                <div class="layer" tabindex="0" data-layer="assembly" onclick="exploreLayer('assembly')"
                     role="button" aria-expanded="false">
                    <div class="layer-title">
                        <span>⚙️ Assembly Language & Machine Code</span>
                        <span>▼</span>
                    </div>
                    <div class="layer-description">
                        Low-level languages that directly correspond to processor instructions. Assembly uses mnemonics like "ADD" and "MOV" while machine code is pure binary. This is what we'll study extensively in this course.
                    </div>
                </div>

                <div class="layer" tabindex="0" data-layer="microarch" onclick="exploreLayer('microarch')"
                     role="button" aria-expanded="false">
                    <div class="layer-title">
                        <span>🔧 Microarchitecture & Hardware</span>
                        <span>▼</span>
                    </div>
                    <div class="layer-description">
                        The physical implementation of the processor - how instructions are actually executed using registers, ALUs, and control units. This includes concepts like pipelining and caching.
                    </div>
                </div>

                <div class="layer" tabindex="0" data-layer="digital" onclick="exploreLayer('digital')"
                     role="button" aria-expanded="false">
                    <div class="layer-title">
                        <span>🚥 Digital Logic & Gates</span>
                        <span>▼</span>
                    </div>
                    <div class="layer-description">
                        Boolean logic implemented with transistors. AND, OR, NOT gates combine to create more complex circuits like adders and multiplexers. Everything ultimately reduces to switches that are either on or off.
                    </div>
                </div>

                <div class="layer" tabindex="0" data-layer="physics" onclick="exploreLayer('physics')"
                     role="button" aria-expanded="false">
                    <div class="layer-title">
                        <span>⚛️ Physics & Transistors</span>
                        <span>▼</span>
                    </div>
                    <div class="layer-description">
                        The fundamental physics of semiconductors and transistors. Billions of tiny switches made from silicon that can be turned on or off by controlling electrical signals. This is where the digital world meets the physical world.
                    </div>
                </div>

                <div class="action-buttons-container">
                    <div class="action-buttons">
                        <button class="btn btn-primary" onclick="completeSection('layers')" id="layers-complete-btn" disabled>
                            ✅ Complete Abstraction Layers
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Knowledge Check Quiz -->
        <section class="content-section">
            <h2>🧠 Knowledge Check Quiz</h2>
            <div class="quiz-section">
                <div class="question" data-question="1">
                    <div class="question-text">1. Which computer component is often called the "brain" of the computer?</div>
                    <ul class="options">
                        <li class="option" data-answer="a" onclick="selectAnswer(1, 'a')" tabindex="0" role="radio">A) Memory (RAM)</li>
                        <li class="option" data-answer="b" onclick="selectAnswer(1, 'b')" tabindex="0" role="radio">B) Central Processing Unit (CPU)</li>
                        <li class="option" data-answer="c" onclick="selectAnswer(1, 'c')" tabindex="0" role="radio">C) Hard Drive</li>
                        <li class="option" data-answer="d" onclick="selectAnswer(1, 'd')" tabindex="0" role="radio">D) Motherboard</li>
                    </ul>
                    <div class="feedback" id="feedback-1"></div>
                </div>

                <div class="question" data-question="2">
                    <div class="question-text">2. What is the main purpose of abstraction layers in computer systems?</div>
                    <ul class="options">
                        <li class="option" data-answer="a" onclick="selectAnswer(2, 'a')" tabindex="0" role="radio">A) To make computers run faster</li>
                        <li class="option" data-answer="b" onclick="selectAnswer(2, 'b')" tabindex="0" role="radio">B) To hide complexity and make systems easier to understand and use</li>
                        <li class="option" data-answer="c" onclick="selectAnswer(2, 'c')" tabindex="0" role="radio">C) To reduce the cost of manufacturing</li>
                        <li class="option" data-answer="d" onclick="selectAnswer(2, 'd')" tabindex="0" role="radio">D) To prevent unauthorized access</li>
                    </ul>
                    <div class="feedback" id="feedback-2"></div>
                </div>

                <div class="question" data-question="3">
                    <div class="question-text">3. Which layer is closest to the actual hardware?</div>
                    <ul class="options">
                        <li class="option" data-answer="a" onclick="selectAnswer(3, 'a')" tabindex="0" role="radio">A) High-level programming languages</li>
                        <li class="option" data-answer="b" onclick="selectAnswer(3, 'b')" tabindex="0" role="radio">B) Application software</li>
                        <li class="option" data-answer="c" onclick="selectAnswer(3, 'c')" tabindex="0" role="radio">C) Digital logic and transistors</li>
                        <li class="option" data-answer="d" onclick="selectAnswer(3, 'd')" tabindex="0" role="radio">D) Operating system</li>
                    </ul>
                    <div class="feedback" id="feedback-3"></div>
                </div>

                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="submitQuiz()" id="quiz-submit-btn" disabled>
                        📊 Submit Quiz
                    </button>
                    <button class="btn btn-secondary" onclick="resetQuiz()">
                        🔄 Reset Quiz
                    </button>
                </div>
            </div>
        </section>

        <!-- Reflection Section -->
        <section class="content-section">
            <h2>💭 Module 1 Reflection</h2>
            <div class="reflection-section">
                <div class="reflection-prompt">
                    <strong>Module 1 Reflection Question:</strong> Think about a smartphone or computer you use regularly. Can you identify examples of the different abstraction layers we discussed? How does understanding these layers change your perspective on how technology works?
                </div>
                <div style="background: #e0f2fe; border: 1px solid #0284c7; border-radius: 6px; padding: 1rem; margin: 1rem 0; font-size: 0.9rem;">
                    <strong>💡 Important:</strong> Download your reflection response as a text file. You'll need to combine all module reflections for your comprehensive reflection assignment in Module 4.
                </div>
                <textarea 
                    class="reflection-input" 
                    id="reflection-text"
                    placeholder="Share your thoughts here... Consider specific examples like how touching an app icon eventually causes transistors to switch, or how a high-level programming language like the one used to create your favorite app ultimately becomes machine code."
                    oninput="updateReflection()"
                    aria-label="Module 1 reflection response text area">
                </textarea>
                <div class="action-buttons">
                    <button class="btn btn-primary" onclick="downloadModuleReflection()">
                        💾 Download Module 1 Reflection
                    </button>
                    <button class="btn btn-secondary" onclick="copyReflectionToClipboard()">
                        📋 Copy to Clipboard
                    </button>
                    <button class="btn btn-primary" onclick="completeSection('reflection')" id="reflection-complete-btn" disabled>
                        ✅ Mark Reflection Complete
                    </button>
                </div>
            </div>
        </section>

        <!-- Module Completion -->
        <section class="content-section">
            <h2>🎉 Module 1 Complete!</h2>
            <p>Congratulations! You've completed Module 1: The Big Picture. You should now understand:</p>
            <ul style="margin: 1rem 0; padding-left: 2rem;">
                <li>The major components of a computer system and their roles</li>
                <li>How abstraction layers hide complexity and enable modern computing</li>
                <li>The relationship between high-level programs and low-level hardware</li>
                <li>Why understanding computer architecture is important for software developers</li>
            </ul>
            
            <div class="action-buttons">
                <button class="btn btn-primary" onclick="goToModule2()">
                    🚀 Continue to Module 2: Number Systems
                </button>
                <button class="btn btn-secondary" onclick="returnToPlatform()">
                    ← Return to Learning Platform
                </button>
                <button class="btn btn-secondary" onclick="downloadCompletionSummary()">
                    📄 Download Completion Summary
                </button>
                <button class="btn btn-secondary" onclick="reviewModule()">
                    📖 Review Module Content
                </button>
            </div>
        </section>
    </main>

    <script>
        // Module state tracking
        let moduleState = {
            sectionsCompleted: {
                video: false,
                components: false,
                layers: false,
                quiz: false,
                reflection: false
            },
            componentsExplored: new Set(),
            layersExplored: new Set(),
            quizAnswers: {},
            quizSubmitted: false,
            reflectionText: '',
            overallProgress: 0
        };

        // Quiz answers (correct answers)
        const quizAnswers = {
            1: 'b', // CPU
            2: 'b', // Hide complexity
            3: 'c'  // Digital logic and transistors
        };

        // Initialize module
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing CSC210 Module 1...');
            
            // Check if we came from the main platform
            checkReturnUrl();
            
            loadModuleState();
            updateProgress();
            updateButtonStates();
            
            console.log('Module 1 initialized successfully');
        });

        // Check for return URL and module parameters
        function checkReturnUrl() {
            const urlParams = new URLSearchParams(window.location.search);
            const returnUrl = urlParams.get('return');
            const moduleNum = urlParams.get('moduleNum');
            
            if (returnUrl) {
                // Store return URL for later use
                moduleState.returnUrl = decodeURIComponent(returnUrl);
            }
            
            if (moduleNum) {
                moduleState.moduleNumber = parseInt(moduleNum);
            }
        }

        // Save state with session-only storage
        function saveModuleState() {
            try {
                const storageData = {
                    ...moduleState,
                    timestamp: new Date().toISOString(),
                    componentsExplored: Array.from(moduleState.componentsExplored),
                    layersExplored: Array.from(moduleState.layersExplored),
                    sessionOnly: true
                };
                
                // Use sessionStorage only for privacy
                sessionStorage.setItem('csc210_module1_state', JSON.stringify(storageData));
            } catch (error) {
                console.warn('Could not save module state:', error);
            }
        }

        // Load state from session storage only
        function loadModuleState() {
            try {
                const saved = sessionStorage.getItem('csc210_module1_state');
                
                if (saved) {
                    const savedState = JSON.parse(saved);
                    
                    // Restore Sets from arrays
                    if (savedState.componentsExplored && Array.isArray(savedState.componentsExplored)) {
                        savedState.componentsExplored = new Set(savedState.componentsExplored);
                    }
                    if (savedState.layersExplored && Array.isArray(savedState.layersExplored)) {
                        savedState.layersExplored = new Set(savedState.layersExplored);
                    }
                    
                    moduleState = { ...moduleState, ...savedState };
                    
                    // Restore UI state
                    restoreUIState();
                    
                    console.log('Session progress loaded');
                }
            } catch (error) {
                console.warn('Could not load module state:', error);
            }
        }

        // Restore UI based on saved state
        function restoreUIState() {
            // Restore reflection text
            if (moduleState.reflectionText) {
                document.getElementById('reflection-text').value = moduleState.reflectionText;
            }

            // Restore quiz answers
            Object.keys(moduleState.quizAnswers).forEach(questionNum => {
                const answer = moduleState.quizAnswers[questionNum];
                const option = document.querySelector(`[data-question="${questionNum}"] [data-answer="${answer}"]`);
                if (option) {
                    option.classList.add('selected');
                }
            });

            // Mark explored components and layers
            moduleState.componentsExplored.forEach(component => {
                const element = document.querySelector(`[data-component="${component}"]`);
                if (element) {
                    element.style.opacity = '0.8';
                }
            });

            moduleState.layersExplored.forEach(layer => {
                const element = document.querySelector(`[data-layer="${layer}"]`);
                if (element) {
                    element.style.opacity = '0.8';
                }
            });
        }

        // Update progress bar
        function updateProgress() {
            const completedSections = Object.values(moduleState.sectionsCompleted).filter(Boolean).length;
            const totalSections = Object.keys(moduleState.sectionsCompleted).length;
            const percentage = Math.round((completedSections / totalSections) * 100);
            
            moduleState.overallProgress = percentage;
            
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            
            if (progressFill) {
                progressFill.style.width = `${percentage}%`;
            }
            
            if (progressText) {
                progressText.textContent = `${percentage}% Complete`;
            }

            saveModuleState();
        }

        // Update button states based on completion
        function updateButtonStates() {
            // Video completion button
            const videoBtn = document.getElementById('video-complete-btn');
            if (videoBtn && moduleState.sectionsCompleted.video) {
                videoBtn.disabled = false;
                videoBtn.textContent = '✅ Video Completed';
            }

            // Components completion button
            const componentsBtn = document.getElementById('components-complete-btn');
            if (componentsBtn) {
                if (moduleState.componentsExplored.size >= 4) { // Require exploring at least 4 of 6 components
                    componentsBtn.disabled = false;
                    componentsBtn.textContent = '✅ Complete Component Exploration (Explored ' + moduleState.componentsExplored.size + '/6)';
                } else {
                    componentsBtn.textContent = '🔍 Explore More Components (' + moduleState.componentsExplored.size + '/4 required)';
                }
                if (moduleState.sectionsCompleted.components) {
                    componentsBtn.textContent = '✅ Components Completed';
                    componentsBtn.disabled = true;
                }
            }

            // Layers completion button
            const layersBtn = document.getElementById('layers-complete-btn');
            if (layersBtn) {
                if (moduleState.layersExplored.size >= 4) { // Require exploring at least 4 of 6 layers
                    layersBtn.disabled = false;
                    layersBtn.textContent = '✅ Complete Abstraction Layers (Explored ' + moduleState.layersExplored.size + '/6)';
                } else {
                    layersBtn.textContent = '🔍 Explore More Layers (' + moduleState.layersExplored.size + '/4 required)';
                }
                if (moduleState.sectionsCompleted.layers) {
                    layersBtn.textContent = '✅ Layers Completed';
                    layersBtn.disabled = true;
                }
            }

            // Quiz submit button
            const quizBtn = document.getElementById('quiz-submit-btn');
            if (quizBtn) {
                if (Object.keys(moduleState.quizAnswers).length >= 3) {
                    quizBtn.disabled = false;
                }
                if (moduleState.quizSubmitted) {
                    quizBtn.textContent = '✅ Quiz Submitted';
                    quizBtn.disabled = true;
                }
            }

            // Reflection completion button
            const reflectionBtn = document.getElementById('reflection-complete-btn');
            if (reflectionBtn) {
                if (moduleState.reflectionText.length >= 50) {
                    reflectionBtn.disabled = false;
                }
                if (moduleState.sectionsCompleted.reflection) {
                    reflectionBtn.textContent = '✅ Reflection Completed';
                }
            }

            // Module completion button
            const moduleBtn = document.getElementById('module-complete-btn');
            if (moduleBtn) {
                const allCompleted = Object.values(moduleState.sectionsCompleted).every(Boolean);
                if (allCompleted) {
                    moduleBtn.disabled = false;
                }
            }
        }

        // Video functions
        function playVideo(videoId) {
            alert('Video player would open here. For demo purposes, marking as watched.');
            moduleState.sectionsCompleted.video = true;
            updateProgress();
            updateButtonStates();
        }

        function showTranscript(videoId) {
            alert('Video transcript would be displayed here in a modal or expandable section.');
        }

        // Component exploration with improved accessibility
        function exploreComponent(componentName) {
            // Remove active class and aria-expanded from all components
            document.querySelectorAll('.component').forEach(comp => {
                comp.classList.remove('active');
                comp.setAttribute('aria-expanded', 'false');
            });

            // Add active class to clicked component
            const component = document.querySelector(`[data-component="${componentName}"]`);
            if (component) {
                component.classList.add('active');
                component.setAttribute('aria-expanded', 'true');
                
                // Track exploration
                moduleState.componentsExplored.add(componentName);
                
                // Visual feedback for explored components
                setTimeout(() => {
                    component.style.opacity = '0.8';
                }, 2000);

                // Announce to screen readers
                const details = component.querySelector('.component-details');
                if (details) {
                    details.setAttribute('aria-live', 'polite');
                }

                updateButtonStates();
                saveModuleState();
            }
        }

        // Layer exploration with improved accessibility
        function exploreLayer(layerName) {
            const layer = document.querySelector(`[data-layer="${layerName}"]`);
            if (layer) {
                // Toggle active state
                const isActive = layer.classList.contains('active');
                layer.classList.toggle('active');
                layer.setAttribute('aria-expanded', !isActive);
                
                // Track exploration
                moduleState.layersExplored.add(layerName);
                
                // Visual feedback for explored layers
                setTimeout(() => {
                    layer.style.opacity = '0.8';
                }, 1000);

                updateButtonStates();
                saveModuleState();
            }
        }

        // Quiz functions with improved accessibility
        function selectAnswer(questionNum, answer) {
            // Remove selection from all options in this question
            const question = document.querySelector(`[data-question="${questionNum}"]`);
            question.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
                opt.setAttribute('aria-checked', 'false');
            });

            // Select the clicked option
            const selectedOption = question.querySelector(`[data-answer="${answer}"]`);
            selectedOption.classList.add('selected');
            selectedOption.setAttribute('aria-checked', 'true');

            // Store the answer
            moduleState.quizAnswers[questionNum] = answer;

            updateButtonStates();
            saveModuleState();
        }

        function submitQuiz() {
            if (Object.keys(moduleState.quizAnswers).length < 3) {
                alert('Please answer all questions before submitting.');
                return;
            }

            let score = 0;
            const totalQuestions = Object.keys(quizAnswers).length;

            // Check each answer and provide feedback
            Object.keys(quizAnswers).forEach(questionNum => {
                const userAnswer = moduleState.quizAnswers[questionNum];
                const correctAnswer = quizAnswers[questionNum];
                const isCorrect = userAnswer === correctAnswer;

                if (isCorrect) score++;

                // Update UI to show correct/incorrect
                const question = document.querySelector(`[data-question="${questionNum}"]`);
                const userOption = question.querySelector(`[data-answer="${userAnswer}"]`);
                const correctOption = question.querySelector(`[data-answer="${correctAnswer}"]`);

                if (isCorrect) {
                    userOption.classList.add('correct');
                } else {
                    userOption.classList.add('incorrect');
                    correctOption.classList.add('correct');
                }

                // Show feedback
                const feedback = document.getElementById(`feedback-${questionNum}`);
                if (feedback) {
                    feedback.style.display = 'block';
                    if (isCorrect) {
                        feedback.className = 'feedback correct';
                        feedback.textContent = '✅ Correct! Well done.';
                    } else {
                        feedback.className = 'feedback incorrect';
                        feedback.textContent = getFeedbackMessage(questionNum, correctAnswer);
                    }
                }
            });

            // Overall feedback
            const percentage = Math.round((score / totalQuestions) * 100);
            alert(`Quiz completed! You scored ${score}/${totalQuestions} (${percentage}%). ${percentage >= 70 ? 'Great job!' : 'Review the material and try again if needed.'}`);

            moduleState.quizSubmitted = true;
            moduleState.sectionsCompleted.quiz = true;
            updateProgress();
            updateButtonStates();
        }

        function getFeedbackMessage(questionNum, correctAnswer) {
            const messages = {
                1: '❌ The CPU (Central Processing Unit) is called the "brain" because it executes instructions and coordinates all computer operations.',
                2: '❌ Abstraction layers hide complexity, allowing each layer to focus on its specific purpose without worrying about implementation details below.',
                3: '❌ Digital logic and transistors are the lowest level we typically discuss in computer architecture, directly controlling electrical signals.'
            };
            return messages[questionNum] || '❌ Incorrect. Please review the material.';
        }

        function resetQuiz() {
            // Clear all selections and feedback
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
                opt.setAttribute('aria-checked', 'false');
            });

            document.querySelectorAll('.feedback').forEach(feedback => {
                feedback.style.display = 'none';
            });

            // Reset state
            moduleState.quizAnswers = {};
            moduleState.quizSubmitted = false;
            moduleState.sectionsCompleted.quiz = false;

            updateProgress();
            updateButtonStates();
            saveModuleState();
        }

        // Reflection functions
        function updateReflection() {
            const reflectionText = document.getElementById('reflection-text').value;
            moduleState.reflectionText = reflectionText;
            updateButtonStates();
            saveModuleState();
        }

        function downloadModuleReflection() {
            const reflectionText = document.getElementById('reflection-text').value;
            if (reflectionText.trim().length > 0) {
                moduleState.reflectionText = reflectionText;
                saveModuleState();
                
                // Create downloadable file
                const content = `CSC210 Module 1 Reflection
Student: [Enter your name]
Date: ${new Date().toLocaleDateString()}
Module: Module 1 - The Big Picture

Reflection Question:
Think about a smartphone or computer you use regularly. Can you identify examples of the different abstraction layers we discussed? How does understanding these layers change your perspective on how technology works?

Response:
${reflectionText}

---
Instructions: Save this file and combine with other module reflections for your comprehensive reflection assignment in Module 4.
`;
                
                const blob = new Blob([content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'CSC210_Module1_Reflection.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                alert('Module 1 reflection downloaded! Keep this file for your Module 4 comprehensive reflection assignment.');
            } else {
                alert('Please write your reflection before downloading.');
            }
        }

        function saveModuleReflection() {
            // Redirect to download function for consistency
            downloadModuleReflection();
        }

        function saveReflection() {
            // Redirect to download function for consistency
            downloadModuleReflection();
        }

        function copyReflectionToClipboard() {
            const reflectionText = document.getElementById('reflection-text').value;
            if (reflectionText.trim().length > 0) {
                const fullContent = `CSC210 Module 1 Reflection
Student: [Enter your name]
Date: ${new Date().toLocaleDateString()}
Module: Module 1 - The Big Picture

Reflection Question:
Think about a smartphone or computer you use regularly. Can you identify examples of the different abstraction layers we discussed? How does understanding these layers change your perspective on how technology works?

Response:
${reflectionText}

---
Instructions: Save this text and combine with other module reflections for your comprehensive reflection assignment in Module 4.`;

                navigator.clipboard.writeText(fullContent).then(() => {
                    alert('Module 1 reflection copied to clipboard! Paste and save this text for your Module 4 assignment.');
                }).catch(() => {
                    // Fallback for older browsers
                    const textArea = document.createElement('textarea');
                    textArea.value = fullContent;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert('Module 1 reflection copied to clipboard! Paste and save this text for your Module 4 assignment.');
                });
            } else {
                alert('Please write your reflection before copying.');
            }
        }

        function downloadCompletionSummary() {
            const completedSections = Object.values(moduleState.sectionsCompleted).filter(Boolean).length;
            const totalSections = Object.keys(moduleState.sectionsCompleted).length;
            
            const summary = `CSC210 Module 1 Completion Summary
Student: [Enter your name]
Date: ${new Date().toLocaleDateString()}
Session Progress: ${Math.round((completedSections / totalSections) * 100)}%

Completed Activities:
✓ Video: ${moduleState.sectionsCompleted.video ? 'Yes' : 'No'}
✓ Components Explored: ${moduleState.componentsExplored.size}/6 (${Array.from(moduleState.componentsExplored).join(', ')})
✓ Abstraction Layers: ${moduleState.layersExplored.size}/6 (${Array.from(moduleState.layersExplored).join(', ')})
✓ Knowledge Quiz: ${moduleState.sectionsCompleted.quiz ? 'Yes' : 'No'}
✓ Reflection: ${moduleState.sectionsCompleted.reflection ? 'Yes' : 'No'}

Next Steps:
1. Download your Module 1 reflection if you haven't already
2. Continue to Module 2: Number Systems
3. Save all module reflection files for the comprehensive reflection assignment in Module 4
4. Review any incomplete activities if needed

---
Note: Remember to download and save your reflection response file for each module. You'll need all module reflections for the final assignment in Module 4.
`;
            
            const blob = new Blob([summary], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'CSC210_Module1_Completion_Summary.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Section completion functions
        function completeSection(sectionName) {
            moduleState.sectionsCompleted[sectionName] = true;
            updateProgress();
            updateButtonStates();
            
            // Provide feedback
            const messages = {
                video: 'Video section completed! 🎥',
                components: 'Component exploration completed! 🖥️',
                layers: 'Abstraction layers completed! 🗗️',
                quiz: 'Knowledge check completed! 🧠',
                reflection: 'Reflection completed! 💭'
            };
            
            alert(messages[sectionName] || 'Section completed!');
        }

        // Module navigation
        function proceedToModule2() {
            const allCompleted = Object.values(moduleState.sectionsCompleted).every(Boolean);
            if (!allCompleted) {
                alert('Please complete all sections before proceeding to Module 2.');
                return;
            }
            
            // Mark this module as completed and return to main platform
            returnToPlatformWithCompletion();
        }

        function returnToPlatformWithCompletion() {
            // Mark module as completed in the main platform
            if (moduleState.returnUrl) {
                // Add completion parameter to return URL
                const separator = moduleState.returnUrl.includes('?') ? '&' : '?';
                const completionUrl = `${moduleState.returnUrl}${separator}completed=${moduleState.moduleNumber}`;
                window.location.href = completionUrl;
            } else {
                // Fallback: return to main platform
                window.location.href = 'https://dpai-mc.github.io/csc210-25fall/csc210-wk1-learning-platform.html?completed=1';
            }
        }

        function goToModule2() {
            // Navigate to Module 2 using the same URL pattern
            const currentUrl = window.location.href;
            const module2Url = currentUrl.replace('mod1.html', 'mod2.html');
            
            // Add return URL parameter if we have one
            if (moduleState.returnUrl) {
                const separator = module2Url.includes('?') ? '&' : '?';
                const urlWithReturn = `${module2Url}${separator}return=${encodeURIComponent(moduleState.returnUrl)}&moduleNum=2`;
                window.location.href = urlWithReturn;
            } else {
                window.location.href = module2Url;
            }
        }

        function returnToPlatform() {
            if (moduleState.returnUrl) {
                window.location.href = moduleState.returnUrl;
            } else {
                // Fallback: return to main platform
                window.location.href = 'https://dpai-mc.github.io/csc210-25fall/csc210-wk1-learning-platform.html';
            }
        }

        function reviewModule() {
            // Scroll to top and highlight incomplete sections
            window.scrollTo({ top: 0, behavior: 'smooth' });
            
            const incomplete = Object.entries(moduleState.sectionsCompleted)
                .filter(([section, completed]) => !completed)
                .map(([section]) => section);
            
            if (incomplete.length > 0) {
                alert(`Review needed for: ${incomplete.join(', ')}`);
            } else {
                alert('All sections completed! Great job!');
            }
        }

        function downloadNotes() {
            // Redirect to the completion summary function
            downloadCompletionSummary();
        }

        // Enhanced keyboard accessibility
        document.addEventListener('keydown', function(e) {
            // Allow Enter key to activate clickable elements
            if (e.key === 'Enter' && (e.target.hasAttribute('tabindex') || e.target.classList.contains('option'))) {
                e.preventDefault();
                e.target.click();
            }
            
            // Arrow key navigation for quiz options
            if (e.target.classList.contains('option')) {
                const options = Array.from(e.target.parentNode.querySelectorAll('.option'));
                const currentIndex = options.indexOf(e.target);
                let nextIndex;
                
                if (e.key === 'ArrowDown') {
                    nextIndex = (currentIndex + 1) % options.length;
                    options[nextIndex].focus();
                    e.preventDefault();
                } else if (e.key === 'ArrowUp') {
                    nextIndex = (currentIndex - 1 + options.length) % options.length;
                    options[nextIndex].focus();
                    e.preventDefault();
                }
            }
        });

        // Auto-save on page unload
        window.addEventListener('beforeunload', function() {
            saveModuleState();
        });

        // Periodic auto-save
        setInterval(saveModuleState, 30000); // Save every 30 seconds

        // Initialize accessibility attributes
        document.addEventListener('DOMContentLoaded', function() {
            // Set initial aria-expanded states
            document.querySelectorAll('.component').forEach(comp => {
                comp.setAttribute('aria-expanded', 'false');
            });
            
            document.querySelectorAll('.layer').forEach(layer => {
                layer.setAttribute('aria-expanded', 'false');
            });
            
            // Set initial aria-checked states for quiz options
            document.querySelectorAll('.option').forEach(option => {
                option.setAttribute('aria-checked', 'false');
            });
        });
    </script>
</body>
</html>
                
