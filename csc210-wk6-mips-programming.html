<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIPS Assembly Programming Guide</title>
    
    <!-- 1. CDN Links -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- 2. Meta Comments (Required) -->
    <!-- Chosen Palette: Background #FDFBF8, Text #383838, Primary Accent #EADDD7, Hover #F0EBE8 -->
    <!-- Application Structure Plan: Tabbed interface with code viewer, step-by-step explanations, and interactive exercises -->
    <!-- Visualization & Content Choices: Syntax-highlighted code blocks, memory diagrams, register visualization -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    
    <!-- 3. Embedded CSS -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #383838;
        }
        
        .code-font {
            font-family: 'Fira Code', monospace;
        }
        
        .primary-accent {
            background-color: #EADDD7;
        }
        
        .hover-state:hover {
            background-color: #F0EBE8;
        }
        
        .tab-active {
            background-color: #EADDD7;
            border-bottom: 2px solid #383838;
        }
        
        .code-highlight {
            background-color: #F0EBE8;
            border-left: 4px solid #EADDD7;
        }
        
        .register-box {
            background-color: #F0EBE8;
            border: 2px solid #EADDD7;
            border-radius: 8px;
            padding: 12px;
            margin: 8px 0;
        }
        
        .memory-cell {
            background-color: #FDFBF8;
            border: 1px solid #EADDD7;
            width: 60px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        
        @media print {
            .no-print {
                display: none;
            }
        }
    </style>
</head>
<body class="antialiased">
    <!-- Skip to Content Link -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white p-2 rounded">
        Skip to main content
    </a>

    <div class="container mx-auto p-4 md:p-8 max-w-6xl">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold mb-4">Interactive MIPS Assembly Programming Guide</h1>
            <p class="text-lg text-gray-600">Learn the fundamentals of MIPS assembly language through hands-on examples</p>
        </header>

        <!-- Main Content -->
        <main id="main-content">
            <!-- Tab Navigation -->
            <nav role="tablist" class="flex flex-wrap border-b border-gray-300 mb-6" aria-label="Learning guide sections">
                <button role="tab" aria-selected="true" aria-controls="overview-panel" id="overview-tab" 
                        class="tab-button px-4 py-2 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 tab-active">
                    Overview
                </button>
                <button role="tab" aria-selected="false" aria-controls="structure-panel" id="structure-tab"
                        class="tab-button px-4 py-2 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 hover-state">
                    Program Structure
                </button>
                <button role="tab" aria-selected="false" aria-controls="instructions-panel" id="instructions-tab"
                        class="tab-button px-4 py-2 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 hover-state">
                    Instructions
                </button>
                <button role="tab" aria-selected="false" aria-controls="data-panel" id="data-tab"
                        class="tab-button px-4 py-2 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 hover-state">
                    Data Section
                </button>
                <button role="tab" aria-selected="false" aria-controls="simulation-panel" id="simulation-tab"
                        class="tab-button px-4 py-2 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500 hover-state">
                    Simulation
                </button>
            </nav>

            <!-- Tab Panels -->
            <div class="tab-content">
                <!-- Overview Panel -->
                <section role="tabpanel" id="overview-panel" aria-labelledby="overview-tab" class="tab-panel">
                    <h2 class="text-2xl font-bold mb-4">MIPS Assembly Language Overview</h2>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-xl font-semibold mb-3">What is MIPS?</h3>
                            <p class="mb-4">MIPS (Microprocessor without Interlocked Pipeline Stages) is a reduced instruction set computer (RISC) architecture. It's commonly used in educational settings to teach assembly language programming concepts.</p>
                            
                            <h3 class="text-xl font-semibold mb-3">Key Characteristics</h3>
                            <ul class="list-disc pl-6 space-y-2">
                                <li>32 general-purpose registers ($0-$31)</li>
                                <li>Simple, fixed-length instructions (32 bits)</li>
                                <li>Load/store architecture</li>
                                <li>Big-endian byte ordering</li>
                            </ul>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-semibold mb-3">Sample Program Preview</h3>
                            <div class="code-highlight p-4 rounded">
                                <pre class="code-font text-sm"><code>.globl main
.text
main:
    li $t2, 25        # Load immediate
    lw $t3, value     # Load word
    add $t4, $t2, $t3 # Addition
    sub $t5, $t2, $t3 # Subtraction
    li $v0, 10        # Exit syscall
    syscall
.data
value: .word 12</code></pre>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Program Structure Panel -->
                <section role="tabpanel" id="structure-panel" aria-labelledby="structure-tab" class="tab-panel hidden">
                    <h2 class="text-2xl font-bold mb-4">MIPS Program Structure</h2>
                    
                    <div class="grid lg:grid-cols-2 gap-6 mb-6">
                        <div>
                            <h3 class="text-xl font-semibold mb-3">Sample Program</h3>
                            <div class="bg-white p-4 rounded border">
                                <pre class="code-font text-sm"><code><span class="bg-yellow-200 px-1 rounded">.globl main</span>
<span class="bg-blue-200 px-1 rounded">.text</span>
<span class="bg-blue-200 px-1 rounded">main:</span>
    li $t2, 25        # Load immediate
    lw $t3, value     # Load word
    add $t4, $t2, $t3 # Addition
    sub $t5, $t2, $t3 # Subtraction
    li $v0, 10        # Exit syscall
    syscall
<span class="bg-green-200 px-1 rounded">.data</span>
<span class="bg-green-200 px-1 rounded">value: .word 12</span></code></pre>
                            </div>
                            <div class="mt-2 text-sm">
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="bg-yellow-200 px-2 py-1 rounded text-xs">Global Declaration</span>
                                    <span class="bg-blue-200 px-2 py-1 rounded text-xs">Text Section</span>
                                    <span class="bg-green-200 px-2 py-1 rounded text-xs">Data Section</span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold mb-3">Structure Overview</h3>
                            <div class="space-y-3">
                                <div class="bg-yellow-100 p-3 rounded border-l-4 border-yellow-500">
                                    <h4 class="font-semibold">Global Declaration</h4>
                                    <p class="text-sm">Makes symbols visible to linker</p>
                                </div>
                                <div class="bg-blue-100 p-3 rounded border-l-4 border-blue-500">
                                    <h4 class="font-semibold">Text Section</h4>
                                    <p class="text-sm">Contains executable instructions</p>
                                </div>
                                <div class="bg-green-100 p-3 rounded border-l-4 border-green-500">
                                    <h4 class="font-semibold">Data Section</h4>
                                    <p class="text-sm">Contains variables and constants</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold mb-3">Essential Directives</h3>
                            
                            <div class="bg-white p-4 rounded border">
                                <h4 class="font-semibold mb-2">.globl main</h4>
                                <p class="mb-3">Declares 'main' as a global symbol, making it visible to the linker as the program entry point.</p>
                                
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div class="register-box">
                                        <h5 class="font-medium text-green-700 mb-2">✓ With .globl main</h5>
                                        <ul class="text-sm space-y-1">
                                            <li>• Standard entry point</li>
                                            <li>• Compatible with most simulators</li>
                                            <li>• Follows convention</li>
                                            <li>• Easier debugging</li>
                                        </ul>
                                    </div>
                                    <div class="register-box">
                                        <h5 class="font-medium text-red-700 mb-2">⚠ Without .globl main</h5>
                                        <ul class="text-sm space-y-1">
                                            <li>• May not execute properly</li>
                                            <li>• Simulator-dependent behavior</li>
                                            <li>• Harder to link with other code</li>
                                            <li>• Not recommended practice</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h3 class="text-xl font-semibold mb-3">Section Organization</h3>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div class="bg-white p-4 rounded border">
                                    <h4 class="font-semibold mb-2 code-font">.text</h4>
                                    <p class="text-sm mb-2">Contains executable instructions</p>
                                    <div class="code-highlight p-2 rounded text-xs code-font">
                                        <div>main:</div>
                                        <div>&nbsp;&nbsp;li $t2, 25</div>
                                        <div>&nbsp;&nbsp;lw $t3, value</div>
                                        <div>&nbsp;&nbsp;# ... more instructions</div>
                                    </div>
                                </div>
                                <div class="bg-white p-4 rounded border">
                                    <h4 class="font-semibold mb-2 code-font">.data</h4>
                                    <p class="text-sm mb-2">Contains variables and constants</p>
                                    <div class="code-highlight p-2 rounded text-xs code-font">
                                        <div>value: .word 12</div>
                                        <div>array: .word 1, 2, 3</div>
                                        <div>message: .asciiz "Hello"</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Instructions Panel -->
                <section role="tabpanel" id="instructions-panel" aria-labelledby="instructions-tab" class="tab-panel hidden">
                    <h2 class="text-2xl font-bold mb-4">MIPS Instructions Explained</h2>
                    
                    <div class="grid lg:grid-cols-2 gap-6 mb-6">
                        <div>
                            <h3 class="text-xl font-semibold mb-3">Sample Program</h3>
                            <div class="bg-white p-4 rounded border">
                                <pre class="code-font text-sm"><code>.globl main
.text
main:
    <span class="bg-yellow-200 px-1 rounded">li $t2, 25</span>        # Load immediate
    <span class="bg-blue-200 px-1 rounded">lw $t3, value</span>     # Load word
    <span class="bg-green-200 px-1 rounded">add $t4, $t2, $t3</span> # Addition
    <span class="bg-purple-200 px-1 rounded">sub $t5, $t2, $t3</span> # Subtraction
    <span class="bg-red-200 px-1 rounded">li $v0, 10</span>        # Exit syscall
    <span class="bg-red-200 px-1 rounded">syscall</span>
.data
value: .word 12</code></pre>
                            </div>
                            <div class="mt-2 text-sm">
                                <div class="flex flex-wrap items-center gap-1 mb-1">
                                    <span class="bg-yellow-200 px-2 py-1 rounded text-xs">Load Immediate</span>
                                    <span class="bg-blue-200 px-2 py-1 rounded text-xs">Load Word</span>
                                    <span class="bg-green-200 px-2 py-1 rounded text-xs">Addition</span>
                                    <span class="bg-purple-200 px-2 py-1 rounded text-xs">Subtraction</span>
                                    <span class="bg-red-200 px-2 py-1 rounded text-xs">System Call</span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold mb-3">Instruction Categories</h3>
                            <div class="space-y-3">
                                <div class="bg-yellow-100 p-3 rounded border-l-4 border-yellow-500">
                                    <h4 class="font-semibold">Load Instructions</h4>
                                    <p class="text-sm">Move data into registers</p>
                                </div>
                                <div class="bg-green-100 p-3 rounded border-l-4 border-green-500">
                                    <h4 class="font-semibold">Arithmetic Instructions</h4>
                                    <p class="text-sm">Perform mathematical operations</p>
                                </div>
                                <div class="bg-red-100 p-3 rounded border-l-4 border-red-500">
                                    <h4 class="font-semibold">System Instructions</h4>
                                    <p class="text-sm">Interact with operating system</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="bg-white p-4 rounded border">
                            <h3 class="text-xl font-semibold mb-3">Load Instructions</h3>
                            
                            <div class="grid md:grid-cols-2 gap-4 mb-4">
                                <div>
                                    <h4 class="font-semibold code-font mb-2">li $t2, 25</h4>
                                    <p class="text-sm mb-2"><strong>Load Immediate:</strong> Loads a constant value directly into a register</p>
                                    <div class="register-box text-sm">
                                        <div>Before: $t2 = ?</div>
                                        <div>After: $t2 = 25</div>
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 class="font-semibold code-font mb-2">lw $t3, value</h4>
                                    <p class="text-sm mb-2"><strong>Load Word:</strong> Loads a 32-bit value from memory into a register</p>
                                    <div class="register-box text-sm">
                                        <div>Memory[value] = 12</div>
                                        <div>After: $t3 = 12</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-4 rounded border">
                            <h3 class="text-xl font-semibold mb-3">Arithmetic Instructions</h3>
                            
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <h4 class="font-semibold code-font mb-2">add $t4, $t2, $t3</h4>
                                    <p class="text-sm mb-2"><strong>Addition:</strong> Adds two register values</p>
                                    <div class="register-box text-sm">
                                        <div>$t2 = 25, $t3 = 12</div>
                                        <div>$t4 = 25 + 12 = 37</div>
                                    </div>
                                </div>
                                
                                <div>
                                    <h4 class="font-semibold code-font mb-2">sub $t5, $t2, $t3</h4>
                                    <p class="text-sm mb-2"><strong>Subtraction:</strong> Subtracts second register from first</p>
                                    <div class="register-box text-sm">
                                        <div>$t2 = 25, $t3 = 12</div>
                                        <div>$t5 = 25 - 12 = 13</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-4 rounded border">
                            <h3 class="text-xl font-semibold mb-3">System Calls</h3>
                            <p class="mb-3">System calls (syscalls) are used to interact with the operating system, such as printing output or terminating the program.</p>
                            
                            <div class="code-highlight p-3 rounded">
                                <div class="code-font text-sm mb-2">li $v0, 10    # Load syscall code for exit</div>
                                <div class="code-font text-sm">syscall       # Execute the system call</div>
                            </div>
                            
                            <div class="mt-3 text-sm">
                                <strong>Common syscall codes:</strong> 1 (print integer), 4 (print string), 5 (read integer), 10 (exit)
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Data Section Panel -->
                <section role="tabpanel" id="data-panel" aria-labelledby="data-tab" class="tab-panel hidden">
                    <h2 class="text-2xl font-bold mb-4">Data Section and Variables</h2>
                    
                    <div class="grid lg:grid-cols-2 gap-6 mb-6">
                        <div>
                            <h3 class="text-xl font-semibold mb-3">Sample Program</h3>
                            <div class="bg-white p-4 rounded border">
                                <pre class="code-font text-sm"><code>.globl main
.text
main:
    li $t2, 25        # Load immediate
    <span class="bg-blue-200 px-1 rounded">lw $t3, value</span>     # Load word from data
    add $t4, $t2, $t3 # Addition
    sub $t5, $t2, $t3 # Subtraction
    li $v0, 10        # Exit syscall
    syscall
<span class="bg-green-200 px-1 rounded">.data</span>
<span class="bg-yellow-200 px-1 rounded">value: .word 12</span></code></pre>
                            </div>
                            <div class="mt-2 text-sm">
                                <div class="flex flex-wrap items-center gap-1 mb-1">
                                    <span class="bg-green-200 px-2 py-1 rounded text-xs">Data Directive</span>
                                    <span class="bg-yellow-200 px-2 py-1 rounded text-xs">Variable Declaration</span>
                                    <span class="bg-blue-200 px-2 py-1 rounded text-xs">Data Access</span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold mb-3">Data Flow</h3>
                            <div class="space-y-3">
                                <div class="bg-green-100 p-3 rounded border-l-4 border-green-500">
                                    <h4 class="font-semibold">1. Declare Section</h4>
                                    <p class="text-sm code-font">.data</p>
                                </div>
                                <div class="bg-yellow-100 p-3 rounded border-l-4 border-yellow-500">
                                    <h4 class="font-semibold">2. Define Variable</h4>
                                    <p class="text-sm code-font">value: .word 12</p>
                                </div>
                                <div class="bg-blue-100 p-3 rounded border-l-4 border-blue-500">
                                    <h4 class="font-semibold">3. Access Variable</h4>
                                    <p class="text-sm code-font">lw $t3, value</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="bg-white p-4 rounded border">
                            <h3 class="text-xl font-semibold mb-3">Declaring Variables</h3>
                            <p class="mb-4">The .data section is where you declare and initialize variables. Variables are stored in memory and can be accessed by their labels.</p>
                            
                            <div class="code-highlight p-3 rounded mb-4">
                                <div class="code-font text-sm">value: .word 12</div>
                            </div>
                            
                            <div class="grid md:grid-cols-3 gap-4">
                                <div class="text-center">
                                    <div class="font-semibold mb-2">Label</div>
                                    <div class="register-box text-sm">value</div>
                                    <div class="text-xs mt-1">Memory address identifier</div>
                                </div>
                                <div class="text-center">
                                    <div class="font-semibold mb-2">Directive</div>
                                    <div class="register-box text-sm">.word</div>
                                    <div class="text-xs mt-1">32-bit integer storage</div>
                                </div>
                                <div class="text-center">
                                    <div class="font-semibold mb-2">Initial Value</div>
                                    <div class="register-box text-sm">12</div>
                                    <div class="text-xs mt-1">Starting value</div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-4 rounded border">
                            <h3 class="text-xl font-semibold mb-3">Data Types</h3>
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <h4 class="font-semibold mb-2">Numeric Data</h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="code-font bg-gray-100 p-2 rounded">
                                            <div>number: .word 42</div>
                                            <div>array: .word 1, 2, 3, 4</div>
                                            <div>byte_val: .byte 255</div>
                                        </div>
                                    </div>
                                </div>
                                <div>
                                    <h4 class="font-semibold mb-2">String Data</h4>
                                    <div class="space-y-2 text-sm">
                                        <div class="code-font bg-gray-100 p-2 rounded">
                                            <div>message: .asciiz "Hello"</div>
                                            <div>buffer: .space 100</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-4 rounded border">
                            <h3 class="text-xl font-semibold mb-3">Memory Layout</h3>
                            <p class="mb-3">Understanding how data is organized in memory:</p>
                            
                            <div class="flex flex-wrap gap-2 justify-center">
                                <div class="text-center">
                                    <div class="text-xs mb-1">Address</div>
                                    <div class="memory-cell code-font">0x1000</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs mb-1">value</div>
                                    <div class="memory-cell code-font primary-accent">12</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs mb-1">0x1004</div>
                                    <div class="memory-cell code-font">...</div>
                                </div>
                                <div class="text-center">
                                    <div class="text-xs mb-1">0x1008</div>
                                    <div class="memory-cell code-font">...</div>
                                </div>
                            </div>
                            
                            <p class="text-sm mt-3 text-center">Each .word directive reserves 4 bytes (32 bits) of memory</p>
                        </div>
                    </div>
                </section>

                <!-- Simulation Panel -->
                <section role="tabpanel" id="simulation-panel" aria-labelledby="simulation-tab" class="tab-panel hidden">
                    <h2 class="text-2xl font-bold mb-4">Step-by-Step Execution</h2>
                    
                    <div class="grid lg:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-xl font-semibold mb-3">Program Code</h3>
                            <div class="bg-white p-4 rounded border">
                                <pre class="code-font text-sm" id="simulation-code"><code><span class="text-gray-400">1.</span> .globl main
<span class="text-gray-400">2.</span> .text
<span class="text-gray-400">3.</span> main:
<span class="text-gray-400">4.</span>     li $t2, 25
<span class="text-gray-400">5.</span>     lw $t3, value
<span class="text-gray-400">6.</span>     add $t4, $t2, $t3
<span class="text-gray-400">7.</span>     sub $t5, $t2, $t3
<span class="text-gray-400">8.</span>     li $v0, 10
<span class="text-gray-400">9.</span>     syscall
<span class="text-gray-400">10.</span> .data
<span class="text-gray-400">11.</span> value: .word 12</code></pre>
                            </div>
                            
                            <div class="mt-4">
                                <button id="step-button" class="primary-accent hover-state px-4 py-2 rounded font-medium focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    Start Execution
                                </button>
                                <button id="reset-button" class="ml-2 bg-gray-200 hover:bg-gray-300 px-4 py-2 rounded font-medium focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    Reset
                                </button>
                            </div>
                        </div>
                        
                        <div>
                            <h3 class="text-xl font-semibold mb-3">Register Values</h3>
                            <div class="space-y-2">
                                <div class="register-box">
                                    <div class="flex justify-between">
                                        <span class="code-font">$t2:</span>
                                        <span id="reg-t2" class="code-font">0</span>
                                    </div>
                                </div>
                                <div class="register-box">
                                    <div class="flex justify-between">
                                        <span class="code-font">$t3:</span>
                                        <span id="reg-t3" class="code-font">0</span>
                                    </div>
                                </div>
                                <div class="register-box">
                                    <div class="flex justify-between">
                                        <span class="code-font">$t4:</span>
                                        <span id="reg-t4" class="code-font">0</span>
                                    </div>
                                </div>
                                <div class="register-box">
                                    <div class="flex justify-between">
                                        <span class="code-font">$t5:</span>
                                        <span id="reg-t5" class="code-font">0</span>
                                    </div>
                                </div>
                                <div class="register-box">
                                    <div class="flex justify-between">
                                        <span class="code-font">$v0:</span>
                                        <span id="reg-v0" class="code-font">0</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mt-4">
                                <h4 class="font-semibold mb-2">Current Instruction</h4>
                                <div id="current-instruction" class="bg-white p-3 rounded border code-font text-sm">
                                    Ready to start...
                                </div>
                            </div>
                            
                            <div class="mt-4">
                                <h4 class="font-semibold mb-2">Memory</h4>
                                <div class="register-box">
                                    <div class="flex justify-between">
                                        <span class="code-font">value:</span>
                                        <span class="code-font">12</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- 4. Embedded JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Tab functionality
            const tabs = document.querySelectorAll('.tab-button');
            const panels = document.querySelectorAll('.tab-panel');
            
            function showTab(targetTab) {
                // Remove active state from all tabs and panels
                tabs.forEach(tab => {
                    tab.classList.remove('tab-active');
                    tab.classList.add('hover-state');
                    tab.setAttribute('aria-selected', 'false');
                });
                
                panels.forEach(panel => {
                    panel.classList.add('hidden');
                });
                
                // Add active state to target tab and panel
                targetTab.classList.add('tab-active');
                targetTab.classList.remove('hover-state');
                targetTab.setAttribute('aria-selected', 'true');
                
                const panelId = targetTab.getAttribute('aria-controls');
                document.getElementById(panelId).classList.remove('hidden');
            }
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => showTab(tab));
                
                tab.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        showTab(tab);
                    }
                });
            });
            
            // Simulation functionality
            let currentStep = 0;
            const maxSteps = 6;
            
            const stepButton = document.getElementById('step-button');
            const resetButton = document.getElementById('reset-button');
            const currentInstruction = document.getElementById('current-instruction');
            
            const registers = {
                't2': document.getElementById('reg-t2'),
                't3': document.getElementById('reg-t3'),
                't4': document.getElementById('reg-t4'),
                't5': document.getElementById('reg-t5'),
                'v0': document.getElementById('reg-v0')
            };
            
            const instructions = [
                {
                    line: 4,
                    code: 'li $t2, 25',
                    description: 'Load immediate value 25 into register $t2',
                    action: () => {
                        registers.t2.textContent = '25';
                        highlightLine(4);
                    }
                },
                {
                    line: 5,
                    code: 'lw $t3, value',
                    description: 'Load word from memory location "value" (12) into $t3',
                    action: () => {
                        registers.t3.textContent = '12';
                        highlightLine(5);
                    }
                },
                {
                    line: 6,
                    code: 'add $t4, $t2, $t3',
                    description: 'Add $t2 (25) and $t3 (12), store result in $t4',
                    action: () => {
                        registers.t4.textContent = '37';
                        highlightLine(6);
                    }
                },
                {
                    line: 7,
                    code: 'sub $t5, $t2, $t3',
                    description: 'Subtract $t3 (12) from $t2 (25), store result in $t5',
                    action: () => {
                        registers.t5.textContent = '13';
                        highlightLine(7);
                    }
                },
                {
                    line: 8,
                    code: 'li $v0, 10',
                    description: 'Load syscall code 10 (exit) into $v0',
                    action: () => {
                        registers.v0.textContent = '10';
                        highlightLine(8);
                    }
                },
                {
                    line: 9,
                    code: 'syscall',
                    description: 'Execute system call - program terminates',
                    action: () => {
                        highlightLine(9);
                    }
                }
            ];
            
            function highlightLine(lineNumber) {
                const codeElement = document.getElementById('simulation-code');
                const lines = codeElement.innerHTML.split('\n');
                
                // Reset all lines
                for (let i = 0; i < lines.length; i++) {
                    lines[i] = lines[i].replace(/class="[^"]*primary-accent[^"]*"/, 'class="text-gray-400"');
                }
                
                // Highlight current line
                if (lineNumber <= lines.length) {
                    lines[lineNumber - 1] = lines[lineNumber - 1].replace('class="text-gray-400"', 'class="primary-accent font-bold"');
                }
                
                codeElement.innerHTML = lines.join('\n');
            }
            
            function resetSimulation() {
                currentStep = 0;
                stepButton.textContent = 'Start Execution';
                currentInstruction.textContent = 'Ready to start...';
                
                // Reset all register values
                Object.values(registers).forEach(reg => {
                    reg.textContent = '0';
                });
                
                // Reset code highlighting
                const codeElement = document.getElementById('simulation-code');
                const lines = codeElement.innerHTML.split('\n');
                for (let i = 0; i < lines.length; i++) {
                    lines[i] = lines[i].replace(/class="[^"]*primary-accent[^"]*"/, 'class="text-gray-400"');
                }
                codeElement.innerHTML = lines.join('\n');
            }
            
            function executeStep() {
                if (currentStep < instructions.length) {
                    const instruction = instructions[currentStep];
                    instruction.action();
                    currentInstruction.textContent = instruction.description;
                    currentStep++;
                    
                    if (currentStep < instructions.length) {
                        stepButton.textContent = 'Next Step';
                    } else {
                        stepButton.textContent = 'Execution Complete';
                        stepButton.disabled = true;
                        stepButton.classList.add('opacity-50');
                    }
                }
            }
            
            stepButton.addEventListener('click', executeStep);
            resetButton.addEventListener('click', () => {
                resetSimulation();
                stepButton.disabled = false;
                stepButton.classList.remove('opacity-50');
            });
        });
    </script>
</body>
</html>
            
